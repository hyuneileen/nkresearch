Journal of Kim Il Sung University (Natural Science) Vol. 3 No. 1 Juche103(2014) Analysis of Spatial Position Information by Digital Image Processing of Aero-Cosmic Photograph Choe Tong Ryun, Kim Sun Yong and Ri Jae Gwang Abstract We discuss the method of special positional information analysis by the digital image processing of aero-cosmic photograph. Firstly, we scan Aero-Cosmic Photograph by 600 dpi on the scanner. Next, for stereoscopic observation we compose the anaglyphic image by the computer and solve the search problem of identify image point on the stereo pair. Then we compose stereo model and progress the absolute orientation of stereo pair images. Lastly we make it possible to determine position of geographical object indicated on the aero-cosmic photograph. Key words digital image, aero-cosmic photograph, digital photogrammentry  Introduction  The great leader Comrade Kim Il Sung said as follows. “Only when we exploit all that is within our reach for building the national economy and develop the natural resources on a wide scale, according to scientifically-substantiated data about our natural environment, can we rapidly push forward our national economy.” (“KIM IL SUNG WORKS” Vol. 7 P. 163) The spatial position of geographical object, especially terrain elevation is the most important information in land development and administration including river improvement, urban development and so on. Now satellite images and aerial photograph become important mean for extracting the spatial position information and the study for this purpose is progressing widely [1－8]. Procedure of digital image processing is as Fig.1 shows. We used the scanner to prepare the digital image of aero-cosmic photograph. At this time it was the most rational to set up the resolution of digital image to 600dpi. In the next step, the independent relative orientation parameters in the base coordinate and κ′′ were calculated to obtain the complementary color image for ′ ′′ , ωακα ′′ , ′  , system, stereoscopic observation[1]. These parameters were calculated by using following error equation for the relative orientation. ′ yy i f ⎞ ′+′′⎟⎟ x κκω i ⎠ (1) +′′′′−′ x i ′′′ yx i i f ′ yx i f ′′ i α −′′ ⎛ ⎜⎜ ⎝ −′ α q i = + ′′ i v f i x ′ , i y where of the right aero-cosmic photograph, ′ i q i ′′−′= y i i y is image coordinates of the left aero-cosmic photograph, is a image coordinates ′′ , ′′ i y i is the horizontal parallax, and f is the focal length. x To calculate the relative orientation parameters by equation (1), more than 6 conjugate points should be observed and the gradual asymptotic method should be used. Because the number of error － 121 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche103(2014) Fig. 1. Procedure of digital image processing equations was larger than the numbers of unknown parameters, firstly the adjustment value of the  were calculated by least square method in relative orientation parameters, ′′ , ′′ ′′ , d d κωακα ′ , d ′ , d d every iterative step. We could confirm the sufficient accuracy when iteration number was 4 or 5 by the experiment. The complementary color images for stereoscopic observation must be constructed by the horizontal stereoscopic images. Only so all horizontal parallax of conjugate points can be removed on the stereoscopic images. At this time, rearrangement of images for the complementary color images are performed by inverse transformation method using following equations (2) and (3). where ′=′ ay q 2 t ′=′ ax p 1 t +′ ′ af 32 22 +′ 31 , ′ af 11 =′ r ( 2 , ′ ay t ′=′ ax q 1 t +′ ′ ) af 33 23 f , , x x y y , =′ =′ =′′ =′′ (2) ′−′′ ′ ′ ′′−′ rp rp rq rq 21 12 21 12 ′ ′−′ ′ ′−′ ′ ′ qp qp qp qp 21 12 12 21 ′′′′−′′ ′′′′−′′′′ ′′ rp rp rq rq 22 12 12 21 ′′−′′′′ ′′ ′′−′′′′ ′′ qp qp qp qp 21 12 12 21 , ′=′ +′ +′ ′ ( r ax af 1 33 12 32 t ′=′ ′ are directional cosine of left photograph, , ija ) ( καϕ ij af (3) ′ 11 ′′ af 21 ′′ , , ′′ 13 , ′′ af 23 are directional cosine of right photograph, x +′′′′=′′ r ax 1 33 t =′′ +′′′′ r ay 2 33 t +′′′′=′′ ax q 1 t +′′′′=′′ ay 2 t +′′′′=′′ ax p 1 t +′′′′=′′ ay p 2 t ′′=′′ ′′ ′′ ija , ) κωαϕ ij and ′′ , t y in horizontal stereoscopic images, and are respectively image coordinates of left and right images  are ) f ′ , t y , ,  ′ t ′′ af 12 ′′ 22 ′=′ ay 2 t , , and 31 ( +′ 31 ′ , ′ 13 ′ 21 ′′ , , af af af af 31 32 32 ′′ t p q ′ , x y y x x ′′ ) ( ) ( f f ′ respectively image coordinates of left and right original images. The value of pixel in resampled image is determined by bi-linear interpolation method [1] as Fig. 2 shows and calculation formula is in equation (4). yxQ ,( ) Fig. 2. Interpolation of pixel’s value － 122 － Analysis of Spatial Position Information by Digital Image Processing of Aero-Cosmic Photograph yxQ ,( ) 1( −= s 1)( − Pt ) i , j 1( −+ tPs ) i , + s 1( − Pt ) i + ,1 j + stP i j 1 + + ,1 j 1 + (4) where s x −= int( x ), t y −= int( y ) . Pixel’s value obtained above was expressed pixel’s color by cyan color in the left image and by red color in the right image and pixel with cyan color of left image and pixel with red color of right image was arrayed alternately as Fig. 3 shows. In Fig. 3 ijL indicates the pixel of left image, that is, cyan color pixel, and ijR indicates the pixel of right image, red color pixel. In next step, more than 4 GCPs are used to determinate of absolute orientation coefficients of stereo model. These GCPs can be obtained on the topographic map of large scale and by the spatial triangulation. Image coordinates x ′ , y ′ and x ′′ , y ′′ of GCPs are measured in the stereo pair of images to determinate the absolute orientation coefficients of stereo model, and the image coordinates of horizontal images  and can be calculated by using following equations (5) and (6) [2]. ′ , t y x x ′ t ′′ , t y ′′ t Fig. 3. Array of pixel for the complementary color image i , f x y −=′ t −=′ t The formula used in the case of left image is as follows; ′ ′+′ ′−′ ′ ′+′ xa fa xa ya ya 11 12 13 21 22 i i i ′ ′+′ ′ ′+′ ′−′ xa xa ya fa ya 32 31 33 31 32 i i i The formula used in the case of right image is as follows; ′′ ′′+′′ ′′−′′ ′′ ′′+′′ fa ya ya xa xa 11 12 13 21 22 i i i ′′ ′′+′′ ′′−′′ ′′ ′′+′′ ya xa xa fa ya 31 32 33 31 32 i i i and iZ in the stereo model coordinates system XYZ Coordinates of GCPs i YX , i ′ , ′ t y t calculated by the image coordinates of horizontal images ′−′ fa 23 i ′−′ fa 33 i ′′−′′ fa 23 i ′′−′′ fa 33 i .      (5) .      (6) −=′′ t −=′′ t S1 x y x f f f , i i i are  and x ′′ , t y ′′ t obtained above and following equations (7). X i = x t i , Y i = y t i , Z i = f (7) B p i B p i B p i where B is length of photogram metric base, and p i ′′−′= x x t t i i is vertical parallax. For determination of absolute orientation coefficients can use transformation formula of spatial coordinates.[2] Fig. 4. Absolute orientation of stereo model igX , igY and where, g i X ⎡ ⎢ Y ⎢ ⎢ ⎢ ⎣ Z g i ⎤ ⎥ ⎥ ⎥ ⎥ ⎦ = + S X ⎡ ⎢ Y ⎢ S ⎢ Z ⎣ S ⎤ ⎥ ⎥ ⎥ ⎦ b ⎡ 11 ⎢ b ⎢ 21 ⎢ b ⎣ 31 b 12 b 22 b 32 b 13 b 23 b 33 ⎤ ⎥ ⎥ ⎥ ⎦ ⋅ ⎡ ⎢ ⎢ ⎢ ⎣ X i Y i Z i ⎤ ⎥ ⎥ ⎥ ⎦ (8) g igZ are geodetic spatial coordinates of GCPs, i i YX , i and iZ are spatial coordinates of GCPs in stereo model coordinates system, and = ,3,1 j = )3,1 is transformation ibij ( coefficients of coordinates. － 123 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche103(2014) In the equation (8) the unknown parameters are X , Y S S , Z S , ijb , 12 in all. Therefore the error equations as shown in equation (9) can be constructed if we know more than 4 GCPs. OOX OXO XOO ⎡ ⎢ ⎢ ⎢ ⎣ ⎤ ⎥ ⎥ ⎥ ⎦ L x L y L z ⎡ ⎢ ⎢ ⎢ ⎣ ⎤ ⎥ ⎥ ⎥ ⎦ V ⎡ ⎢ V ⎢ ⎢ V ⎣ x y z ⎤ ⎥ ⎥ ⎥ ⎦ B + = (9) where; X = 1 ⎡ ⎢ 1 ⎢ ⎢ M ⎢ 1 ⎣ X X 1 2 M X n Y 1 Y 2 M Y n Z Z 1 2 M Z n ⎤ ⎥ ⎥ ⎥ ⎥ ⎦ O is zero matrix, T =B [ X b 11 b 12 b 13 Y S 1 b 21 b 22 b 23 Z S 1 b 31 b 32 b 33 ] , T =L x [ X g 1 X g 2 X ng ] , T =L y Y [ g 1 T =V z [ v x 1 v x 2 L v nx ] , T =V y [ v y 1 Y g 2 v y 2 L L Y ng v ny ] , T =L z [ Z g 1 ] , T =V z [ v z 1 Z g 2 L Z ng ] , v z 2 L v nz ] S 1 L Error equations can be normalized to guarantee the safety of solution. The absolute orientation coefficients B of the stereo model are calculated by solving the error equation to the least square method. After the preparation of observation by computer was finished, we can observe the stereo of complementary color images and search the conjugate points been remarked automatically. At this time the conjugate points should be searched by equation (10) [4]. r = min N N ⎧ ⎪ ∑ ∑ ⎨ ⎪⎩ 1 = j i [( u 1 = ij ⎫ ⎪ 2 ]) ⎬ ⎪⎭ 2 − u ) + ( v ij − v (10) where iju is pixel value of left image, ijv is pixel value of right image, u and v are respectively average of pixel value in the search window of left and right images, and N is the size of search window. After image coordinates x and image coordinates then stereo model coordinates ′ , t y x ′ t ′′ y x ′′ , of a geographic object are observed, horizontal  and ′ , ′ y of that object are calculated by equation (5) and (6). And ′′ , ′′ x t y t and Z are calculated by equation (7). YX , igY and igZ can be calculated by substituting igX , Finally geodetic geographic coordinates X, Y and Z for equation (8). We used the stereoscopic images converted from aero-cosmic photograph which the scale is 1 to 25 000 to analyze the accuracy of spatial position and analyzed the accuracy by 36 check points in our experiments. In this experiment the accuracy of spatial coordinates was , m26.1±=ym m20.1±=xm m54.2±=zm and . － 124 － Analysis of Spatial Position Information by Digital Image Processing of Aero-Cosmic Photograph Conclusion  The principle and method proposed in this paper can be used without any special purpose equipment, that is, all steps of digital image processing for observation of geographic coordinates including the determination of orientation parameters, construction of stereo model, search of conjugate points, absolute orientation of stereo model and so on can be achieved by only programming on the computer. References  [1] 종합대학학보(자연과학), 51, 8, 179, 주체94(2005). [2] 종합대학학보(자연과학), 55, 4, 155, 주체98(2009). [3] 종합대학학보(자연과학), 50, 7, 138, 주체93(2004). [4] 종합대학학보(자연과학), 50, 9, 154, 주체93(2004). [5] 최동륜; 위성정보분석, 종합대학출판사, 216～221, 주체97(2008). [6] 최동륜; 항공위성사진측량학, 종합대학출판사, 206～215, 주체93(2004). [7] 汤国安 等; 遥感数字图像处理, 科学出版社, 60～88, 2004. [8] 张祖勋 等; 数字摄影测量学, 武汉大学出版社, 100～120, 2005. － 125 －