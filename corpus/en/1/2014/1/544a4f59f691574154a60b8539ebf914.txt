Journal of Kim Il Sung University (Natural Science) Vol. 3 No. 1 Juche103(2014) Measurements of the Mechanical Components’ Abrasion by Optical Fringe Projection Profilometry Choe Chun Sik , Yu Yong Ju and Kim Su Chol Abstract We propose the method for extracting phase by windows Fourier transformation(WFT) and measuring the surface profile of object with it. And we had revealed that WFT had been superior than window Fourier ridge (WFR). We also apply this WFF to real object such as toy’s face. The advantage of this method presented here, is that the whole image is divided into “valid areas”, then we apply the FT in these areas, and we invert it to get phase. This method reduced the calculation time dramatically than other method. And we concentrate the shape of “valid areas” to modify its shape as circle type. This makes accuracy more higher than rectangular type “valid areas”. And then we employed the unwrapping method which is consisted of two methods, normal line unwrapping method and quality guide method. The experimental results show that WFF has more accuracy in the areas where the phase is rapidly changing. So we can offer the possibility to measure the surface profile of the mechanical components, furthermore to estimate the abrasion of the mechanical components. Key words surface profile, Fourier transforms profilometry (FTP), windowed Fourier transformation   Introduction  Among the mechanical components, there are a lot of high-speed reciprocating motion components and these types of elements have the tendency to be more abrasive in time. Currently there are lots of researches to reuse these components or prolong the life-time of these elements. And one of these methods, the cathode sputtering method to make the TiN, TiC thin films’ epitaxial growth on the mechanical components[1]. Here there is a need of measuring the surface profiles of the mechanical components. Because, only when we measure the designed surfaces of the components and the current worn components’ surface correctly, we could have the correct estimation of the abrasion. Based on these measurements we can set the thickness of thin films, sputtering time, sputtering speed to recover the original surface. In this paper we propose Fourier Transform Profilometry(FTP) [2] and make the surface profile measuring instruments and improve these method with Windowed Fourier Transformation which is known to be more correct [3－5]. In this paper the relationship between Window Fourier Ridge(WFR) and Window Fourier Filtering(WFF) was investigated and we had revealed that WFF had been superior than FFT in the aspect of phase calculating. － 48 － Measurements of the Mechanical Components’ Abrasion by Optical Fringe Projection… Transformation(WFT) 1. Principle of Fourier Transformation Profilometry(FTR) and Window Fourier The fringe pattern recorded by CCD in FTP can be expressed as follows.(Fig. 1) ϕ yxg ,( yxb ,( yx ,( )] ) ) = yxa ,( (1)  is the phase caused by height of the object, is modulated ,( yxϕ represents background and yxb ,( cos[ + ) ) ) where yxa ,( ) amplitude. This equation can be expressed in other form. 1 2 yxa ,( yxb ,( yxf ,( yx ,( exp[ j ϕ )] + + = ) ) ) + yxb ,( ) exp[ − j ϕ yx ,( )] = (2) 1 2 = yxa ,( ) + f x )( + f ce * x )( ce Fig. 1. An image by fringe  projection method A: considering area where if we remove first and third term of equation (2) by filtering, we can express WFT of the as follows: sf , ,( ηξ , vu ) = ∫ dy ∫ () yuxgyxb ,( − , − v ) exp[ j ϕ ,( yx )] exp( xj yj + ηξ ) dx (3) where yxg ,( ) = exp( − x 2 2/ 2 σ − x 2/ 2 σ y ) is the Gaussian window function and ( τωsf ) , means 1 2 2 y Fourier transform of filtered signal. Compared with the Fourier Transform, which has an infinite spatial extension, WFT element has a limited spatial extension due to the window function. Consequently, the WFT spectrum gives the frequency information which is impossible for Fourier transform. Generally speaking, the spectrum of WFT is much simpler than FT, so we can choose the first harmonic frequency more effectively. On the contrary in WFT there is no apparent first harmonic or the first harmonic frequency is far apart from the reference frequency, and then we might dismiss this area in calculating phase. The cost is that WFT computation is heavier because its basis is redundant and not orthogonal. WFT is also known as short-time Fourier transform. It is also called Gabor transform if window function is a Gaussian function. We can express equation (3) as follows under the assumption of phase linearity in window region:  , ,( ,( ηξ (4) Gvub ,(( ϕ exp( vu , vu ))) sf = − y ) ) ) ) j , ( ωηωξ y x − − ( u + ωω y x where yω , xω are instantaneous frequencies of x-and y-axis. The WFR may be established on the basis of above equation (4). The dominating frequencies are instantaneous frequencies of fringe pattern in WFR [3]. So the phase of each point can be written as: ⊗ , max ηξ max ( xj y )) + ηξ are the maximum frequencies in spectrum of WFT. We slightly modified (5) )}          (6) ce , ) , ηξ where angle { vuh ,( vug ,( vuh ,( vu ,( vu ,( exp( ϕ = = ) ) f ) , max ,ηξ max conventional WFF to extract more precise phase from fringe pattern. We regard the point A in Fig.1, here we employed the source code delivered by literature. － 49 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche103(2014) Fig. 2. Windowed image(a), FT and filtering(b), IFT and represents as absolute values(c) In this step we filter the background components and search the first harmonic frequency programmatically. The third image of Fig. 2 shows the results. In conventional WFF the original signal only can be recovered as follows: = ∫ ) (7) ,() vugvu ( xj y + ηξ dudvd ,( yxf ,( , ηξ d ηξ exp( sf )) − ) , But that was very time consuming process because we have to invert at every point. And we think that this is the main obstacle in real industrial workshop, because it takes about 74 seconds in Pentium 4, 3.2GHz. In this paper in order to reduce the calculating time, we only operated at predetermined points, not every point but we want to keep the accuracy as almost same as conventional one. In Fig. 3 we can show the “Valid Areas” and the predetermined point in which we should transform the FFT. Here “S” denotes skipping step. Fig. 3. Valid areas(a) and skipping steps(b) What we can see from Fig. 3 is that the circles intersect each other, so that there is no omitted point in phase assigning. At first we set the “Valid Areas” shapes as rectangle (Fig. 3), but we change this as circle type because the Gaussian window function was a centric symmetric function. In real case the rectangular “Valid Area” has a great error in its four edges. From equation (3), we can extract the follow equation. yuxgyxb () ,( − , − v ) exp( j ϕ yx ,( )) = sf ηξ ,( , u , v ) exp[ − xj ddy ηξηξ ( )] + (8) ∫ Then we get the phase of point as follow: u ϕ ηξ ,( , yx ,( sf = ) ∫ arg{ And the amplitude of complex values of this point is : , v ) exp[ − xj ddy ηξηξ )] ( } + (9) ∫ yxb ,( ) = sf , ,( ηξ u , v ) exp[ − ( xj ddy )] ηξηξ + (10) yuxg − ( , − v ) － 50 － Measurements of the Mechanical Components’ Abrasion by Optical Fringe Projection… So here valid area means the subfringe’s area where the phase will be assigned by one WFT operation and we can consider that in this area the phase is changing so slowly that we might extract the phase from equation (9). 2. Phase Unwrapping Method There are many phase unwrapping methods and there is a famous book about this problem. This problem occurs in not only FTP but also phase shifting algorithm. And the most impressive method to me is the method proposed by [7, 8]. This temporal phase unwrapping method make us possible to unwrap the phase without considering neighbor pixels. But this method requires at least more than two images. We want to unwrap phase with only one image and the quality guide method is the powerful candidate for this application [9, 10]. And the most important thing in this method is how we define the quality. In this paper we define the quality as amplitude of equation (10). But when we use only this method, frequently a large gap occurs, and it also require many times. We think that the main reason is that this method makes the unwrapping path complicate and round, not straight. So sometimes gap between two neighbor points become great. In fact it is not necessary to use this method in the high quality regions. So we combine the normal line phase unwrapping method and quality guide method. At first we divided the whole region into two regions. First region has high quality and the second one has low quality. And then we use normal line unwrapping method in the first region. Next we search the leap points and add the areas around these points to the second region. And the second region is unwrapped by quality guide method. 3. Experimental Results and Analysis First we simulate the fringe pattern of ideological object shaped like pyramid (Fig. 4). At three point a, b and c, we show spectrum of x-axis obtained by WFT (Fig. 5). Here we can see that the first harmonic frequencies are apparent at point (b) and (c). But at the point (a) we might assume that the maximum point is not one. In such case WFR cannot give us correct phase because of ambiguous maximum value. Furthermore the interval of neighbor frequencies is (1/N) [10]. N is the longitude pixel number of the window image. It means that the error of this maximum frequency is more than 1/(2N). There are other methods to overcome this fault. That might be the method to control the widths of window function automatically [5]. From Fig. 5 we can judge if this “valid area” is valid or not. If the absolute value of the first harmonic frequency’s coefficient is smaller than certain threshold or the first harmonic frequency is too close to zero, or the first harmonic frequency is quite far away from the reference frequency, we simply dismiss Fig. 4. Fringe pattern of  ideological pyramid a, b, c are considering points － 51 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche103(2014) these “valid area” in calculating phase and remain these as undetermined are as. Fig. 5. Spectrum of the three point a, b and c Here we show some results of wrapped phase of WFT and FT corresponding to Fig. 1(Fig. 6). As looking the area within white rectangle (Fig.6), the differences between two images is that the FT has tendency to have vibrated edges but the WFF has more clear edges. Conclusion  In this paper we describe the method which extracts phase from the fringe pattern by WFF, so that we can get the surface profile of the object. We show that WFF has better than WFR in analyzing the fringe pattern of the pyramid type object. Fig. 6. Phase map a) WFT, b) FFT References  [1] Shouichi Ejiri et al., J. Soc. Mat. Sci. Japan, 54, 8, 881, 2005. [2] M. Takeda et al.; Appl Opt., 22, 3977, 1983. [3] K. Qian; Appl. Opt., 43, 2695, 2004. [4] K. Qian; Opt. Lasers. Eng., 45, 304, 2007. [5] Z. Jingang et al.; Appl. Opt., 46, 2670, 2007. [6] S. Peisen et al.; Appl. Opt.,45, 5086, 2006. [7] J. M. Huntley et al.; Appl. Opt., 32, 3047, 1993. [8] H. O. Saldner et al.; Appl. Opt., 36, 2770, 1997. [9] P. S. Huang et al.; Appl. Opt., 45, 5086, 2006. [10] S. Zhang et al.; Appl. Opt., 46, 50, 2007. － 52 －