Journal of Kim Il Sung University (Natural Science) Vol. 4 No. 1 Juche104(2015) Design Method of Disturbance Observer Guaranteeing  Closed Robust Stability Ri Jin Song, Yun Jong Nam Abstract This paper presents the design method for the Q-filter by ∞H standard control framework. The proposed strategy is evaluated and shown to improve the performances of rejecting disturbance and sensor noise in the control of the plant with elasticity such as flexible arm, hard disk drive and elastic joint of robot manipulator etc. Key words high performance motion control, disturbance observer, flexible joint  Introduction  In motion control, it is important to deppress disturbances and guarantee robustness to parametric uncertainties as well as reference tracking performance. Disturbance observer (DOB) [1] is one of the most effective means to attain these performances and widely applied to motion control systems [2－5]. The robustness and disturbance rejection capability of the DOB depends on how to optimally select Q-filter in DOB design. For high order Q-filter, typical filter models such as Butterworth model and binomial coefficient model are widely used [6－8]. However, these models can not sufficiently realize the optimal trade-off between rejection of disturbance and noise and robust stability, because these have fixed coefficient structures. It is only possible to increase the disturbance depressing performance through reduction of the filter's time constant. But, in the control of the plant with elasticity such as flexible joint of robot manipulator, reduction of the time constant is restricted for robust stability by high frequency vibration modes which are not included in model. It means that disturbance rejecting performance of DOB by the typical filter model is very limitative because of its fixed coefficient structure. [9－11]. It is shown that higher. Recently, several design methods of DOB using If the structure is changeable, the reachable limit of disturbance rejecting performance can get ∞H control scheme have been reported ∞H norms of sensitivity functions of feedback loop containing DOB can sufficiently reflect the attenuating performance of disturbance and noise as well as robustness against model perturbations. However, most of these design algorithms achieve optimization by numerical computation, which not only lacks systematicness but also is computational expensive. Moreover,  these methods can not realize structural specifications such as relative order and internal model ∞H control framework has order of the Q-filter. A systematic design method of DOB in standard been proposed in [12]. Especially, it can directly shape Q-filter by suitable selection of weighting functions to satisfy structural specifications. The method, however, has only considered robust stability － 26 － Design Method of Disturbance Observer Guaranteeing Closed Robust Stability of DOB inner loop to parameter variations, but not that of closed-loop system. The optimal Q-filter of DOB satisfying all specifications designed by systematic and ∞H standard control method. straightforward solving algorithm of 1. Standard ∞H Disturbance Observer The design method of DOB in ∞H standard control framework can systematically solve Q-filter optimization problem defined as ∞H norm condition. 1.1. Cost function for designing DOB DOB based control system is as Fig. 1. In DOB inner loop of Fig. 1, matching function of model is as follows. sP )( n= sP )( The transfer function from disturbance d to output y depends on sensitivity function , while transfer function from noise ξ to y depends on com- )(sQ . Thus plementary sensitivity function sQ− )( 1 cost function for designing Q-filter can be set as following by mixed sensitivity optimization technique. Fig. 1. DOB based control system max , γ min − ( 1)( ( sW sQ γ 1 )( )( sQsW 2 )) ∞ Q Ω∈ qkn , , RHQ ∈ ∞ < 1 (1) where Ω , qkn , = sNsMsFsF )({ ( = /)( )( ), sN )( = i sMsa , )( ⋅ = i ⋅ s j }, b j (2) n ∑ m ∑ = j 0 = (cid:34)= ,0 , internal model order. Weighting functions ) determine the frequency response of the filter and these should be selected n is the whole order, )(1 sW according to the frequency spectral density of disturbance, sensor noise and modeling error. i akmn = = relative order, and ( kb k ( mq ≤ )(2 sW and ( n k ≤ 0 , − q ) ) k 1.2. Optimization of cost function Generally optimization problem (1) can not be solved by algorithm of ∞H standard control problem, since it has restrictions such as structural order (2). Here, a pseudo loop transfer function ~ sL )( is employed to solve this problem. ~ sL :)( = sQ ( 1)( − sQ ( )) (3) − 1 which results in sensitivity and complementary sensitivity functions respectively. － 27 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche104(2015) sQ )( = ~ sL ( 1)( + ~ sL ( )) 1 − sQ C 1)( −= sQ )( 1( += 1 − )) ~ sL ( ~ sL )( (4) From (3) and (4), it is clear that relative order of )(sQ if and only if its  is equal to )(sQ satisfies relative order condition k , i.e., the relative order stable closed loop transfer function is the same as that of )(sQ . Then, is factorized into pseudo plant and pseudo ~ sP )( ~ sL )( ~ sL )( of controller ~ sK )( as where ~ sP )( ~ )( sKsP )( is an arbitrarily selected stable transfer function so that satisfies the relative order (5) ~ sL )( = ~ condition k . Thus optimization problem (1) can be transformed to find an optimal pseudo controller ~ * sK that makes the corresponding closed system stable and gives minimum value of norm cost )( function: min ~ K Π∈ ( 1)( sW γ + 1 ~ ~ ( )( )( sKsPsW 2 ~ ~ 1 − )( ( )) sKsP ~ ~ )( 1)( ( sKsP + 1 − )) ∞ < ,1 max γ (6) where ∏ is the set of controllers that make the closed-loop system stable. 1.3. Realization of internal model order demand Assume that disturbance model is known as = )( td q tp q − p t 1 − q q 1 − + (cid:34) + p 0 , q ≥ 0 . From internal model principle[8], it is clear that the equivalent controller of DOB system  integral factors in order to perfectly reject the dis- )( sQsKeq = should have 1/()( 1+q ( sQ )) − turbance in steady state. It is equivalent to the following coefficient structure of Q-filter )( sNsMsQ /)( )( = = m ∑ 0 j = (cid:34) , n sb j j / ∑ i sa i i nmq 0 = ≤ .          (7) i , i b i Solution of problem (1) has the coefficient structure of (7) if ,1,0 ≤ = = a q However, if not satisfy the preconditions for solving )(1 sW integral factors.  has poles on the imaginary axis, the augmented plant of standard problem could ∞H standard control problem. In order to avoid this 0>λ can be introduced as )(1 sW has 1+q difficulty, a sufficiently small parameter , sW )( 1 = sW )( γ 1 = γ .            (8) The resultant controller includes 1+q i = ,1,0 (cid:34) , q ) ~ * sK ,( ) λ = .           (9) 1 )(ˆ sW 1 1 q+ ( ) s λ + poles si ~ K s )( ⋅ * λ 0, (, −= λ 1 q 1 + + ) λ ( s integral factors We can select approximate controller with 1+q ~ * )( sK λ = ~ K * λ 0, )( s ⋅ 1 qs 1 + .            (10) － 28 － Design Method of Disturbance Observer Guaranteeing Closed Robust Stability 2. Mixed Sensitivity Design of DOB based Servo System When designing Q-filter, optimal sensitivity and robust stability to parameter variation should satisfy whole feedback system. However, the cost function (1) reflects these performances only for DOB inner loop, but not for entire closed system. In order that the design result of problem (1) meets these performance demands for the closed-loop system, we can employ suitable selection of weighting functions. 2.1. Robust stability Fig. 1 and 2 show the block diagram of the feedback control system with DOB inner loop and its equivalent system for analysis of robust stability to model variation. Suppose that model uncertainty can be treated as a multi- plicative perturbation, that is where )(sPn sP )( sP ( n is the nominal model and the variation (11)  is assumed )(sΔ Δ+ 1)( )) = s ( to be stable. The disturbance observer loop is robust stable if (( ) ωσ Δ ⋅ )(⋅σ represents maximum singular value. where ,1 ∀< jQ ( )) ω ω (12) j Meanwhile robust stability to model perturbation should be considered by feedback control loop being connected to DOB loop, i.e. the dashed parts in Fig. 1, 2. From Fig. 2, it is clear that the transfer function from the output )(sΔ to its input, that is, the complementary sensitivity function of closed loop system with of Fig. 2. Robust stability analysis DOB loop is where TDOB sQs )( )( = condition is satisfied = + sT )( )( sQsCsP )( )( n 1 sCsP )( )( + n )( sCsP )( + n DOB )( )( 1 sCsP + n is the complementary sensitivity function of DOB inner loop. (13) s )( T = Thus, feedback control loop with DOB is robust stable against variation )(sΔ if following If upper limit function )(sWT j jT ( (( ) ,1 ωσ Δ ⋅ is chosen such that )) ω < ∀ ω .            (14) (( )) ωσ Δ j ≤ jW ( T ω ,) ∀ ω (15) then the following condition guarantees the robust stability of the closed system. )( sW T ⋅ + )( )( sQsCsP )( )( sCsP )( n 1 + n ∞ < 1 (16) Notice that robust stability depends on both feedback controller )(sQ .  should be firstly considered so that system has desired tracking )(sQ should be designed for desired robust stability and disturbance suppression and Q-filter Therefore, feedback controller performance. Then, )(sC )(sC performance. － 29 － Journal of Kim Il Sung University (Natural Science) No. 1 Juche104(2015) 2.2. Sensitivity of feedback control system  in Fig. 1, the output y of the closed loop system can be written as If we assume sP )( n= sQsCsP )( )( )( )( )( sCsP n n 1 )( sCsP )( )( )( sCsP + + .    (17) ( sP n 1 + 1)( ( )) sQ − )( )( sCsP n d +⋅ sP )( r +⋅ ξ⋅ = + 1 y n n The sensitivity function of closed-loop system is defined as where S DOB s 1)( −= sQ )( = sS )( sQ 1 )( − )( sCsP )( + n is the sensitivity function of DOB inner loop. S DOB sCsP )( )( + n s )( = 1 1 (18) From (17) and (18), it comes that the sensitivity of closed loop system to model error and the effect of disturbance d on output y depend on sensitivity function (18), while the effect of sensor noise on the output depends on complementary sensitivity function (13). Thus, in order to )(sQ should be depress the effect of disturbance and sensor noise on the closed loop system, expressed as max , γ min sQ γ )( ⋅ sSsWSD )( )( ⋅ ∞ < 1 (19) where )(sWSD is the weighting function restricting the sensitivity at low frequencies. Hence, Q-filter design problem for optimality and robust stability of closed loop system can be defined as max , γ min Q Ω∈ , kn RHQ ∈ ∞ , q )( sW SD ⋅ ⎡ γ ⎢ ⎢ ⎢ )( sW T ⎢ ⎣ ⋅ ⋅ 1 )( sQ − )( 1 )( sCsP + n )( )( )( sQsCsP + n 1 )( )( sCsP + n ⎤ ⎥ ⎥ ⎥ ⎥ ⎦ ∞ < 1 .      (20) 2.3. Transformation to standard ∞H DOB design problem Q-filter design problem for closed loop system is difficult to solve in systematic and straightforward way since its structure does not satisfy precondition of ∞H standard control problem. However, expression(1) can be systematically solved. For this robust stability condition (16) can be rewritten as ,|)) + 1 − jW ( T is open loop transfer function of feedback loop. sCsP )( )( 1() +⋅ sL )( jQ ( |) ω jL ( jL ( ) ω ω ω ω | < ∀ | n= (21) where If | jQ ( |) ω | < 1 − jW ( T ω 1() +⋅ jL ( ω |)) − | jL ( |) ω then condition (21) is satisfied. Thus, ) |) ( jQ + ω ω Select a stable weighting function )(sWTD 1 − jW ( ω T 1 − jW ( TD |) ω |:) = jL ( ( ω E < | | then, robust stability condition can be written as 1 jW − ( TD (E ω jQ ( ) | ω < satisfies The frequency function (ωE ) － 30 － | jQ ( |) ω .         (22) jL ( | |) < + ω such that 1() +⋅ jL ( ω |)) − | jL ( |) ω E ( ωω ∀ ), (23) ω |,) ∀ > ,0) ∀ ω .            (24) ω is easily attained if the system satisfies Design Method of Disturbance Observer Guaranteeing Closed Robust Stability general robust stability condition sTsWT )( )( 0 ∞ < 1 , where sT )(0 = sL 1/()( + sL ( )) is comple- mentary sensitivity function of the system without DOB. We can rewrite the robust stability and sensor noise rejection condition as On the other hand, by (19) considering restriction condition such as S s 1)( −= sQ )( DOB TsW TD )( DOB s )( = sQsW )( )( TD ∞ ∞ < 1 .         (25) γ ⋅ ( jWSD 1 ( jL + ) ω ) ω 1( − ( jQ )) ω < ,1 ∀ ω .           (26) If we select a stable weighting function such that | jW ( SD ω 1/() + jL ( ω |)) ωω ∀ ,) .            (27) Then, a sufficient condition for (19) can be rewritten as sQ max ( min 1)( , γ − ⋅ sQ γ )( sWC ( < 1 .        (28) By (25) and (28), we can replace problem (20) can be written as follows. )(sWC jW ( < C max , γ min γ ⎡ ⎢ ⎣ ⋅ sW c 1()( −⋅ sQ ( )) sQsW )( )( ⋅ TD Q Ω∈ , kn RHQ ∈ ∞ , q < 1 (29) )) ∞ ⎤ ⎥ ⎦ ∞ Conclusion  By the robust stability sufficient condition proposed in this paper, design problem for performances of closed loop is transformed to the problem for designing Q-filer of DOB inner loop, so as to easily obtain optimal robust Q-filter by systematic and straightforward solution algorithm. As a result, the optimal tradeoff between disturbance rejection property at low frequencies and peak magnitude around cut-off frequency can be reached well according to design purpose in practical cases. Design examples showed that all the design demands can be satisfied by suitable selection of weighting functions that can reflect robust stability and sensitivity of feedback loop. References  [1] K. Ohnishi et al.; In Proc. 15th Annu. Conf. IEEE Ind. Electron. Soc., 2, 11, 356, 1989. [2] H. Tanaka et al.; In Proc. IEEE 10th Int. Workshop Adv. Motion Control, 3, 601, 2008. [3] K. Natori et al.; IEEE Trans. Ind. Electron., 57, 3, 1050, 2010. [4] W. S. Huang et al.; IEEE Trans. Ind. Electron., 57, 1, 420, 2010. [5] Z. Jamaludin et al.; IEEE Trans. Ind. Electron., 56, 10, 3848, 2009. [6] T. Umeno et al.; In Proc. 15th Annu. Conf. IEEE Ind. Electron. Soc., 2, 11, 313, 1989. [7] C. J. Kempf et al.; IEEE Trans. on Control Systems Technology, 7, 5, 513, 1999. [8] E. Schrijver et al.; Journal of Dynamic Systems, Measurement and Control, 124, 4, 539, 2002. [9] C. C. Wang et al.; In Proc. American Control Conference, 6, 6, 3764, 2004. [10] G. Zhang et al.; In Proc. 7th World Congression Intelligent Control and Automation, 6, 4697, 2008. [11] C. K. Thum et al.; IET Control Theory and Applications, 3, 12, 1591, 2009. [12] J. N. Yun et al.; Acta Automatica Sinica, 37, 3, 331, 2011. － 31 －