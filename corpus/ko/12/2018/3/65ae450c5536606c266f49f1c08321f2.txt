김일성종합대학학보 정보과학 주체107(2018)년 제64권  제3호 참고주기에 의한 무선수감부망시간동기화의 한가지 방법 림혁, 김훈 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《프로그람을 개발하는데서 기본은 우리 식의 프로그람을 개발하는것입니다. 우리는 우리 식의 프로그람을 개발하는 방향으로 나가야 합니다.》(《선집》 증보판 제21권 42페지) 세계적으로 무선수감망의 동기화에 많이 쓰이는 FTSP나 GTSP, FLOPSYNC와 같은 방 법들은 회귀연산이나 산수연산, 미적분연산들을 리용하고있다. 이 방법들[1, 2]은 동기화를 진행할 때 여러가지 연산들을 실행하기때문에 많은 시간과 에네르기를 소비한다. 우리는 동기화를 진행할 때 산수연산이나 회귀연산을 하지 않는 참고주기에 의한 시 간동기화방법을 고찰하였다. １．수감부마디의 시간동기화에서 고려할 문제 무선수감부망에서 매개 수감마디는 모두 자체의 시간을 가지고있다. 그러나 마디의 발진기주파수[3]는 오차도 있고 온도변화와 전자기파간섭 등이 있으므로 어떤 시각에 모 든 마디점이 시간동기화되여도 시간이 지나면 편차가 생길수 있다. 그러므로 전체 체계가 협동동작을 하려면 마디사이의 시간동기화를 해야 한다. 수감부망에서 많은 마디들은 사람이 없는데서 수감부전송기능을 수행하게 되며 또한 작고 유한한 에네르기를 가지고있다. 따라서 감청과 통신과정에 에네르기를 소모하므로 시간동기화기구는 반드시 에네르기소모를 고려하여야 한다. ２．참고주기에 의한 시간동기화방법 １）병행전송(Concurrent Transmissions) 무선수감부망에서는 방송전송을 하므로 마디들은 린접한 마디들에서 방송하는 파케 트들을 감청할수 있다. 참고주기에 의한 시간동기화방법에서는 바로 이 성질을 리용한다. 참고주기를 리용하는 마디들은 자기의 무선장치를 켜고 감청하다가 다른 마디의 전 송파케트를 중단방식으로 수신하고 그것을 다시 중계하는 방식으로 동작한다. 한편 송신기 의 린접마디들이 같은 시각에 파케트들을 수신하므로 역시 같은 시각에 파케트들을 중계 하기 시작한다. 이것은 다시 다른 마디들이 수신하도록 하며 파케트를 중계한다. 이런 방 법으로 참고주기방법은 무선수감부망에서 원천마디(개시자)로부터 다른 마디(수신기)까지 파케트를 전파하여 병행전송의 리익을 얻는다. 참고주기방법은 이렇게 개시자의 전송에 의하여 무선장치사건으로 전체가 구동되는 것이다. － 4 － 종합대학학보 정보과학 주체107(2018)년 제64권 제3호 ２）시간동기화(Time Synchronization) 참고주기에 의한 시간동기화과정은 그림 1과 같다. ⑤ ① ④ ② ③ 개시자 수신기 1 수신기 2 수신기 3 Tslot c=0  c=1 c=2  c=3  c=4  c=5 그림 1. 참고주기에 의한 시간동기화과정 ①－수신파케트, ②－송신파케트, ③－무선장치끄기, ④－쏘프트웨어지연, ⑤－휴지감청 참고주기방법에서는 동기화기간 전송파케트에 1B마당을 중계계수기 c의 값마당으로 할당하고 이것을 동기화에 리용한다. 중계계수기는 참고주기기간에 수신된 파케트가 몇번 중계되였는가를 알수 있게 해준다. 개시자는 첫 전송전에 c＝0으로 설정하고 파케트를 방송한다. 마디들은 중단방식으로 이 파케트를 수신하면서 중계계수기값을 1만큼 증가시키고 재전송한다. 중계계수기 c를 가진 파케트전송시작과 중계계수기 c＋1을 가진 다음파케트전송시작 사이의 시간구간을 Tslot로 정의하였다. 마디들은  국부적으로  무선장치중단발생때  주어진  시간표식(timestamp)을  리용하여 Tslot를 평가한다. 여기서 중요한것은 Tslot가 망범위에서 상수라는것이다. 그것은 참고주기 가 있는 기간에 파케트의 길이가 변하지 않기때문이다. 수신된 파케트의 중계계수기 c와 Tslot의 평가에 기초하여 마디는 개시자가 전송을 시 작한 시간 즉 참고시간을 계산한다. 이런 방법으로 모든 수신기들은 개시자의 박자와 상대적으로 동기화된다. 절대적인 시간동기화를 위하여 개시자는 전송파케트에 자기의 박자값을 매몰한다. 그러면 마디에서 의 시간은 이다. ×+ Tc T c T = 0 slot ３．마디의 동작과 동기화평가 참고주기 응용과제 그림 2. 마디의 동작방식 마디의 동작방식은 그림 2와 같다. 이 방법은 참고주기에 의한 동기화기간과 응 용과제(혹은 응용프로그람)들을 실행하는 기간으 로 분리할수 있기때문에 리득을 얻게 된다. 마디 들은 두 참고주기단계들사이간격을 알기때문에 t 참고주기에 의한 무선수감부망시간동기화의 한가지 방법 － 5 － 동기시작전에 이미 수행하던 과제를 동기적으로 중지하고 후에 재수행하도록 한다. 결과 참고주기는 다른 활동에 영향을 미치지 않고 동기화를 진행하게 한다. 이렇게 시간구분을 하면 병행전송들이 정확히 겹쳐지게 되여 망이 다른 규약을 실행하거나 두 동기화기간에 다른 과제들을 실행하게 일정계획을 작성할수 있다. 참고주기방법은 쏘프트웨어체계와 결합하여 유연하게 체계를 동작시킬수 있다. 모든 마디들이 같은 시각에 깨여나게 하는 Duty-cycle망은 능동단계의 시작에 참고주 기를 할당할수 있으며 혹은 다른 통신이 수행되지 않는 잠자기단계동안에 할당할수 있다. 한 마디상에서 쏘프트웨어체계와 참고주기를 통합하는 가능한 방법은 그림 3과 같다. 응용과제 일정계획작성기 참고주기 StartR_peri() StopR_peri() ScheduleR_peri() R_periStart() R_periFinished() 개시자 조 종 흐 름 자 료 흐 름 참고주기자료 수신자 동기자료 그림 3. 한 마디상에서 쏘프트웨어체계와 참고주기를 통합하는 가능한 방법 리용하려는 응용과제는 일정계획작성기가 일정한 주기로 참고주기를 실행하도록 지 시한다. 이 주기는 같은 함수를 다시 호출하여 실행때(실례로 개시자로부터 새 간격을 받 는다.) 응용프로그람에 의하여 변경될수 있다. 주기에 따라 일정계획작성기는 참고주기대 면부에서 제공되는 함수 StartR_peri()와 StopR_peri()를 리용하여 참고주기를 시작하거나 멈출수 있다. 일정계획작성기는 참고주기를 시작하기 전에 함수 R_periStart()를 거쳐 응용프로그람 을 확인하고 응용프로그람이 참고주기파악을 위해 준비할 기회를 준다. 또한 일정계획작 성기는 응용프로그람이 참고주기를 끝낸 후 함수 R_periFinished()를 거쳐 확인하게 한다. 조종흐름은 개시자와 수신자에 대하여 다 같지만 자료흐름은 다르다. 개시자에서 응 용프로그람이 참고주기를 제공한다면 수신자에서 참고주기는 응용프로그람에 수신된 자 료를 통과시킨다. 참고주기는 개시자와 수신자의 두 응용프로그람에 동기화자료(참고시 간)를 제공한다. 체계가 가동되여 수신자가 아직 동기화되지 않았을 때 응용프로그람은 다른 마디로 부터 참고주기파케트를 빨리 감청하도록 더 짧은 주기로 일정계획작성기가 참고주기를 실행하게 지시하고 동기화시킨다. 주기를 적응시킴으로써 빠른 초기동기화와 에네르기효 과성사이에 요구되는 균형을 맞출수 있다. 참고주기는 중단과 시간계수기들을 명백하게 관리한다. 응용프로그람은 일정계획작성기가 참고주기를 주기적으로 실행하도록 지시한다. 일정 계획작성기는 나타나려는 참고주기단계에 대하여 응용프로그람을 확인한다. 참고주기에 의한 시간동기화의 오차평가는 그림 4와 같다. － 6 － 종합대학학보 정보과학 주체107(2018)년 제64권 제3호 그림 4에서 보는바와 같이 15개의 무선수감부 TelosB의 마디에 대하여 도약수 8까지 시간동기화오차는 ±5μs를 넘지 않았다. 참고주기방법은 보충적인 비용이 없이 망범위의 시간동기화를 제공한다. /μt s 5 0 -5 1    2    3   4    5    6    7    8 도약수 그림 4. 시간동기화의 오차평가 맺 는 말 무선수감부망에서 연산을 리용하지 않고 참고주기를 리용한 시간동기화방법을 제안 하였다. 동기화할 때 보충적인 연산을 진행하지 않으므로 에네르기를 절약하면서도 정확 한 시간동기를 보장할수 있다. 참 고 문 헌 [1] M. Maróti et al.; The Fooding Time Snchronization Protocol, ACM SenSys, 39～49, 2004. [2] P. J. He et al.; IEEE Transactions on Automatic Control, 59, 3, 660, 2014. [3] S. E. Khediri; International Journal of Distributed and Parallel Systems, 3, 3, 155, 2012. 주체107(2018)년 5월 5일 원고접수 A Method of Time Synchronization by the Reference Period in Wireless Sensor Networks Rim Hyok, Kim Hun We described the time synchronization method of using reference period with no-regression and calculus operations that consumed resources in WSN. Since no additional operation during synchronization is used, it can save the energy and supply the accurate time synchronization. Key words: wireless sensor network, reference period, time synchronization