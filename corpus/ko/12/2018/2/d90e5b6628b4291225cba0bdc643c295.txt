김일성종합대학학보 정보과학 주체107(2018)년 제64권  제2호 평균시간표식을 리용한 무선수감망동기화의 한가지 방법 김훈, 리경심 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《프로그람을 개발하는데서 기본은 우리 식의 프로그람을 개발하는것입니다. 우리는 우 리 식의 프로그람을 개발하는 방향으로 나가야 합니다.》(《선집》 증보판 제21권 42페지) 수감마디를 시간동기화할 때 선행한 연구들에서 리용하던 회귀연산을 리용하는 방법 은 실행시간이 긴 결함이 있었다. 을 제안하였다. 론문에서는 마디들사이의 평균시간표식을 리용하여 동기화를 실현하는 한가지 방법 １．동기화와 시간편차 무선수감망에서 매개 수감마디는 모두 자기의 시간을 가지고있다. 그러나 마디의 발 진기주파수는 오차도 있고 온도변화와 전자기파간섭 등이 있으므로 어떤 시각에 모든 마 디점이 시간동기화되여도 시간이 지나면 편차가 생길수 있다.[3] 그러므로 전체 체계가 협동동작을 하려면 마디사이의 시간동기화를 해야 한다. 선행연구[1, 2]에서 고찰한 회귀연산을 리용하는 방법은 실행시간이 긴 결함이 있었 다. 방송방식에 의한 동기화방식[3]에서 전송된 통보문이 린접한 무선수감마디의 응용층 에 도달했을 때 시간은 통보문전송경로상의 다양한 오유원천때문에 결정론적으로 결정 할수 없다. 마디들의 현재 시간표식을 교환하면 통보문의 전달지연을 계산할수 없게 되므로 이 것이 비결정인자로 되여 요구하는 정확도를 보장하지 못하고 큰 오차를 초래하게 된다. 동기화를 진행할 때 일반적으로 동기화오차가 일정한 범위를 초과하지 않도록 부단 히 동기화처리를 반복한다. 두 마디사이의 정확한 동기화는 마디들사이의 상대박자표류가 보상되여야만 달성될수 있다. 박자동기화알고리듬들에서 모든 마디들은 참조마디의 하드 웨어박자속도에 그것들의 론리박자의 속도를 적응시킨다. 주기적인 표식을 리용하여 시간 정보를 방송하면 린접한 마디들에서 송신－수신동기화기구를 써서 통보문확인을 하지 않 아도 되므로 통보문의 구조를 복잡하게 하지 않고 간단히 할수 있다. ２．동기화오차의 보상 여기서는 시간표식의 평균에 의해 오유의 주요원천을 감소시키는 방법을 제안하였다. 바이트지향무선소편에서는 완전한 자료바이트가 수신되고 입구완충기에 씌여졌을 때 중단을 발생한다. 중단조종기는 하드웨어박자로부터 현 시간표식을 읽고 통보문의 메타자 료에 그것을 보관한다. 그러나 들어오는 무선장치자료바이트들에 대한 중단조종기의 반응 평균시간표식을 리용한 무선수감망동기화의 한가지 방법 － 31 － 시간에 일부 요동이 존재한다. 현재의 시간표식을 자료바이트가  대기중으로 전송되기 바로 직전에 통보문에 쓴다. 따라서 수신기측에서 시간표식은 들어오는 통보문의 동기화바이트가 수신된 바로 직 후에 기록된다. 한다. TinyOS의 병행모형은 공유된 변수들에 대한 비동기적인 접근이 원자적일것을 요구 그러므로 이 주기동안에 일어난 중단은 원자적인 블로크의 끝에까지 지연된다. 몇 sμ 정도의 정확도로 박자동기화를 달성하기 위하여 통보문에서 변화되는 이런 지연들에 대 한 경우까지 고려하여 처리를 진행하도록 할수는 없다. 이런 경우들에 대처하여 통보문지연에서의 변화를 감소시키기 위하여 매 통보문은 송신기와 수신기쪽에서 다 시간표식된 다중시간을 가지게 한다. 무선수감부에서 무선소편은 새 자료바이트가 도착했을 때나 이미 전송되였을 때 시 it 에서 현 하드웨어박 Int 에서 중단을 발생한다. 그러면 중단조종기가 자극되고 시각 i 간 무선소편이 1B를 전송하는데 걸리는 시간을 BYTE _ 라고 하자. 이것은 상수로서 보 T 드속도와 무선소편의 부호화설정으로부터 직접 계산할수 있다. 1B를 전송하는데 BYTE _ 시간이 걸리므로 모든 시간표식에 대하여 다음의 식이 성 T 자값을 읽는다. 립한다. −<− t i 1 다중시간표식을 리용하면 중단시의 비결정론적인 요동에 대한 보상이 가능하다. 다중시간표식을 리용했을 때 i번째 바이트의 시간표식에 대한 평가식은 다음과 같다. (1) BYTE Int T _ i t ' i = min( t , i t i 1 + − BYTE )_ T (2) 은 i번째와 i+1번째 박자값을 읽은 시각이며 ' it 는 실지 리용하려고 하는 시 첫 6B의 시간표식들은 파케트도착시간평가에 리용하며 하나의 시간표식은 이 평가값 여기서 t , t i 각의 평가값이다. +i 1 들의 평균값을 리용하여 구한다. ３．동기화방법의 실현 수감마디들의 배치를 다음의 그림과 같이 하고 동기화방법에 대한 실험을 하였다. 마디 5 마디 6 마디 3 기지국마디 마디 1 마디 2 마디 4 그림. 수감마디들의 배치 P C － 32 － 종합대학학보 정보과학 주체107(2018)년 제64권 제2호 매개 수감마디들은 자기의 시간신호를 전송하려는 바이트자료들에 써서 방송전송하 거나 접수하며 신호를 접수한 마디들은 그 신호를 받아 처리를 진행한다. 기지국마디에서는 시간표식을 첫번째 바이트에 써서 다른 마디들에 방송한다. 두번째 자료바이트에 대하여서도 우와 같은 동작을 진행한다. 마디 1에서는 기지국마디의 자료바이트를 수신하여 입구완충기에 입력하며 다 썼을 때 중단을 발생한다. 마디 2나 마디 3, 4, 5, 6도 기지국마디의 자료바이트를 수신하여 입구 완충기에 입력하고 중단을 발생한다. 마디 1이나 다른 마디들도 두번째 바이트에 대하여 우와 같은 처리를 진행하고 두번째 시간표식에 대한 평가를 진행하여 결정한다. 즉 첫 1B의 시작시간표식바이트가 접수되여 완충기에 써넣어진 다음 단일중단이 발생하며 다음 바이트를 수신하여 입구완충기에 써넣어진 다음 또 중단을 발생한다. 매 바이트들의 시간표식들을 식 (2)로 평가하여 수신마디들에서의 시간표식들을 결정 한다. 결정한 6개의 시간표식들을 평균하여 그 자료의 시각으로 평가하여 다음자료처리를 진행한다. 1 i = 이와 같은 방법으로 결정한 시간표식을 리용하면 중단으로 인한 비결정성오차를 보 t avg = 6 ∑ it (3) 상하고 정확한 동기화를 실현할수 있다. 대적으로 오차가 작아진다는것을 알수 있다. 다음의 표에서 보는바와 같이 제안한 방법은 동기화주기기간에 선행방법에 비해 상 표．동기화오차 시간/s 선행방법/% 제안방법/% <±2 <±4 <±6 <±7 <±3.5 <±4 <±4 <±5 5 000 10 000 15 000 18 000 맺 는 말 이 동기화방법은 나무구조가 필요치 않으며 련결과 마디실패시에도 비교적 안전하게 동기화를 진행할수 있다. 기지국마디에서의 주기적인 시간표식신호방송에 의해 오차범위가 제한되게 되며 평 균시간표식값에 의해 동기화오차의 변동이 시간이 지남에 따라 그리 크지 않게 된다. 참 고 문 헌 [1] M. Maróti et al.; The Flooding Time Synchronization Protocol, In ACM SenSys, 39～49, 2004. [2] J. He et al.; IEEE Transactions on Automatic Control, 59, 3, 660, 2014. [3] J. He et al.; International Journal of Parallel and Distributed Systems, 25, 4, 1055, 2014. 주체107(2018)년 2월 5일 원고접수 평균시간표식을 리용한 무선수감망동기화의 한가지 방법 － 33 － A Method of Synchronization Using the Average Time Stamp in Wireless Sensor Networks Kim Hun, Ri Kyong Sim In this paper, we proposed a method that realized the synchronization of wireless sensor networks using average time stamp. This method safely synchronizes against link and node failures and by the average time stamp value, error variation is not large with the elapse of time. Key words: wireless sensor network, synchronization, average time stamp