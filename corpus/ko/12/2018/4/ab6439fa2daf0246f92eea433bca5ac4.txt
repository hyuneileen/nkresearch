김일성종합대학학보 정보과학 주체107(2018)년 제64권  제4호 신경망에 의한 차동구동방식이동로보트의 역운동학풀이방법 리광혁, 신영철 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《인민경제의 현대화, 정보화실현의 전략적목표는 모든 생산공정을 자동화, 지능화하 고 공장, 기업소들을 무인화하는것입니다.》(《조선로동당 제7차대회에서 한 중앙위원회사업총화 보고》 단행본 48페지) 바퀴식이동로보트의 항행에서는 주어진 목표길에 따르는 구동바퀴들의 운동법칙을 정확히 구하는것이 중요하다. 선행연구[1, 2]에서는 바퀴식이동로보트의 역운동학문제 다시말하여 목표자리길에 따 르는 구동바퀴들의 회전각(즉 목표궤도)을 생성하는 문제가 충분히 론의되지 못하고 일반 적인 속도조종방법으로 이동로보트의 항행문제를 취급하였다. 론문에서는 차동구동방식이동로보트의 역운동학문제에 대하여 론의하고 역운동학문 제풀이에 비선형함수근사화기능이 높은 신경망을 리용함으로써 지능적방법을 리용하여 바퀴식이동로보트의 항행을 보다 높은 수준에서 실현하였다. １．이동로보트의 역운동학풀이문제 그림 1에 차동구동방식이동로보트에서 자리표계들사이의 관계를 보여주었다. ㄱ)                                            ㄴ) 그림 1. 차동구동방식이동로보트에서 자리표계들사이의 관계 ㄱ) 차동구동방식이동로보트모형, ㄴ) 이동로보트의 자리표계 그림 1에서 00 yOx 은 기준자리표계(대역자리표계), yxO r r r 는 로보트본체에 설치된 로 보트자리표계(국부자리표계)이다. － 90 － 종합대학학보 정보과학 주체107(2018)년 제64권 제4호 x=p r 기준자리표계 T]1,0, y 00 yOx 에서 로보트자리표계 , 로보트자리표계의 방위를 θ라고 하자. yxO r r 의 원점 [ 일반적으로 이동로보트의 이동과제는 기준자리표계(대역자리표계) , r r r rO 의 동차자리표벡토르를 00 yOx 에서 로보트 를 제시해주고 그것을 추종하는 본체의 희망하는 이동경로 즉 목표자세 =q d [ x d , y d , θ d T] 과제로 설정된다. 그런데 이동로보트의 실지조종은 이렇게 제시된 목표자세에 해당하게 좌우량쪽 바퀴들의 회전각을 조종하는 방식으로 진행되게 된다. 결국 이동로보트의 조종 을 위해서는 로보트본체의 희망하는 이동경로 즉 목표자세 가 주어진 T] y x [ , , =q d d θ d d 경우 그것에 해당하는 좌우량쪽 바퀴들의 희망하는 회전각들을 결정하여 조종체계에 목 표궤도로 제시해주어야 한다. 정의(이동로보트의 역운동학) 이동로보트본체의 희망하는 이동경로 즉 목표자세 , d 에 해당하는 좌우량쪽 바퀴들의 목표회전각 =q d x [ T] , θ d y d R ϕϕ , 들을 결정하는 문제를 이동로보트의 L 역운동학(Inverse Kinematics)문제라고 한다. ２．신경망에 의한 차동구동방식이동로보트의 역운동학풀이체계 론문에서는 이동로보트의 역운동학풀이를 위한 신경망으로 1개의 중간층을 가진 BP 신경망을 리용하였다. 그림 2에 입력층, 중간층, 출력층이 각각 1개인 BP신경망의 구조를 보여주었다. dx dy dθ kjV i jiW Ldϕ Rdϕ M j M 그림 2. BP신경망의 구조 ① 입력층 그림 2에서 보는바와 같이 입력층은 3개의 신경세포로 이루어졌는데 매개 신경세포 들은 선형입출력특성을 가진다. 즉 입력층신경세포들은 신경망에 입력으로 제시되는 이동 로보트의 목표자세 를 그대로 출력한다. T] y x [ , , =q d d θ d d ② 중간층 중간층은 n개의 신경세포들로 이루어졌는데 매 신경세포들의 내부전위는  ∑ qw ji = − id b s j j (1) i 에 의하여 결정된다. 의 출력은 다음과 같이 결정된다. 중간층신경세포의 활성화함수로는 시그모이드함수를 리용한다. 즉 중간층신경세포들 신경망에 의한 차동구동방식이동로보트의 역운동학풀이방법 － 91 － ( sf ) = j 2 exp( 1 + − s ) j − 1 , j = ,2,1 L , n (2) ③ 출력층 출력층은 2개의 신경세포로 이루어졌는데 활성화함수로는 선형함수를 리용한다. 즉 출력층신경세포들의 출력은 ϕ k ∑= j ( sfw kj j ) , ,= LRk (3) 에 의하여 결정된다. 그림 3에 역운동학풀이를 위한 학습체계의 구성도를 보여주었다. 목표자세 )(kdq 신경망 이동로보트 실지자세 )(kq d Lϕ d Rϕ )(k )(k 야꼬비안 e _ + 그림 3. 역운동학풀이를 위한 학습체계의 구성도 그림 3에서와 같이 신경망은 로보트의 목표자세 ( d 자료로 하여 그것에 해당한 로보트의 왼쪽, 오른쪽 바퀴의 속도 k )( = q x [ d k k y ), ( ), d k ), ( R ϕ L ϕ θ d k )( T)] 를 입력 k ( 를 출력하며 수행기구를 통하여 로보트의 운동방향과 속도를 조종한다. 이때 목표자세와 실지자세사이 에는 오차가 존재하는데 이 오차가 감소되도록 신경망의 학습을 진행하며 결과 로보트가 목표궤도를 따라 원만히 운동하도록 하는 좌우량쪽 구동바퀴들의 회전각을 얻을수 있다. 신경망의 학습은 특수화학습법을 리용하여 진행한다. 다시말하여 신경망의 입력으로 는 목표자세를 주고 교사신호로서 신경망의 출력오차가 아니라 로보트의 출력오차를 리 용하여 오차평가함수가 최소로 되도록 학습을 진행하며 그 결과 신경망으로 직접 대상의 역모형을 얻는다. 특수화학습법을 리용한 신경망의 학습을 위한 평가함수를 E = 1 2 n ∑ k 1 = e 2 k = 1 2 n ∑ k 1 = ( q dk − q k 2 ) (4) 으로 정의한다. 이때 신경망의 학습규칙유도식은 그림 4와 같다. E ∂ ljw ∂ ∂q ly∂ y ∂ l s ∂ l s ∂ l w ∂ lj ljw ls 신경망 ϕϕ , d R d L 로보트 q + ∂E x∂ dq _ e 그림 4. 특수화학습규칙유도식 － 92 － 종합대학학보 정보과학 주체107(2018)년 제64권 제4호 그림 4에 보여준 학습규칙유도식에 따라 ∂ / 를 구하면 ljwE ∂ T T E ∂ w ∂ lj = E ∂ q ∂ ⎡ ⎢ ⎣ ⎤ ⎥ ⎦ ⎡ ⎢ ⎣ q ∂ y ∂ l ⎤ ⋅⎥ ⎦ y ∂ s ∂ l l ⋅ s ∂ l w ∂ lj = E ∂ q ∂ ⎡ ⎢ ⎣ ⎤ ⎥ ⎦ ⎡ ⎢ ⎣ q ∂ y ∂ l ⎤ ′⎥ f ( l ⎦ ) ys l j = (5) = ⎛ ⎜ ⎜ ⎝ m ∑ i 1 = ⎞ ⎟ ⎟ ⎠ Je i il f ′ ( l ) ys l j 와 같다. 결국 중간층과 출력층사이의 결합무게 ljw 는 규칙 kw ( lj )1 =+ kw )( lj − ηδ l y j = kw )( lj + Je i il f ′ ( l ys ) l j , j ∈ l H ∈ , O (6) 에 따라 수정된다. 여기서 lδ 은 Je i il f ′ ( l s l ) (7) ⎛ ⎜ η ⎜ ⎝ m ∑ i 1 = δ l m ⎛ = ∑ ⎜ ⎜ ⎝ 1 = i ⎞ ⎟ ⎟ ⎠ ⎞ ⎟ ⎟ ⎠ 이다. 입력층과 중간층세포들사이의 결합무게도 앞에서와 류사한 방법으로 w k ( ji 1) + = w k ( ) ji − ηδ j y i = = w k ( ) ji − e w f l lj ( s ′ j j ) y i , i ∈ I , j ∈ H ⎛ η ⎜ ⎜ ⎝ n ∑ l 1 = ⎞ ⎟ ⎟ ⎠ (8) 와 같은 규칙에 따라 수정된다. 렬의 원소로서 다음과 같이 표시된다. 학습규칙 (6)에서 η 는 학습률로서 결합무게의 갱신정도를 나타내고 ilJ 은 야꼬비행 J )( ϕ = f )( ϕ ∂ ϕ ∂ = (9) ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ f ∂ 1 ϕ ∂ 1 f ∂ 2 ϕ ∂ 1 f ∂ 3 ϕ ∂ 1 f ∂ 1 ϕ ∂ 2 f ∂ 2 ϕ ∂ 2 f ∂ 3 ϕ ∂ 2 ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ 여기서 f ∂ 1 ∂ φ 1 f ∂ 1 ∂ φ 2 2 r 2 L 4 ⎡ ⎢ ⎢ ⎣ − 2 r 2 L 4 ⎡ ⎢ ⎢ ⎣ 2 r 2 L 4 = − a ( − φ φ 2 1 ) cos ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) + ⎞ ⎟ ⎠ r L 2 sin ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) − ⎞ ⎟ ⎠ ⎤ ⎥ ⎥ ⎦ ( + φ φ 2 1 )sin ( − φ φ 2 1 ) + cos ( − φ φ 2 1 ) ⎛ θ ⎜ ⎝ + r 2 L ⎞ ⎟ ⎠ ⎛ θ ⎜ ⎝ + r 2 L = − a − ( − φ φ 2 1 ) cos ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) − sin r L 2 ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) + ⎞ ⎟ ⎠ ⎤ ⎥ ⎥ ⎦ ⎞ ⎟ ⎠ r 2 ⎞ ⎟ ⎠ 신경망에 의한 차동구동방식이동로보트의 역운동학풀이방법 － 93 － + 2 r 2 L 4 ( + φ φ 2 1 )sin ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) + cos r 2 ⎛ θ ⎜ ⎝ + r L 2 ( − φ φ 2 1 ) ⎞ ⎟ ⎠ ⎞ ⎟ ⎠ f ∂ 2 ∂ ϕ 1 ⎡ ⎢ ⎢ ⎣ 2 r 2 L 4 + 2 r 2 L 4 = a − ( − ϕϕ 2 1 sin) ( − ϕϕ 2 1 ) ⎛ θ ⎜ ⎝ + r L 2 ⎞ +⎟ ⎠ r L 2 ⎛ cos θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) + ⎞ ⎟ ⎠ ⎤ ⎥ ⎥ ⎦ ( + ϕϕ 2 1 ) ⎛ cos θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) ⎞ +⎟ ⎠ r 2 sin ⎛ θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) f ∂ 2 ∂ ϕ 2 = a 2 r 2 L 4 ⎡ ⎢ ⎢ ⎣ ( − ϕϕ 2 1 sin) ( − ϕϕ 2 1 ) ⎛ θ ⎜ ⎝ + r L 2 ⎞ −⎟ ⎠ r L 2 ⎛ cos θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) − ⎞ ⎟ ⎠ ⎤ ⎥ ⎥ ⎦ − 2 r 2 L 4 ( + ϕϕ 2 1 ) ⎛ cos θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) ⎞ +⎟ ⎠ r 2 sin ⎛ θ ⎜ ⎝ + r L 2 ( − ϕϕ 2 1 ) ⎞ ⎟ ⎠ ⎞ ⎟ ⎠ f ∂ 3 = ∂ ϕ 1 r 2 L f ∂ 3 ∂ ϕ 2 −= r 2 L T ⎛ exp ⎜ ⎝ − + ⎛ ⎜⎜ 1 ⎝ ⎛ exp ⎜ ⎝ − s 2 T s 1 T ⎞ ⎟ ⎠ 2 ⎞ ⎟ ⎠ ⎞ ⎟⎟ ⎠ =q d [ x d , y d , θ d T] x=q ,[ θy , T] ３．모 의 실 험 중간층활성화함수인 시그모이드함수의 도함수는 f ′ ( s ) = j (10) 따라서 학습규칙 (6)과 (8)에 따라 신경망의 학습을 진행하면 목표자세 와 로보트의 실지자세 의 오차가 감소되며 이때 신경망의 출력으로 로보트의 왼쪽과 오른쪽 바퀴의 회전각이 주어지므로 이동로보트가 목표궤도를 따라 원만히 운동하기 위한 좌, 우량쪽 구동바퀴의 목표회전각들을 구할수 있다. 역운동학풀이방법의 효과성을 검증하기 위한 모의실험을 다음과 같이 진행하였다. 신경망의 학습률은 , 중간층활성화함수인 시그모이드함수의 파라메터는 .0=η 001 85.0=T , 신경망의 학습회수는 1 000, 로보트의 초기자세를 ]0,0,0[=P 0 T 라고 하고 이동로보트가 라선형자리길을 따라 운동하는 과정을 MATLAB를 리용하여 모의하였다. 로보트가 목표 경로를 따라 운동한 결과를 그림 5에 보여주었다. 이다. 이다. － 94 － 종합대학학보 정보과학 주체107(2018)년 제64권 제4호 cm/y 100 80 60 40 20 0 20− .0 038  036.0  034.0  032 .0 0.030   028.0  026.0  024.0 022 .0 0 20 40 60 80 100 120 140 160 cm/x 그림 5. 피복경로추종곡선 그림 5에서 굵은 선으로 표시한 선은 목표궤도이고 실선으로 표시한 선은 잔디깎는 로보트가 주어진 피복경로추종운동을 원만히 진행하도록 하는 구동바퀴의 회전각을 로보트의 실지운동궤도이다. 그림 6에 보여주었다. rad/ϕd 0 100 200 300 400  500  회/k 600 ㄱ) 0 100 200 300  400  500  회/k 600 ㄴ) 그림 6. 목표궤도를 따라 운동할 때 구동바퀴들의 회전각 ㄱ) 왼쪽 구동바퀴의 회전각, ㄴ) 오른쪽 구동바퀴의 회전각 모의실험결과는 론문에서 제안한 방법이 바퀴식이동로보트가 주어진 임의의 목표자 리길을 따라 원만히 움직이도록 하는 효과적인 방법이라는것을 보여준다. 신경망을 리용한 차동구동방식이동로보트의 역운동학문제풀이를 위한 한가지 방법을 제안함으로써 바퀴식이동로보트의 항행의 정확성과 효과성을 보다 높였다. rad/ϕd 025.0 0.020 015.0 0.010 005.0 맺 는 말 신경망에 의한 차동구동방식이동로보트의 역운동학풀이방법 － 95 － 참 고 문 헌 [1] M. F. Mohammad et al.; Advanced Robotics, 29, 20, 1303, 2015. [2] A. Onat, M. Ozkan; Advanced Robotics, 29, 14, 913, 2015. 주체107(2018)년 8월 5일 원고접수 A Method of Solution of Inverse Kinematics of Differential Driving Mobile Robot Using Neural Network Ri Kwang Hyok, Sin Yong Chol In this paper, we have proposed a solution method of inverse kinematics of differential driving mobile robot using neural network, and have verified effectiveness of the proposed method using MATLAB. Key words: inverse kinematics, neural network