김일성종합대학학보 (정보과학) 주체107(2018)년 제64권 제1호 부분히스토그람에 기초한 화상대조도강조의 한가지 방법 서효선, 김주혁 화상의 대조도강조는 화상의 질을 개선하고 낮은 조명조건에서도 화상의 세부를 선 명하게 한다. 히스토그람균등화는 그자체의 단순성과 실현에서의 편리성으로 하여 대조도강조에서 광범히 리용되고있다.[1] 그러나 이러한 방법은 화상전체에 대한 대조도강조를 진행하므로 배경과 대상의 대조도가 서로 다른 화상에서 필요한 대상의 대조도가 선명하지 않은 문 제가 제기된다. 선행연구들에서는 히스토그람에 의한 화상의 대조도강조에 히스토그람균등화방법[2], 화상의 평균밝기를 보존하기 위한 쌍히스토그람균등화방법[3], 평균밝기최량화를 보존하 기 위한 최소평균밝기오차히스토그람균등화방법[4], 재귀적인 평균분리히스토그람균등화 방법[3]들을 제기하였다. 이 방법들에서는 미리 정한 턱값보다 더 높은 히스토그람을 잘 라내여 히스토그람의 최대값을 조절하는 방법으로 대조도를 조절하였다. 론문에서는 로출턱값을 리용하여 화상의 부분히스토그람에서 배경과 대상을 분리하 고 대조도를 각이하게 강조하여 전체 화상을 선명하게 하는 방법을 제안하였다. １．로출턱값에 기초한 부분히스토그람균등화 대조도가 선명하지 않은 화상들은 완전한 동적범위를 가지지 못하며 히스토그람빈 (Histogram Bin)이 어두운 농담준위를 가진 화상들은 어둡고 히스토그람빈이 밝은 농담준 위를 가진 화상들은 밝게 나타난다. 섬광화상들은 빛세기의 로출에 의하여 로출이 적은것과 많은 부분으로 나누어볼수 있다. 일반적으로 로출턱값은 화상의 밝기값으로 측정하며 이 값은 로출이 적은 부분과 많은 부분으로 가르는데 리용된다. 로출값의 표준범위는 0～1이며 화상의 로출값이 0.5보다 크면 화상의 많은 구역이 로 출된 구역을 가진다는것을 의미하고 0.5보다 작으면 화상이 적게 로출된 구역을 포함하고 있다는것을 의미한다. 이러한 두 경우의 화상은 대조도가 선명하지 않으므로 그것을 강조 해야 할 필요가 있다. 화상의 밝기로출량은 다음과 같이 표시된다. expoure = (1) 1 L L ∑ k 1 = L ∑ k 1 = )( kkh )( kh 여기서 )(kh 는 화상의 히스토그람이고 L은 농담준위의 총개수이다. 부분히스토그람에 기초한 화상대조도강조의 한가지 방법 － 69 － 로출에 관계되는 다른 하나의 파라메터로서 aX 는 화상을 로출이 적은 부분과 많은 부분으로 나누는 농담준위경계값을 표시한다. X a = L 1( − expoure ) (2) 이 파라메터는 0과 L사이의 동적범위를 가지며 화상에서 각각 0.5보다 크거나 작은 로출값에 대하여 L/2보다 크거나 작은 값을 가진다. 그러므로 이러한 로출턱값을 리용하 여 히스토그람의 자르기를 진행하면 원화상에서 지나치게 로출되는 현상을 없앨수 있다. 즉 자르기턱값보다 더 큰값을 가지는 히스토그람부분을 턱값으로 제한시킨다.  자르기턱값은 식 (3)과 (4)에 의하여 화상의 농담준위평균값으로 계산한다. T c = 1 L L ∑ k = 1 )( kh (3) 여기서 )(kh 와 T c )(khc 는 각각 원래의 히스토그람과 잘라낸 히스토그람을 표시한다. 히스 (4) , khT )( )( kh c ≥ = c 토그람자르기방법은 계산상 효과적이며 시간소비가 적다. ２．히스토그람부분분할과 균등화 히스토그람은 식 (2)에서 계산된 농담준위경계값 X a aX 에 의하여 먼저 2등분된다. 그러 1～1 aX～0 면 히스토그람부분분할과정에 농담준위 LI 과 을 가지는 부분화상 L + UI 가 생겨난다. 이 부분들을 로출이 적은 부분화상과 로출이 많은 부분화상이라고 한다.  히스토그람부분분할과 로출턱값에 의한 히스토그람자르기과정을 그림 1에 보여주 − , 었다. 화소의 개수 cT LI 낮은 로출 UI 높은 로출 0 aX 1−L 세기 그림 1. 히스토그람부분분할과 로출턱값에 의한 히스토그람자르기과정 )(kPL 와 도함수들이다. )(kPU 는 다음의 식 (5)와 (6)에서 정의한것처럼 부분화상들에 해당한 확률밀 )( kP L = /)( Nkh c L 0, ≤≤ Xk (5) a U 부분화상들에 해당한 루적밀도함수를 )( kP U = /)( Nkh c , X a )(kCL k −≤≤+ L 1 1 (6) , )(kCU 라고 하면 히스토그람전달함수 － 70 － 종합대학학보(정보과학)   주체107(2018)년  제64권  제1호 는 식 (9)와 (10)에 의하여 다음과 같이 정의된다. aX i = 0 L ∑ )( kC = iP )( L (7) kC )( U = L − 1 ∑ Xi = a iP )( U 1 + (8) F L = X × C L a (9) F U = ( X a )1 ×+ ( XL − + )1 C U a (10) LF 과 UF 는 부분히스토그람균등화에 리용되는 전달함수들이다. 출력화상은 두 전달 함수의 결합에 의하여 선명한 화질을 얻는다. ３．실험결과와 분석 선행한 방법들과의 비교분석을 진행하기 위하여 3개의 화상을 리용하여 시각적인 질 비교를 진행하였다.(그림 2) 화상 1 화상 2 화상 3 그림 2. 실험에 리용한 화상 부분히스토그람에 의한 대조도강조를 진행한 다음 정보의 보존성을 검증하기 위하여 실험화상에 대한 엔트로피를 계산하면 다음과 같다.(표 1) 표 １．각이한 방법들의 엔트로피비교 실험화상 원화상 히스토그람 균등화 2중히스토 그람균등화 화상 1 화상 2 화상 3 4.89 5.49 6.01 평균엔트로피 5.463 4.70 4.97 4.85 4.84 4.83 5.42 5.62 5.29 재귀평균 분할히스 토그람 재귀부분 화상히스 토그람 4.81 5.45 5.85 5.37 4.86 5.46 5.68 5.333 제안한 방법 4.89 5.47 5.88 5.413 표 1에서 보여준것처럼 실험화상들에 대한 평균엔트로피는 론문에서 제기한 방법이 원화상의 엔트로피와 제일 류사하다는것을 알수 있다. 이것은 론문에서 제안한 방법이 대 조도를 강조하면서도 화상의 정보를 최대로 반영한다는것을 보여준다. 론문에서는 제안한 방법의 유효성을 검증하기 위하여 통계적파라메터에 의한 객관적 인 화상강조의 질평가를 진행하였다. 화상의 대조도강조를 평가하는 객관적인 평가량으로 서 평균구조류사도를 리용한다. 부분히스토그람에 기초한 화상대조도강조의 한가지 방법 － 71 － SSI ( , YX ) = + μμ YX 2 ( μμ + Y 2( 2 X C 1 () 여기서 화상 X 와 Y 의 공분산행렬의 2차뿌리값, C + 1 Yμ 는 화상 X 와 Y 의 평균이고 Xσ , 1C 과 Xμ , 평균구조류사도의 평균값은 다음과 같다. 2 ) (11) 2)( σ 2 X C + XY 2 σσ + Y Yσ 는 화상 X 와 Y 의 분산, C + ) 2 XYσ 는 2C 는 상수이다. MSSI ( ′ , YX =′ ) SSI ( x i , y i ) (12) 1 M M ∑ i = 1 여기서 X ′ 와 Y ′ 는 재구성된 화상, ix 와 iy 는 i 번째 국부창문의 화상자료이며 M 은 국 부창문의 개수이다. 봉우리신호대잡음비(PSNR)는 원천화상 NM × 화소들을 포함하며 j ) iY ,( 는 ) j ,( ) iX j iX ,( j ) iY ,( 와 ) 사이의 관계를 나타낸다. 를 부호화하고 복호화한 화상이다. j 는 iX ,( 복호화한 화상의 평균두제곱오차(MSE)는 다음과 같다. M N ∑∑ i = 1 =1 j MSE = [ iX ,( iYj ) ,( − 2)] j NM × max( ,( iY MSE ⎛ ⎜ ⎝ j )) ⎞ ⎟ ⎠ (13) PSNR = lg10 (14) 각이한 방법들의 MSE비교를 표 2에 보여주었다. 표 ２．각이한 방법들의 MSE비교 실험 화상 화상 1 화상 2 화상 3 히스토그람 균등화 2중히스토 그람균등화 재귀평균분할 히스토그람 재귀부분화상 히스토그람 제안한 방법 0.09 0.1 0.08 0.07 0.09 0.09 0.07 0.08 0.08 0.08 0.09 0.07 0.06 0.07 0.07 표 2에서 보여준것처럼 제안한 방법의 평균두제곱오차가 작다. 이와 같이 객관적인 질지표평가에서 제안한 방법이 효과적이라는것을 알수 있다. 로출턱값에 의한 화상의 부분분할에 대한 새로운 방법을 제기하고 로출된 화상의 대 조도강조를 위한 매우 효과적인 방법을 제안하였다. 우에서 제기한 비교분석결과로부터 론문에서 제안한 방법이 대조도강조에서 유효하 다는것을 알수 있다. 맺 는 말 참 고 문 헌 [1] 김순돌; 화상정보처리, 종합대학출판사, 44～49, 주체101(2012). [2] Chen, S.D.; Digital Signal Process, 22, 4, 640, 2012. － 72 － 종합대학학보(정보과학)   주체107(2018)년  제64권  제1호 [3] J.H. Han et al.; IEEE Trans. Image Process, 20, 2, 506, 2011. [4] C. Lee, Y.Y.Lee; IEEE Trans. Image Process, 21, 1, 80, 2012. A Method of Image Enhancement based on Sub－Histogram 주체106(2017)년 11월 5일 원고접수 So Hyo Son, Kim Ju Hyok Image enhancement improves display, emphasizes detail of an image with a low light, and the histogram equalization is widely being used in the contrast enhancement technology for its simplicity and convenience in practice. In this paper, we suggest a method to separately emphasis the contrast in background and object of the sub－histogram of an image by using the exposure threshold. Key words: sub－histogram, image enhancement, exposure threshold