김일성종합대학학보 정보과학 주체109(2020)년 제66권  제4호 지상수자텔레비죤방송표준 DVB-T2에 따르는 OFDM변조모듈의 FPGA실현 현재 DVB-T2표준에서는 OFDM변조방식을 리용하여 최대 50.3Mbps의 고속통신을 실 현하고있다. 론문에서는 DVB-T2변조기에서 자원소비와 성능부하가 큰 OFDM모듈의 효과적실현 알고리듬과 FPGA실현에 대하여 론의하였다. 민정기, 조연희 １．OFDM모듈의 구조도 DVB-T2표준ETSI EN 302 755의 OFDM변조모듈의 블로크도식은 그림 1과 같다. 그림 1의 블로크도식에서 가장 연산부하가 크고 자원소비가 많은 부분은 거꿀푸리에변환(IFFT)과 보호간 격삽입부분이다. 자료입력 Pilot삽입 우리는 이 두 부분을 하나로 일체화하여 자원소 비를 최적화하기 위한 한가지 간단하면서도 효과적 인 알고리듬을 제기하고 FPGA로 실현하여 성능과 자원을 평가하였다. 자료쎌에로의 반송파할당 ２．알고리듬구성 일반적으로 IFFT연산에서 비트반전처리는 많은 RAM자원을 소비하게 되고 이것은 변조기의 총 자원 에 영향을 주게 된다. IFFT변환 보호간격삽입 P1부호삽입 DVB-T2변조기의 OFDM출구에서는 규약상 (64/7)MHz 의 동작주파수에서 IFFT첨수에 관하여 크기순서로 정돈 되고 보호간격이 삽입된 IFFT렬이 출력되여야 한다. 지난 시기 IFFT처리에서 출력비트반전처리를 진 행하지 않고 보호간격삽입구간에서 진행하는 경우 2개의 블로크RAM을 리용하여 읽기와 쓰기를 번갈아 진행하거나 동작주파수를 2배이상으로 높여 하나의 RAM을 리용하여 순차적으로 진행하 였다. 그러나 이 경우에도 출구의 (64/7)MHz에 대한 요구로부터 반드시 RAM을 리용한 출력속도변환을 진행하여야 하였다. 그림 1. DVB-T2표준ETSI EN 302 755의 OFDM변조모듈의 블로크도식 DAC 에로의 자료출력 우리는 동작주파수를 높이지 않으면서도 1개의 블로크RAM에 의하여 처리를 진행하 기 위하여 다음과 같이 알고리듬을 구성하였다. )(nBR 은 옹근수비트반전연산 즉 옹근수 n 의 2진수렬을 제일 아래자리비트부터 제일 웃자리비트방향으로 비트순서를 반대로 놓은 수, l 은 1개 T2흐레임내에서 OFDM부호의 번 totalK 은 총 반송파개수(13 921), Δ 는 보호간격길이를 규정하는 상수 호, m 은 T2흐레임번호, － 36 － 종합대학학보 정보과학 주체109(2020)년 제66권 제4호 (1/128, 1/32, 1/16, 19/256, 1/8, 19/128, 1/4가능), 부호의 k 번째 반송파에 대한 복소변조값, ,, 는 m 번째 T2흐레임에서 l 번째 OFDM klmc ,, 는 m 번째 T2흐레임에서 l 번째 OFDM부 ilmx 호의 i 번째 IFFT출력, IFFTN 는 IFFT차수라고 하자. 단계 １ Pilot와 자료렬에 반송파주파수의 할당 선행연구[1]에서 규정하고있는 Pilot위치들에 Pilot값들을 배치하고 나머지반송파들에 앞단에서 들어오는 복소자료값들을 순차적으로 배치한다. 1개의 자료OFDM부호구간에는 먼저 령으로 채워진 보호구간이 놓이고 계속하여 IFFT입력값들이 련이어 놓인다. 단계 ２ 비트반전처리를 진행하지 않은 IFFT를 진행한다.  1개 OFDM표본에 대하여 IFFT의 출구의 k번째 복소수는 다음과 같다. x )( kBRlm ,, ∑= c ,, ilm e j 2 π N IFFT )( ikBR i 단계 ３ RAM의 읽기 및 쓰기주소조종 ① 자료출력구간에서  ㄱ) OFDM부호번호 l이 짝수인 경우 매 ,0∈ k IFFTN 에 대하여 RAM에로의 입력자료는 lmx , , kBR )( , 읽기 및 쓰기주소는 k, RAM으로부터의 출력자료는 이전 OFDM부호의 k′ 번째 IFFT출력값으로서 만족시키는 ( kBR =′) k 를 가 0, 1, 2, …순서로 출력되므로 OFDM출력신호조건을 만족시킨다. lmx , , ( kBR ′ 이다. kBR ( ) =′) k 따라서 ㄴ) OFDM부호번호 l이 홀수인 경우 매 ,0∈ k IFFTN 에 대하여 RAM에로의 입력자료는 x lm , , ,)( kBR =k (cid:34),2,1,0 , 읽기 및 쓰기주소는 으로서 kBR )(kBR ′=)( k , RAM으로부터의 출력자료는 이전 OFDM부호의 를 만족시키는 이다. lmx , , kBR ( )' 'k 번째 IFFT출력값 k =′) ( kBR 이고 OFDM출력신호조건을 만족시킨다. 그러므로 ② 보호간격구간에서 ㄱ) OFDM부호번호 l이 짝수인 경우 m번째 읽기주소는 IFFT ㄴ) OFDM부호번호 l이 홀수인 경우 m번째 읽기주소는 IFFT IFFT 및 보호구간삽입알고리듬의 블로크도는 그림 2와 같다. IFFTN IFFTN NBR ( +Δ⋅ +Δ⋅ −Δ⋅ −Δ⋅ IFFT IFFT ,0 ,0 m m m m ∈ ∈ N N N − − , 1 ) , 이다. 1 이다. 자료 자료 I F F T 유효 표준화인자 유효 Counter 자료 RAM 자료 BR BR 쓰기 주소 읽기 주소 쓰기유효 쓰기구간 결정 Counter 그림 2. IFFT 및 보호구간삽입알고리듬의 블로크도 ㄱ) ㄴ) ㄷ) 1 ㄹ) 지상수자텔레비죤방송표준 DVB-T2에 따르는 OFDM변조모듈의 FPGA실현 － 37 － ３．모 의 실 험 OFDM파라메터설정을 64QAM, 16K FFT, 보호간격 OFDM출력자료형성을 위한 Dual Port RAM의 쓰기구간, 읽기주소, 쓰기주소, 출력복소 로 놓고 모의를 진행하였다. 16/1=Δ 신호의 시간선도를 그림 3에 보여주었다. 0.8 0.4 0 15 000 10 000 5 000 0 15 000 10 000 5 000 0 2 0 -2 0.8 0.85 0.9 0.95 1.05 1.1 1.15 1.2 그림 3. RAM쓰기구간(ㄱ)), 읽기주소(ㄴ)), 쓰기주소(ㄷ)), 출력복소신호(ㄹ))의 시간선도 그림 3에서 보는바와 같이 비트반전처리를 하면서도 RAM에로의 쓰기와 읽기는 동 시에 진행된다. 따라서 자료는 련속적으로 출력되며 DVB-T2규약 ETSI EN 302 755에 규정된 출력박 자인 (64/7)MHz보다 동작주파수를 높이지 않고도 알고리듬은 1개의 블로크RAM에 의하 여 정확히 수행된다. OFDM변조모듈의 표준화된 출력스펙트르밀도는 그림 4와 같다. 610× 0 -20 -40 -60 -80 m B d / 력 출 -100 -120 -426 -284 -142 0 표준화된 주파수/mHz 142 284 426 그림 4. OFDM변조모듈의 표준화된 출력스펙트르밀도(16K, 64QAM) － 38 － 종합대학학보 정보과학 주체109(2020)년 제66권 제4호 그림 4에서 보는바와 같이 대역밖감소특성은 60dB이상으로서 DVB-T2변조기의 대역 밖감소특성과 관련한 성능지표인 50dB을 훨씬 넘었다. Vivado2014.4에 표준탑재되여있는 FFT LogiCORE v9.0과의 자원비교를 진행하였다.(표) 표．표준FFT LogiCORE v9.0과의 자원비교 구 분 BlockRAM(36K) DSP48 FFT LogiCORE 9.0[2] 제안알고리듬 74 36 24 24 IP CORE에서는 보호간격삽입을 포함한 FFT를 진행할수 있게 설정가능하다. 모든 입 력자료들의 비트폭은 두 경우에 대하여 일치시켰다. 두 경우 모두 FFT는 속도최량으로 서 4개의 복소곱하기와 2개의 더하기에 기초하여 진행하였다. 표에서 보는바와 같이 블로크RAM자원이 절반이하로 줄어들었다. 이것은 자원소비가 많은 DVB-T2변조기의 원가저하와 동작주파수효률제고에서 중요한 의의를 가지며 OFDM 통신들에 대한 응용의 측면에서도 가치가 있다. DVB-T2변조기의 OFDM변조모듈에서 연산 및 자원부하가 많은 IFFT 및 보호구간삽 입알고리듬의 개선방법을 제안하고 성능분석과 Vivado2014.4의 표준FFT LogiCORE와 자 원비교를 진행한 결과 출력스펙트르특성이 규약의 요구를 만족시키며 36K블로크RAM자 원이 절반이하로 줄어들었다. 맺 는 말 참 고 문 헌 [1] ETSI EN 302 755; Digital Video Broadcasting(DVB); Frame Structure Channel Coding and Modulation for a Second Generation Digital Terrestrial Television Broadcasting System (DVB-T2),  105～128, 2012. [2] XILINX; LogiCORE IP Product Guide, Fast Fourier Transform v9.0, 68～90, 2015. 주체109(2020)년 8월 5일 원고접수 FPGA Implementation of OFDM Module for Terrestrial TV Broadcasting Standard DVB-T2 Min Jong Gi, Jo Yon Hui In the paper, we studied an efficient FPGA implementation method for OFDM module in DVB-T2 modulator and showed RAM resources reduced less than half of BRAM resources of  XILINX FFT LogiCORE v9.0. Keywords: DVB-T2, OFDM, FFT