김일성종합대학학보 정보과학 주체109(2020)년 제66권  제2호 자률이동로보트의 항행을 위한 국부지도구축 계광혁, 최명성 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《과학연구부문에서는 나라의 경제발전과 인민생활향상에서 전망적으로 풀어야 할 문제들과 현실에서 제기되는 과학기술적문제들을 풀고 첨단을 돌파하여 지식경제건설 의 지름길을 열어놓아야 합니다.》 자률이동로보트에 대한 연구는 기계공학, 전자공학, 무선공학, 콤퓨터공학과 함께 높 은 수준의 인공지능기술을 요구하고있다. 세계 여러 나라들에서는 자률형이동로보트의 첨단이라고 할수 있는 여러가지 류형의 안내로보트들을 적극적으로 개발하여 상업봉사와 관광안내, 교육용로보트로 널리 리용하고있다. 선행연구[3, 4]에서는 화상정보만을 리용하여 주위환경에 대한 지도를 구축하든가 혹 은 레이자범위수감자료를 리용하여 거리지도를 구축하는 문제를 취급하였다. 선행한 방법들은 3차원적인 정보를 획득하기가 어려운것으로 하여 로보트의 자률항 행에서 반드시 요구되는 국부지도를 형성하기 어렵다. 론문에서는 자률이동로보트의 항행체계를 구축하는데서 반드시 요구되는 국부지도를 화상정보와 거리정보를 융합시켜 구축하는 방법을 제안하고 모의실험을 통하여 효과성을 확증하였다. １．화상정보와 거리정보의 융합 로보트동작환경에서 대상물까지의 거리에 대한 정보는 레이자범위수감부를 리용하여 획득하고 광학정보는 촬영기를 리용하여 얻는데 이때 수감자료획득의 불일치성으로 하여 화상정보와 거리정보는 서로 다른 자료로 된다.[1, 2] 이로부터 수감부의 교정문제는 2개의 수감정보를 융합시켜 서로 다른 수감자료를 같 은 자리표계에 표시하는 문제이다. 즉 수감부교정은 레이자범위수감정보를 자리표변환을 통해 화상평면에 투영하는 문제이다. 그림 1에 레이자범위수감자료를 화상자리표계에 투영하는 과정을 보여주었다. 그림 1. 레이자범위수감자료의 화상자리표계에 대한 투영 － 90 － 종합대학학보 정보과학 주체109(2020)년 제66권 제2호 여기서 이며 x ( ( x , d , c y y c , , d z d z 는 실자리표계에서 촬영기의 자리표이고 ) 는 목표점의 자리표를 나타낸다. c ) ( x l , y l , z l ) 은 레이자자리표 이때 실자리표계에서 목표점의 위치를 화상자리표계에서 표시하기 위한 식은 다음과 같다. k u 0 u ⎡ ⎢ v ⎢ ⎢ 1 ⎣ ⎤ ⎥ ⎥ ⎥ ⎦ = ⋅ 0 k v f z c 00 ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ u 0 f v 0 f 1 f ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ ⋅ x c y c z c ⎡ ⎢ ⎢ ⎢ ⎣ ⎤ ⎥ ⎥ ⎥ ⎦ = 1 z c ⋅ ⎡ ⎢ ⎢ ⎢ ⎣ 0 0 f u 0 u 0 ⎤ ⎥ ⎥ ⎥ ⎦ ⋅ x c y c z c ⎡ ⎢ ⎢ ⎢ ⎣ ⎤ ⎥ ⎥ ⎥ ⎦ vf v 0 10 (1) vu, 는 화상평면에서 목표점의 자리표이고 여기서 로서 화상에서 수직 및 수평방향으로의 화소점들의 거리비로 정의된다. 그리고 화상평면의 중심점의 자리표를 나타낸다. k , 는 화소축에 대한 척도화곁수 u 은 0, v 0 u k v 식 (1)에서 보는바와 같이 촬영기의 외부 및 내부파라메터에 대한 측정과정이 바로 촬영기의 교정이다. 즉 먼저 내부파라메터를 추정하고 다음에 이 내부파라메터를 이미 알려진 파라메터에 대입하여 외부파라메터를 구한다. 촬영기의 교정에 리용되는 교정평면으로는 살창크기가 50mm인 검은색4각형무늬가 배렬된 평판으로서 각이한 각도로 세워놓은 표본화상을 그림 2에서 보여주었다. 그림 2. 교정평면의 표본화상 레이자범위수감부의 거리수감자료와 촬영기의 화상자료를 혼합시켜 촬영기의 외부 및 내부파라메터를 추정하기 위한 식은 다음과 같다.[3] ⎧ )( iu ⎪ ⎪ ⎨ ⎪ )( iv ⎪ ⎩ = = wf u t 3 wf v t 3 11 )( ix l + 12 )( iy l + 21 )( ix l + 22 )( iy l + wf u t 3 wf v t 3 tf 1 u tu 30 tf v 2 tv 30 + t 3 + t 3 , i (cid:34)= ,1 , n (2) iu ),( iv )( 는 i 번째 표본화상에 대한 레이자범위수감부의 화소자리표, 여기서 )(iyl 는 i 번째 표본화상에 대한 레이자범위수감부의 극자리표계형식의 거리와 방위각을 실자 리표계로 넘긴 자리표이다. ),( 서 추정해야 할 파라메터는 촬영기의 내부파라메터 12w , 22w , 1t , 음과 같이 정의한다. 가 옹근수가 아니라면 4근방보간법을 적용하여 옹근수로 바꾼다. 여기 11w , vf uf 3t 으로서 11개이고 이 파라메터들을 추정하기 위한 평가식은 다 0v 와 외부파라메터 21w , 만일 ),(ixl 0u , iv )( iu 2t , , , 자률이동로보트의 항행을 위한 국부지도구축 － 91 － min * )( iu [( − iu ))( 2 + * )( iv ( − ( iv 2 ))] (3) n ⎧ ⎪ ∑ ⎨ ⎪⎩ 1 = i ⎫ ⎪ ⎬ ⎪⎭ 우의 평가식에서 ∗ iu ),( ∗ iv )( 는 i 번째 표본화상에서 레이자범위수감부의 레이자빛이 화상평면에서 보이는 실지의 화소점의 위치를 나타낸다. 우의 비선형함수최량화문제를 풀기 위해서는 적어도 표본화상이 11개이상이여야 하 며 이것은 MATLAB최량화도구띠의 optimset함수를 리용하여 추정한다. ２．국부지도구축방법 레이자범위수감부와 촬영기에 대한 교정이 진행된 다음에는 실내환경에서의 구석이 나 문과 같이 주위환경에 대한 기하학적특징에 기초하여 국부지도(거리지도)를 구축해야 한다.[4] 그림 3에서는 시각체계만을 리용하는 경우 얻어진 변두리속에는 거리정보가 포함되 여있지 않는것으로 하여 정확한 복도식별이 어렵다는것을 보여주고있다. ㄱ)              ㄴ) 그림 3. 원화상과 추출된 변두리화상 ㄱ) 원화상, ㄴ) 추출된 변두리화상 즉 색화상을 흑백화상으로 변환한 다음 어떤 턱값보다 큰 화소점에 대한 변두리정보 를 얻고 변두리화상으로부터 150pixel이상 되는 수직변두리를 추출하여 그것을 구석과 문 틀에 대응시킨다. 그러나 거리정보가 포함되여있지 않기때문에 복도를 정확히 추적할수 없게 된다. 문이나 구석을 나타내는 수직변두리를 얻은 다음에는 레이자범위수감부로부터 획득된 거리정보를 리용하여 수평방향의 거리지도를 다음의 선형모형을 리용하여 구할수 있다. − γαϕρ cos( =− ) 0 (4) 여기서 ρ, ϕ는 레이자범위수감부로부터 측정된 거리와 방위각을 나타내고 α는 수직선 의 각도를, γ 는 길이를 나타낸다. 그림 4에 그림 3의 환경에 대하여 론문에서 제안한 화상처리를 통해 얻어진 수직변 두리와 레이자범위수감부로부터 얻어진 거리 및 방위각을 결합하여 주위환경에 대한 거 리지도를 구축하는 과정을 보여주었다. － 92 － 종합대학학보 정보과학 주체109(2020)년 제66권 제2호 그림 4에서 보면 알수 있듯이 수직변두리와 거리정보가 겹치는 화소점들에 대하여서 만 식 (4)가 만족되며 이 화소점들을 맺은 선분들의 모임이 거리지도를 형성하게 된다. 그림 4. 수직변두리와 거리 및 방위각에 따르는 거리지도구축 ３．모의실험 및 결과분석 제안된 촬영기의 분해능은 12 × 교정판이며 살 이고 교정패턴은 창의 크기는 이다. 교정판에 대하여 10개의 레이자수감부자료에 따르는 10 개의 화상이 준비되였다. 레이자점은 전체 레이자측정값들가운데서 수동적으로 선택된다. 그림 5에 교정평면의 자세수에 따르는 오차곡선을 보여주었는데 그림에서 보는것처 mm76 mm76 pixel pixel 640 480 10 × × 럼 자세수가 늘어날수록 오차가 감소한다. 다음 10개의 교정자세에 대하여 100번의 실험을 진행한 다음 평균오차를 계산하였다. 이때 교정평면의 방위각은 10～80゜로 변하는데 그 결과는 그림 6과 같다. 그림 5. 교정평면의 자세수에 따르는 오차곡선 그림 6. 교정평면의 방위에 따르는 오차곡선 그림 6에서 보면 방위각이 증가할 때 화상평면에 대하여 큰 각도를 가지는 교정평면 이 보다 정확한 추정량을 나타낸다는것을 알수 있다. 가장 좋은 성능을 나타내는 각도는 자률이동로보트의 항행을 위한 국부지도구축 － 93 － 70゜근방이다. 실천에서는 각도가 증가할 때 레이자비침점수는 감소하고 원근법에 의하여 구석검출의 정확성은 떨어지게 된다. 그림 7에 촬영기와 레이자범위수감부로부터 주어진 정보에 기초하여 자률이동로보트 가 사람따름조종을 진행하면서 복도에 대한 국부지도를 구축한 다음 이 지도를 리용하여 정적장애물을 회피하면서 다시 초기점에로 복귀하는 과정을 보여주었다. 그림 7. 국부지도구축 및 원점에로의 복귀 ㄱ) 사람따름조종에 의한 국부지도구축, ㄴ) 국부지도를 리용한 원점에로의 복귀 그림 7에서 경로상에 나타나는 타원의 크기는 위치불확정성을 나타내는 량으로서 타 원이 클수록 그 점에서의 위치추정정확성이 낮고 작을수록 높다. 결과 초기에 자률이동 로보트가 사람을 추적하면서 복도를 따라 직선으로 움직일 때에는 위치추정정확도가 높 지만 90゜선회하여 복도의 다른쪽으로 움직일 때에는 위치정확도가 떨어진다는것을 알수 있다. 또한 그림 7에서는 전자지도상에 포함된 구석과 반평면에 대하여 σ2± 의 위치불확 정성구역이 존재한다는것을 보여주고있다. 그림 7의 ㄱ)에서 보면 이동로보트는 미리 미 지환경구역을 주행하게 되는데 이때 불확정성은 수감부의 불확정성정도에 따라 커지게 된다. 로보트가 이미 주행하였던 구역을 되돌아올 때에는 이미 관측된 특징점들을 리용 하는것으로 하여 불확정성이 낮아진다. 우의 궤도를 따라 움직이는 경우 최대정면오차는 27cm, 최대측면오차는 12cm, 최대방위오차는 2゜이다. 촬영기로부터 획득된 2차원화상정보와 레이자범위수감기에서 측정된 2차원거리정보 를 리용하여 교정을 진행한 다음 주위환경에 대한 국부지도를 구축하는 방법으로 자률이 동로보트의 항행체계를 설계하였다. 맺 는 말 참 고 문 헌 [1] 신영철 등; 무인화를 위한 지능로보트공학, 종합대학출판사, 25～302, 주체 105(2016)． － 94 － 종합대학학보 정보과학 주체109(2020)년 제66권 제2호 [2] Miroslav Kulich; The Gerstner Laboratory for Intelligent Decision Making and Control Faculty of Electrical Engineering, 166, 45, 2011. [3] Yuki Tarutoko; International Joint Conferenc, 10, 18, 2006. [4] Ollong Zhang; Machine Vision and Application, 21, 431, 2013. Local Map Building for Autonomous Mobile Robot Navigation 주체109(2020)년 2월 5일 원고접수 Kye Kwang Hyok, Choe Myong Song We describe the theoretical and experimental results for the extrinsic calibration of sensor platform consisting of a camera and a 2D laser range finder. The calibration is based on observing a planar checkerboard pattern and solving for constraints between the views of a planar checkerboard calibration pattern from a camera and laser range finder. Keywords: autonomous mobile robot, navigation system, calibration, local map