김일성종합대학학보 정보과학 주체109(2020)년 제66권  제3호 ３자유도델타형병렬로보트의 동력학적모형에 대한 파라메터동정 김유범, 공영수 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《공장에서 제품의 가지수와 생산량을 늘이고 질을 높이기 위한 중요한 방도는 생산 공정의 자동화, 무인화, 다기능화를 실현하고 통합생산체계를 확립하여 공장을 수자화된 공장으로 만드는데 있습니다.》 전통적인 직렬로보트에 비하여 병렬로보트는 세기 대 중량비가 높고 동작속도가 빠 르며 환경적응능력이 강하고 투자 대 성능비가 높은것 등의 많은 우점들을 가지고있는것 으로 하여 세계적으로 광범히 연구도입되고있다. 특히 전자공업과 경공업, 식료공업, 의약품공업 등 여러 부문에서는 제품의 조립, 포 장, 입상, 선별 등과 같이 다량의 고속 및 반복조작이 필요하며 이러한 생산공정들의 자 동화, 지능화, 무인화를 실현하는데서 델타형병렬로보트의 고속 및 고정밀조종체계의 개 발은 필수적인 수단으로 되고있다. 이러한 조종체계를 설계하기 위한 선결조건은 대상의 동력학적모형을 정확히 동정하는것이다. 선행연구[1, 3, 4]에서는 델타형병렬로보트의 운동학적모형과 동력학적모형을 얻어내 고 그것의 파라메터들은 측정의 방법으로 근사적으로 결정하였으며 대상의 모형파라메터 를 정확히 추정하기 위한 구체적인 동정방법에 대하여 고찰하지 못하였다. 이로부터 론문에서는 델타형병렬로보트의 입출력측정자료에 축차최소2제곱법[2]을 적용하여 로보트의 동력학적모형파라메터들을 동정하기 위한 한가지 수법을 제안하고 MSC-ADAMS/MATLAB협동모의모형에 의한 동정결과에 대한 해석을 통하여 그 효과성을 검증하였다. １．델타형병렬로보트의 동력학적모형과 그 파라메터에 대한 동정 １）델타형병렬로보트의 동력학적모형 델타형병렬로보트는 3개의 닫긴운동학적 련쇄들과 고정판, 가동판으로 구성된 3자유도 로보트이다. 그림 1에 대상으로 하는 3자유도델타형병 렬로보트의 기구학적구성과 자리표계설정, 기 하학적파라메터들에 대하여 보여주었다. 델타로보트의 해석적인 동력학적모형은 다음과 같은 라그랑쥬－오일러방정식을 리용 하여 얻어낼수 있다. Y aL Σ iY Z iZ iX  ,X   iα   iC bL mpY mpΣ mpZ iB mpX 그림 1. 3자유도델타형병렬로보트의 기구학적 구성과 자리표계설정, 기하학적파라메터 － 32 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 d dt ⎛ ⎜ ⎜ ⎝ dL (cid:5) qd j ⎞ ⎟ ⎟ ⎠ − dL dq j = Q j + k ∑ λ i df i dq j , j = ,1 (cid:34) , n (1) 1 i = j 는 일반화자리표의 첨수, n 은 일반화자리 여기서 i 는 속박의 첨수, k 는 속박의 개수, if 는 운 표의 개수, L 은 라그랑쥬함수, jQˆ 은 = ˆ j QQ j 가동판에 작용하는 일반화외부힘, 로 정의된 일반화힘(외부작용힘)이다. 그리고 iτ 는 구동관절 i 에 작용하는 틀음모멘트이다. iλ 는 라그랑쥬승수, j 번째 일반화자리표, 동학적속박방정식, jQ 는 jq 는 τ+ i 델타로보트의 매 토막들과 가동판의 운동에네르기와 포텐샬에네르기, 속박방정식들 을 고려하여 대입하고 정리하면 동력학적모형은 다음과 같이 얻어진다. τ 1 = + I m ⎛ ⎜ ⎝ 2 [( λ 1 x 1 3 cos( − ⎞ (cid:5)(cid:5) α ⎟ 1 ⎠ φ 1 ) + 1 ⎛ ⎜ 2 ⎝ rR −+ 2 LmLm + ab 2 aa gLmm b + a a cos( α 1 ) − φ 1 ) + y sin( ) sin( α 1 − z cos( α 1 )] τ 2 = I m ⎛ ⎜ ⎝ 2 λ 2 + 1 3 x cos( [( − 2 LmLm + ab 2 aa φ 2 ) + y ⎞ (cid:5)(cid:5) α ⎟ 2 ⎠ sin( φ 2 ) + 1 ⎛ ⎜ 2 ⎝ rR −+ gLmm b + a a cos( α 2 ) − (2) ) sin( ) − z cos( α 2 )] ⎞ ⎟ ⎠ ) ⎞ ⎟ ⎠ α 2 I m = + τ 3 2 aa 2 LmLm + ab 1 3 x cos( 1 ⎛ ⎛ ⎜ ⎜ 2 ⎝ ⎝ 2 rR −+ λ 3 여기서 mI 은 델타로보트의 전동기의 관성모멘트, 질량, aL 는 주동팔의 길이, 간위치, g 는 중력가속도이다. 또한 ⎞ (cid:5)(cid:5) α ⎟ 3 ⎠ sin( φ 3 2α , 1φ 1α , 2φ φ 3 [( − + + , y ) ) ) − )] α 3 cos( sin( ) z am 는 주동팔의 질량, ,( zyx , ) 이다. , ° 3φ 3α 은 구동관절들의 회전각, = 120 °= 0 ° = 240 gLmm b + a a cos( α 3 ) − ⎞ ⎟ ⎠ α 3 bm 는 종동팔의 는 가동판의 공 ２）동력학적모형의 파라메터동정 론문에서는 식 (2)의 모형구조에 대하여 축차최소2제곱(RLS)알고리듬을 리용하여 모 형의 파라메터들을 동정한다. 이때 대상의 입출력측정자료는 ADAMS/MATLAB의 협동모 의모형을 통하여 얻어낸다. RLS알고리듬에서는 다음식과 같이 정의되는 선형회귀방정식을 리용한다. 여기서 )(ky 는 출력측정벡토르, θ는 추정해야 할 파라메터벡토르이다. ky )( θϕ T)( k = (3) )(kϕ 는 측정값들과 그것의 함수들로 구성된 회귀행렬, 이때 체계로부터 얻어진 표본값 즉 우리의 경우에는 로보트의 관절위치와 속도, 가 속도 및 관절구동모멘트들의 측정표본값들을 RLS알고리듬에 적용하여 모형파라메터들을 추정할수 있다. k = − (ˆ θ kP ( ()1 ϕ kP )( )1 +− )(ˆ k θ RLS알고리듬은 다음식과 같이 구성된다.[2] T kPk ( )( T kPk ( )( kP ( − (ˆ T k k  )( θϕ )(ˆ kθ 은 k 번째 시각에 추정되는 파라메터벡토르, )(kP 는 공분산행렬, I 는 단위행렬이다. )1 −− ()1 ϕ ky )( ke )( Ik )( Ik )( kP ( ϕ ϕ )1 − − + = = − + − 여기서 (추정오차), ()1 ϕ k )) − 1 ()1 ϕ k )) ke )( 1 − ϕ (4) T kPk ( )( (5) )1 − (6) )(ke 는 k 번째 시각의 예측오차 ３자유도델타형병렬로보트의 동력학적모형에 대한 파라메터동정 － 33 － 다음으로 파라메터의 동정을 위하여 중요한것은 로보트의 동정용궤도를 잘 설정하는 것이다. 델타로보트에서의 궤도계획은 로보트의 가동판이 작업공간의 초기점으로부터 마감점 까지 주어진 속도와 가속도로 이동하는 작업공간에서의 경로를 생성하는 과정이다. 이러 한 궤도들은 전동기의 물리적제약특성과 그리고 궤도의 원활성(미분가능성)과 정밀성 등 과 같은 질적지표에 근거하여 선택된다. 델타로보트에서는 6차－1차－6차다항식을 리용하여 구간별궤도계획을 실현한다.  보통 가속구간, 등속도구간, 감속구간과 같은 3개의 구간으로 구성된다.  일정한 경계조건들에 의하여 매 궤도계획구간들을 련결하며 이때 위치, 속도, 가속도, 가가속도곡선들이 련속이고 미분가능하여야 한다. 가속구간에서는 전동기가 가속하는 시 간동안 6차다항식을 리용하며 등속구간에서는 1차다항식, 감속구간에서는 전동기가 감속 하는 시간동안 6차다항식을 리용한다. 론문에서는 작업공간에서 초기위치와 마감위치를 접수하고 그 두 점사이에 공간궤도 를 형성하는 중간점들을 직선으로 련결하면서 통과하도록 경로를 생성한다. 매 중간점들 에 대한 대응하는 관절위치각은 델타로보트의 역운동학모형을 리용하여 구할수 있다. 표 1에 델타로보트의 동정용궤도와 모형검증용궤도를, 그림 2에 작업공간에서 동정 용궤도 1T 과 검증용궤도 2T 의 자리길을 보여주었다. 표 １．델타로보트의 동정용궤도와 모형검증용궤도 시작점(starting point) 경로점(way points) 마감점(final point) 동정용궤도( 1T )/m (0, 0, 0.62) (0, 0, 0.8), (0.1, 0, 0.8),  (0, 0.1, 0.67), (0, -0.1, 0.67), (0.1, 0, 0.8), (0, 0, 0.8) (0, 0, 0.62) 검증용궤도( 2T )/m (0, 0, 0.62) (0, 0, 0.8), (0.1, 0, 0.8), (0, 0, 0.8), (0, 0.07, 0.8),  (0, 0, 0.8) (0, 0, 0.62) 0.8 0.75 m / z 0.7 0.65 0.1 0.1 0 y/m -0.1 0 ㄱ) 0.05 x/m 0 y/m -0.1 0 ㄴ) 그림 2. 동정용궤도 1T (ㄱ))과 검증용궤도 2T (ㄴ))의 자리길 0.05 x/m 0.1 다음으로 파라메터동정수법을 적용하기 위하여 식 (2)의 모형을 다음과 같이 표시할 (cid:5)(cid:5) θαθτ 11 2 = − 1 x sin( ) − θα 3 1 y sin( ) + θα 4 1 z cos( αθαθα 1 1 cos( sin( + + ) ) 6 5 1 ) 0.8 0.75 m / z 0.7 0.65 0.1 수 있다. － 34 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 = − (cid:5)(cid:5) θαθτ 21 2 7 (cid:5)(cid:5) θαθτ 31 11 = 3 =θ 1 =θ 5 I + )3/1( m )2/1(( 3 x y x − sin( ) − θα 8 2 ) − θα 12 2 LmLm + ab , sin( 2 aa ) gLmm b ( 2 2 = λ (2 3 = λ a θ 10 θ 14 a Rr − Rr − + ) ) 2λθ = 2 2λ 3 9 θ = 13 , , cos( sin( z ) + θα 2 9 ) + θα 13 3 z ) + cos( θαθα 10 2 2 cos( cos( + θαθα 14 5 + + ) ) ) 3 3 5 sin( ) α 2 sin( α 3 ) y sin( (7) ) , , cos( 2 2 = λθ (2 1 cos( 2 θ = φλ 11 3 φλθ = 1 1 λθ = Rr − 2 θ = 12 6 , 7 ) , , ) 3 2 sin( φλθ = 1 1 , cos( 3 2 ) φ 2 2 sin( φλ 3 3 ) 8 ) , 4 , , 2λθ = 1 sin( φλθ = 2 2 2 ) , 또한 식 (7)을 식 (3)과 같은 회귀형식으로 다음과 같이 표현할수 있다. τ ⎡ 1 ⎢ τ ⎢ 2 ⎢ τ ⎣ 3 ⎤ ⎥ ⎥ ⎥ ⎦ T θϕ = = 3,1 1,1 2,1 ⎡ ϕϕϕ ⎢ ϕϕϕ ⎢ ⎢ ϕϕϕ ⎣ 2,2 2,3 1,2 1,3 3,2 3,3 (cid:34) (cid:34) (cid:34) ϕ 14,1 ϕ ϕ 14,2 14,3 ⎤ ⎥ ⎥ ⎥ ⎦ θ ⎡ 1 ⎢ θ ⎢ 2 ⎢ (cid:35) ⎢ θ ⎣ 14 ⎤ ⎥ ⎥ ⎥ ⎥ ⎦ (8) 여기서 이다. 여기서 ) ) 1,1 αϕ (cid:5)(cid:5)= 1 x−= ϕ 2,1 y−= ϕ 3,1 ϕ z= 4,1 ϕ = 5,1 ϕ = 6,1 sin( 1 α sin( 1 α cos( 1 ) α cos( 1 ) α sin( 1 ) α = 0 =ϕϕ 7,1 8,1 =ϕϕ 9,1 10,1 = 0 =ϕϕ 11,1 12,1 = 0 =ϕϕ 13,1 14,1 = 0 1,2 αϕ (cid:5)(cid:5)= 2 cos( 2 ϕ = α 5,2 ) ) ) ϕ 7,2 x−= sin( 2 α sin( 2 α cos( 2 ) α sin( 2 ) α 0 = 3,2 y−= ϕ 8,2 ϕ z= 9,2 ϕ = 10,2 =ϕϕ 2,2 4,2 =ϕϕ 6,2 =ϕϕ 11,2 12,2 = 0 = 0 ϕ 13,2 =ϕ 14,2 = 0 ) ) 1,3 αϕ (cid:5)(cid:5)= 3 cos( 3 ϕ = α 5,3 x−= ϕ 11,3 ) sin( 3 α sin( 3 α cos( 3 ) α  sin( 3 ) α 0 = 3,3 ϕ 12,3 y−= ϕ z= 13,3 ϕ = 14,3 =ϕϕ 2,3 =ϕϕ 4,3 6,3 = 0 =ϕϕ 7,3 8,3 = 0 =ϕϕ 9,3 10,3 = 0 이다. 이 회귀모형은 관절가속도와 관절위치, 가동판의 공간위치, 구동관절에 작용하는 틀 음모멘트를 입력(측정자료)으로 리용한다. 이 측정정보들은 동정용궤도를 따라 이동하는 동안에 MSC-ADAMS/MATLAB협동모의모형으로부터 얻어진다. 식 (8)로 주어진 회귀모형을 식 (3)에 귀착시키고 식 (4)－(6)으로 표시된 RLS알고리 듬을 리용하여 동력학적모형의 파라메터 [ θθθ 2 = 1 , , (cid:34) , θ 14 T ] 를 추정한다. ２．파라메터동정결과 및 검증결과해석 ) , 관절위치 동정용입출력자료를 얻기 위하여 MSC-ADAMS/MATLAB협동모의모형을 리용한다.  모형의 가동판을 동정용궤도 1T 을 따라 이동시킨다. 이때 가동판의 공간위치 에 대한 자료들을 측정한다. 그런데 식 (2) 혹은 식 (7)에 ,( zyx , ( , ααα 3 2 (cid:5)(cid:5) (cid:5)(cid:5) (cid:5)(cid:5) 서 보는바와 같이 해석적동력학모형에는 관절가속도 가 포함되여있다. 이 관 ααα ( , 1 2 3 절가속도값들은 MSC-ADAMS/MATLAB협동모의모형으로부터 얻어진 관절위치값들을 수 값미분하여 얻는다. ) ) 1 , , ３자유도델타형병렬로보트의 동력학적모형에 대한 파라메터동정 － 35 － 협동모의모형으로부터 측정한 자료들과 식 (4)－(6)에서 정의된 RLS알고리듬을 리용 하여 얻은 델타로보트의 해석적동력학모형의 파라메터추정결과를 표 2에 보여주었다. 표 ２．델타로보트의 해석적동력학모형의 파라메터추정결과 파라메터 1θ  2θ  3θ  4θ  5θ  6θ  7θ 추정값 0.906 0 46.087 2 0.653 0 -17.538 7 23.589 0 0.837 0 -8.811 9 파라메터 8θ  9θ  10θ  11θ  12θ  13θ  14θ 추정값 6.291 8 -17.511 9 1.037 2 -11.086 7 -16.297 8 -17.154 5 0.405 4 다음으로 델타로보트의 해석적동력학모형의 파라메터동정결과를 검증하기 위하여 MATLAB/Simulink환경에서 동정한 파라메터값들을 리용하여 동력학모형(동정결과모형)을 구축하고 우에서 언급한 자료들을 입력으로 하여 매 관절에 작용하는 틀음모멘트 iτ 를 출력한다. 이것은 동정결과모형의 예측출력에 대응한다. 이 예측출력과 MSC-ADAMS/ MATLAB협동모의모형으로부터 측정한 틀음모멘트(즉 대상의 측정출력)를 비교한다. 이 두 모멘트사이의 차를 평가하기 위하여 다음식으로 정의되는 NRMSE(Normalized (9) Root Mean Square Error)를 성능평가지표로 리용한다. ||ˆ y y ||)(mean NRMSE 1 −= || − − y || y 여기서 yˆ 은 동정결과모형의 예측출력으로서 여기서는 Simulink환경에 구축한 모형의 출 력값(매 관절의 틀음모멘트)에 대응한다. y 는 실제대상의 측정출력으로서 여기서는 협동 모의모형의 출력인 관절틀음모멘트에 대응한다. 그리고 )(mean y 는 y 의 평균값을 표시하 || ⋅ 는 벡토르의 2노름을 의미한다. 이때 벡토르의 요소개수는 측정점의 개수와 같다.  며 식 (9)에서 NRMSE가 1에 가까울수록 추정된 모형(동정결과모형)은 실제대상특성에 잘 정합된다고 말할수 있다. 그러나 NRMSE가 령에 가깝거나 령보다 작으면 추정모형은 잘 정합되지 않는다. 동정결과를 검증하기 위하여 델타로보트를 검증용궤도 2T 에 적용하 여 NRMSE를 구하였다. || 1T 과 2T 를 리용하였을 때 매 관절에 작용한 틀음모멘트의 NRMSE값들 표 3에 궤도 을 보여주었다. 표 ３．궤도 T1과 T2를 리용하였을 때 관절에 작용한 틀음모멘트의 NRMSE값 관 절 1τ  2τ  3τ NRMSE(T1) 0.852 8 0.866 3 0.915 3 MRMSE(T2) 0.856 7 0.816 6 0.914 0 표 3에서 보는바와 같이 궤도 T1과 T2를 리용하였을 때 델타로보트의 관절구동모 멘트들의 NRMSE값은 0.8보다 크다. 이것은 해석적동력학모형의 추정된 파라메터들이 서로 다른 궤도들에 대한 델타로보트의 동특성에 80%이상의 적합도로 정합된다는것을 보여준다. － 36 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 맺 는 말 참 고 문 헌 3자유도델타형병렬로보트의 해석적동력학모형을 회귀모형구조로 변환하고 MSC- ADAMS/MATLAB협동모의모형의 입출력측정자료에 축차최소2제곱(RLS)알고리듬을 적용 하여 로보트의 동력학적모형의 파라메터를 동정하고 그 결과를 검증하였다. 이 수법을 리용하면 델타형로보트를 구성하는 매 토막들의 관성모멘트와 질량에 대한 측정을 진행 하지 않고도 동정을 통하여 조종체계설계에 필요한 로보트의 동력학적모형을 비교적 정 확히 얻어낼수 있으므로 실천적으로 의의가 있다. [1] 전인철 등; 병렬로보트, 외국문도서출판사, 9～21, 주체106(2017). [2] 공영수, 김영춘; 체계모형화, 종합대학출판사, 100～105, 주체108(2019). [3] X. Liu et al.; Mechanism and Machine Theory, 126, 155, 2018. [4] 徐东涛 等; 机床与液压, 45, 3, 43, 2017. 주체109(2020)년 5월 5일 원고접수 Parameter Identification for Dynamical Model of 3-DOF Delta Parallel Robot Kim Yu Bom, Kong Yong Su This paper have presents a method to identify the parameters of the dynamical model of delta parallel robot. The results of MSC-ADAMS/MATLAB co-simulation show that the proposed identification method is feasible and efficient in real applications. Keywords: delta robot, parameter identification, dynamic model