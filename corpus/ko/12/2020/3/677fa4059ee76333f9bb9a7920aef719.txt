김일성종합대학학보 정보과학 주체109(2020)년 제66권  제3호 질문적용범위변환에 의한 검사자료기지축소방법 조윤, 조영희 자료기지응용프로그람의 기능검사에서는 검사자료기지를 잘 설계하는것이 중요하다. 그것은 검사자료기지가 커질수록 검사자료를 적재하고 재설정하는것이 더 어려워지기때 문이다.[1] 선행연구[2]에서는 원시자료기지로부터 검사자료를 선택하기 위하여 SQLFpc적용범 위기준을 리용하였다. 여기서 원시자료기지를 대비하는 규칙들의 실행은 질문에 대한 검 사요구들을 만족시키는가 하는것으로 결정된다. 론문에서는 SQL질문적용범위를 축소규칙으로 변환하고 축소규칙을 평가한 결과로부 터 축소자료기지를 얻는 방법을 제안하였다. １．자료기지의 축소문제와 축소방법 SQL질문이 주어지면 그 적용범위를 얻기 위하여 검사자료기지에 schema제약에 대한 검사요구를 서술하게 되는데 이것을 질문적용범위라고 부른다. 이 질문적용범위는 질문에 질문적용범위변환 을 적용하여 얻어진다. D를 원시자료기지, 검사자료기지에 대한 적용범위평가는 그 자료기 지에서 매 질문을 실행하여 얻어지는데 만일 출력이 비지 않았다면(적어도 1개 행이라도 얻어짐.) 검사요 구가 만족된다는것을 의미한다. SQL에서 관계는 표, 속성은 렬, 조는 행을 나타낸다. , (cid:34) 을 D의 부분모 , DD 1 임, Q를 SQL질문모임(Q = {Qi}), Φ 를 질문적용범위변 환 iΔ 를 , jD 의 조들 iQ 의 질문적용범위라고 할 때 만을 포함한 축소자료기지 D′ 를 찾는 문제를 검사자 iΔ 를 덮는 D′ 를 찾는 료기지축소문제라고 부른다. 즉 것이다. 를 질문적용범위모임, iΔ 를 덮는 QΦ=Δ i }{ iΔ=Δ nD )) ( ( 2 , i 검사자료기지축소방법은 다음과 같다.(그림 1)  ① Q에 Φ를 적용하여 Δ를 얻는다.  ② D에서 Δ 를 평가하여 관계(Z)를 생성한다. 여 기서 Z가 적어도 1개의 조를 포함(Δ요구를 만족시키 는 부분자료모임)하면 적용규칙은 덮이게 된다. ③ 축소변환(ϕ)으로 D에서 축소규칙( δ )을 평가 하여 관계 ) (Z′ 를 생성한다. Z D ϕ Q Φ Δ δ Z′ D′ 축소절차 그림 1. 검사자료기지축소방법에 대한 흐름도 － 18 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 ④ Z ′ 에 축소절차를 실행하여 D′ 를 얻는다. 검사자료기지축소는 다음의 2개 문제로 귀착된다. ① Δ 로부터 δ 를 생성하는 축소변환정의: δ 는 원시자료기지에서 적용범위의 원천 조들을 찾는 rve(관계할당표시 Z←rve에서 rve는 관계값표현, Z는 관계값표현을 적용할 때 얻어지는 관계이름) ② δ 평가로 얻어지는 조들로부터 작은 개수의 조들을 선택하는 축소절차정의: δ 에 대한 축소절차실행후에 결과조들의 모임을 축소자료기지(초기에 빈 자료기지)에 추가 ２．Join질문자료기지축소 실례로 1, BA 은 기본열쇠, 1 AAT 2 1 1 ( , ), BBBT , 3 ( 2 1 2 , ) 은 관계, 1 TTD = ,{ 2 } 는 원시자료 Select 기지라고 할 때 질문 2, BA 3 BTB ] = 3 2 1T  Inner Join BA , ](2 > 3 2 그림 2에 Join질문자료기지축소실례를 보여주었다. 에 대한 Δ는 2T  On , From 이다. AT [ 1 2 AT . 1 2 [ ) 2 = BT . 2 2 Where >BT . 3 2 2 1T 1A 2A D 1 2 3 4 1B 1 2 3 20 18 21 19 2T  2B 18 19 20 3B 3 2 5 Δ δ : : [ AT 1 2 [ AT 1 2 = = 2 ] BTB 2 3 ] BTB 2 3 [ [ 2 > > ](2 ](2 ) , BA 2 3 , , BABA 1 3 1 2 , ) Q , ΔΦ , δϕ, Δ←Z 2A 3B 20 18 5 3 δ←′Z 1B 2A 3 1 20 18 3B 5 3 1A 1 2 축소절차 1T ′ D′ 1A 1 1B 3 2A 20 2T ′  2B 20 3B 5 그림 2. Join질문자료기지축소실례 이러한 축소자료기지는 다음과 같은 과정을 통하여 얻게 된다. D에서 δ 평가후에 얻어지는 Z ′ 가 D의 모든 원천조들을 구별하기 위하여 ϕ는 Δ를 δ로 변환한다. 실례에서 기본열쇠들을 선택하여 새 적용범위 δ를 얻는다.  질문 에 대한 δ는 Select , From 2, BA 3 AT BTB [ ] = 1 2 3 2 JT [ 2 1T  Inner Join , , > ](2 2T  On ) AT . 1 2 이다. 2 BABA , 3 1 1 (1 AT 와 ) , [ )] =Δ BApT ( 1 의 조들을 Join하고 p, q에 따 라 결과조들을 선택하는 적용범위라고 할 때 Join축소변환은 A, B속성들을 선택하는 Δ 와 같다. 즉 ]가 원천관계 )( Δ=Δϕ BAqT ([ 이다. (2 BT BA , ) ) ) ( 2 , JT = BT . 2 2 Where >BT . 3 2 2 질문적용범위변환에 의한 검사자료기지축소방법 － 19 － δ←′Z 축소절차는 의 조들의 부분모임을 선택한 다음 해당한 D의 원천조들을 찾는 방법으로 D′ 를 얻는다. D′ 에 Z′ 의 매 조를 추가할 때의 비용은 D′ 에 추가되여야 할 조 들의 개수이다. 실례에서 Z′ 는 2개 조들을 포함하는데 비용은 2이다. 임의의 한 조를 선택한다. 축 소절차는 매 적용범위에 대하여 점차적으로 실행되므로 D′ 에 이미 있는 조들중 1개를 취한다. 그림 3에 Join질문축소절차를 보여주었다. 시 작 φ=D' iΔ ∈ Δ 예 φ ∞= ) BestDB = BestCost ( Δ= ϕδ i 'Z δ = i i i 아니 아니 k z i ∈ 'Z i 예 CurrentDB = CurrentCos t k source z ( ) i k 'DDz , , i cost ( = ) CurrentCos 0≠t 예 예 CurrentCos < t BestCost BestDB = BestCost CurrentDB = CurrentCos t D' D' ∪= BestDB 아니 BestDB φ= 아니 끝 그림 3. Join질문축소절차 － 20 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 그림 3에서 }{ jTD = 는 원시자료기지, }{ iδ 는 축소규칙모임, D =′ ′ }{ jT 는 축소자료기 지(초기에 빈 자료기지), 하여 결정되는 D조모임, k iz 는 cost ( 의 k번째 조, iZ δ←′ i k ′ 는 비용함수( D′ 에 추가되여야 할 ) DDz , , i k iz 의 기본열쇠값에 의 ( k source 의 조 iz ( k source 는 iz ) ) 개수)이다. 그리고 원천조모임이 가장 좋은 풀이로서 D′ 에 추가된다. iδ 로 변환되여 D에서 평가되며 조( iΔ 는 k iz )에 대하여 비용이 최소인 ３．검사자료기지축소의 실현과 효과성 자료기지축소프로그람의 입력파라메터는 질문렬, 원시자료기지이름, 자료기지의 표개 수, 매 표의 이름, 기본열쇠, 마당수, 기본열쇠자료형이다. 검사자료기지축소프로그람대면부를 그림 4에 보여주었다. 그림 4. 검사자료기지축소프로그람대면부 우리는 자료기지응용프로그람이 사용하는 자료기지들중에서 1개 원시자료기지 Base 를 리용하여 실험을 하였다.(표 1) 표 １．Base자료기지 마 당 이 름 3 4 5 6 7 표이름 기록수/개 Kind BusoKind FixTitle BusoFixTitle Policy BusoPolicy 24 321 102 134 78 487 1 ID ID 2 Content Content ConnectID BusoCode ConnectID BusoCode ID Content ConnectID BusoCode RContent Ord RContent Ord Ord fChild RContent ParentCode Indent Ord Base에 대한 질문 3개를 표시하는 자료기지응용프로그람의 일부는 다음과 같다. string[ ] sqls = new string[ ]{“SELECT Kind.ID, Kind.Content, Kind.RContent, BusoKind.Ord 질문적용범위변환에 의한 검사자료기지축소방법 － 21 － FROM BusoKind INNER JOIN Kind ON BusoKind.ConnectID = Kind.ID WHERE  BusoKind.Ord = 10”, “SELECT FixTitle.ID, FixTitle.Content, FixTitle.RContent,  BusoFixTitle.Ord FROM BusoFixTitle INNER JOIN FixTitle ON  BusoFixTitle.ConnectID = FixTitle.ID WHERE BusoFixTitle.Ord = 10”, “SELECT  Policy.ID, Policy.Content, Policy.RContent, Policy.ParentCode, Policy.fChild,  Policy.Indent, BusoPolicy.Ord FROM BusoPolicy INNER JOIN Policy ON  Policy.ID = BusoPolicy.ConnectID WHERE BusoPolicy.BusoCode = 61”}; 자료기지응용프로그람에서의 질문실행결과를 표 2에, 축소규칙을 적용한 질문실행결 과를 표 3에, 축소검사자료기지를 표 4에 보여주었다. 표 ２．질문실행결과 표이름.마당이름 1 2 3 4 5 5 6 6 Kind.ID Kind.Content Kind.RContent BusoKind.Ord FixTitle.ID FixTitle.Content FixTitle.RContent BusoFixTitle.Ord Policy.ID Policy.Content Policy.ParentCode BusoPolicy.fChild Policy.Indent BusoPolicy.Ord 표 ３．축소규칙을 적용한 질문실행결과 표이름.마당이름 1 2 3 4 Kind.ID Kind.Content Kind.RContent BusoKind.Ord FixTitle.ID FixTitle.Content FixTitle.RContent BusoFixTitle.Ord Policy.ID Policy.Content Policy.ParentCode BusoPolicy.fChild Policy.Indent BusoPolicy.Ord 표 ４．축소검사자료기지 마 당 이 름 표이름 기록수/개 Kind BusoKind FixTitle BusoFixTitle Policy BusoPolicy 1 1 1 1 1 1 ConnectID BusoCode ConnectID BusoCode 2 Content Content Content 1 ID ID ID ConnectID BusoCode 3 4 5 6 7 RContent Ord RContent Ord RContent Ord ParentCode fChild Indent Ord 표 1과 표 4를 대비하여보면 원시자료기지와 축소검사자료기지의 크기는 아주 차이 실험에서 축소검사자료기지의 매 표의 기록수는 다 1개이다. 매 표의 기록수가 1개 로 축소되는것은 실험에서 매 표에 대하여 질문을 1개씩만 리용하였기때문이다. 매 표에 대하여 여러개의 질문적용범위를 적용한다면 결과는 기록수가 1개가 아니라 그 이상이 될수 있다. 그러나 원시자료기지에 비해볼 때 축소검사자료기지의 기록수는 기 록 수 /개 6 2 25 기 록 수 /개 1 1 1 번 호 1 2 3 번 호 1 2 3 난다. － 22 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 상당히 작아지게 된다. 결과 이 자료기지응용프로그람을 많은 검사실례들을 가지고 검사할 때 원시자료기지 에서가 아니라 축소검사자료기지에서 진행하므로 검사시간과 기억공간절약은 물론 많은 검사실례를 가지고 검사가 가능하게 되므로 자료기지응용프로그람검사를 높은 수준에서 진행할수 있게 한다. SQL질문모임과 원시자료기지에 대하여 검사적용범위를 보존하는 축소된 검사자료기 지를 생성하는 검사자료기지축소방법을 제안함으로써 응용프로그람들에서의 검사시간과 많은 기억공간을 절약할수 있도록 하였다. 맺 는 말 참 고 문 헌 [1] K. Pan et al.; Autom. Softw. Eng., 22, 4, 439, 2015. [2] J. Tuya, M. J. Suarez-Caba; Softw. Testing, Verification Rel., 20, 3, 237, 2010. Test Database Reduction Method Using Query Coverage Transform 주체109(2020)년 5월 5일 원고접수 Jo Yun, Jo Yong Hui We have presented an approach for the reduction of test databases that produces a reduced test database that preserves the test coverage about a set of SQL queries and an initial database. Keywords: test database reduction, test coverage