김일성종합대학학보 정보과학 주체109(2020)년 제66권  제3호 4원수를 리용한 뽈보트의 수학적모형화 강정수, 남광현, 리준일 선행연구들[1]에서는 뽈보트에 대한 수학적모형화를 오일러각을 리용하여 진행하였 는데 이 방법들의 제한성은 계산량이 많고 모형이 복잡한것이다. 특히 오일러각을 리용 하는 경우 특이성이 나타나는것을 피할수 없게 된다. 론문에서는 4원수를 리용하여 계산량이 간단하고 특이성이 나타나지 않는 수학적모 형화방법을 제안하고 모의실험을 통하여 제안된 방법의 효과성을 검증하였다. 뽈보트의 수학적모형화를 위해 4원수의 기초개념을 고찰하자. 단위 4원수를 다음과 같이 정의한다.[2] q = [ q , 0 q 1 , q 2 , T ,] q 3 q 2 0 + 2 q 1 + q 2 2 + 2 q 3 = 1 (1) 만일 4원수 p 와 q 가 p 와 같다고 할 때 4원수의 더하기는 일반벡토르에서의 더하기와 같다. q = p = q 3 p 1 q 1 , p q q p ] [ ] [ 2 2 0 3 0 , , , , , , T T (2) qp =+ [ p + q , 0 0 p 1 + q 1 , p 2 + q , 2 p 3 + q 3 T ] (3) 한편 공액4원수를 다음과 같이 정의한다. =∗ q [ q , 0 − q 1 , − q , 2 − q 3 T ] (4) 이때 공액4원수와 거꿀4원수사이 관계는 다음과 같다. 1 − = q ∗ q ||/ q || (5) 다른 한편 4원수의 곱하기는 다음과 같이 정의한다. qp (cid:68) = (6) ⎡ ⎢ ⎢ ⎢ ⎢ ⎣ qp 00 qp 01 qp 02 qp 03 − + + + qp 11 qp 10 qp 20 qp 30 − + + + qp 22 qp 32 qp 13 qp 21 − − − − qp 33 qp 23 qp 31 qp 12 ⎤ ⎥ ⎥ ⎥ ⎥ ⎦ 단위4원수에 대하여 다음의 관계식도 성립한다. 4원수를 리용하면 벡토르의 회전관계를 다음과 같이 표시할수 있다. (cid:68) qq 1 =− * (cid:68) pp [ 0001== e (7) ]T 또한 4원수의 미분은 다음과 같이 표시된다. v =′ q (cid:68) 1 − (cid:68) q (8) 0 v ⎡ ⎢ ⎣ ⎤ ⎥ ⎦ (cid:5) q = q (cid:68) 1 2 0 w b ⎡ ⎢ ⎣ ⎤ =⎥ ⎦ 1 2 Q 0 w b ⎡ ⎢ ⎣ ⎤ ⎥ ⎦ (9) 4원수를 리용한 뽈보트의 수학적모형화 － 111 － 4원수를 리용한 수학적모형화과정은 다음과 같다. 뽈보트의 수학적모형을 작성하기 위해 그림 1에 서 보는바와 같이 3개의 자리표계를 도입하였다. 그 림 1에서 W 는 관성자리표계, R 는 뽈의 무게중심에 위치한 뽈자리표계, B 는 본체의 무게중심에 위치한 본체자리표계이다. 우선 뽈보트에 작용하는 힘에 대해 고찰하자. 그림 2에서 보는바와 같이 뽈보트본체에 작용하 는 힘은 다음과 같다. = + F b wb gm 여기서 (cid:5) (cid:5)(cid:5) xmP = bb b bP 는 본체의 운동량(관성자리표계), (10) bx 는 본 bm 는 본체의 bF 는 뽈이 본체에 가하는 힘(관성자리표계)이 = 체의 무게중심의 위치(관성자리표계), 질량, 이다. 00[ 며 T] − g g w 그림 1. 3차원모형작성을 위한 뽈보트 그림 2. 뽈보트에 작용하는 힘에 대한 해석 한편 뽈에 작용하는 힘은 다음과 같다. (cid:5) (cid:5)(cid:5)                     (11) xmP = r r rx 는 뽈의 무게중심의 위치(관성자리표계), r rP 는 뽈의 운동량(관성자리표계), gm F b wr F r − + = rm 여기서 는 뽈의 질량, rF 는 땅이 뽈에 가하는 힘(관성자리표계)이다. 다음으로 뽈보트에 작용하는 모멘트에 대해 고찰하자. 뽈보트본체에 작용하는 모멘트는 다음과 같다. F × b d 여기서 τ 는 입력모멘트, 벡토르, bd 는 d b = x b − x r (τ(cid:5) L −+= b 는 뽈의 무게중심으로부터 본체의 무게중심까지의 (12) ) b d b = q b (cid:68) x , Bb 1 −(cid:68) q b , x , Bb = 000[ T l ] (13) 한편 뽈에 작용하는 모멘트는 다음과 같다. 이다. － 112 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 (τ +−= (cid:5) L r r w ) × F r (14) 는 뽈의 무게중심으로부터 뽈과 지면사이의 접촉점까지의 벡토 여기서 r = r 르(관성자리표계)이다. 00[ r w − T] 다음으로 뽈보트의 각가속도와 운동량모멘트사이 관계는 다음과 같다. (cid:5) w b (cid:5) w r 1 − I Ω−= b − I Ω−= r 1 + w b L b (15) (cid:5) 1 − LI b b (cid:5) 1 − LI r r bI 는 본체의 관성행렬(본체자리표 L , 는 본체와 뽈의 운동량모멘트(관성자리표계) b L r (16) L r + w r b ww , 는 본체와 뽈의 각속도(관성자리표계), r rI 는 뽈의 관성행렬(뽈자리표계), 여기서 계), 이다. 이때 다음의 관계가 성립하게 된다. x b = x r + q b (cid:68) x Bb , (cid:68) * q b (17) 여기서 리표계), = 00[ x , Bb bq 는 본체의 방위를 나타내는 4원수이다. ] l T 는 뽈의 무게중심으로부터 본체의 무게중심까지의 벡토르(본체자 식 (17)로부터 뽈보트본체와 뽈사이에 다음과 같은 관계가 성립한다. d 또한 뽈과 바닥사이에는 미끄럼이 존재하지 않으므로 다음의 식이 성립한다. b (cid:5)(cid:5) x b − (cid:5)(cid:5) x r Ω+ (cid:5) w b ΩΩ= w b d bw b (18) Ω=(cid:5) x r w r r w (19) 그리고 우의 식을 미분하면 다음의 식을 얻을수 있다. (cid:5)(cid:5) x r Ω= (cid:5) w r r w (20) 식 (10)－(20)을 리용하면 다음과 같은 상태방정식들을 얻을수 있다. ( ΩΩΩ+ d m ΩΩ+ b Ω−= m b g w I b d (cid:5)) mw ΩΩ− d b mm + b b − ) ( r r τ(cid:5) w r r w ΩΩ r w r w b I b d [ bw b mwI Ω− b b (cid:5) w b d r w b b d = (cid:5) mw ] ΩΩ+ b r b w b b d bw b (21) (22) τ Ω−− m rw b r 다음으로 뽈보트에 작용하는 모멘트를 환산해보자. 그림 3으로부터 뽈의 겉면에 작용하는 접선힘들은 각각 다음과 같이 표시된다. ΩΩΩ+ r w mm + b wI r Ω w b − d g r w w w ) ( b r b 그림 3. 구동바퀴에서 생성되는 모멘트와 접선힘 4원수를 리용한 뽈보트의 수학적모형화 － 113 － τ 1 r d ⎡− ⎢ ⎢ ⎢ ⎣ sin 0 β ⎤ ⎥ ⎥ ⎥ ⎦ τ 2 r d ⎡ ⎢ ⎢ ⎢ ⎣ sin( − cos( )3/2 πβ + )3/2 πβ + 0 ⎤ ⎥ ⎥ ⎥ ⎦ τ 3 r d ⎡ ⎢ ⎢ ⎢ ⎣ sin( − cos( )3/2 πβ − )3/2 πβ − 0 ⎤ ⎥ ⎥ ⎥ ⎦ F w 1, = cos β , F w 2, = , F w 3, = (23) 여기서 dr 는 바퀴의 반경, τττ 2 3 뽈의 중심으로부터 힘의 작용점까지의 벡토르는 다음과 같다. 은 전동기 1, 2, 3의 출력모멘트이다. 1 , , r w 1, = r r , r w 2, = r r , r w 3, = r r (24) ⎡ ⎢ ⎢ ⎢ ⎣ cos sin sin αβ ⎤ ⎥ sin αβ ⎥ ⎥ cos ⎦ α ⎡ ⎢ ⎢ ⎢ ⎣ cos( sin( sin)3/2 sin)3/2 πβ + πβ + cos α α ⎤ ⎥ α ⎥ ⎥ ⎦ ⎡ ⎢ ⎢ ⎢ ⎣ cos( sin( sin)3/2 sin)3/2 πβ − πβ − cos α α ⎤ ⎥ α ⎥ ⎥ ⎦ 여기서 rr 는 뽈의 반경이다. 따라서 뽈에 작용하는 힘모멘트는 다음과 같다.(본체자리표계) =τ b r w 1, × F w 1, + r w 2, × F w 2, + r w 3, × F w 3, (25) 한편 기준자리표계에서의 힘모멘트는 다음과 같다. 우리는 뽈보트의 수학적모형에 대한 검증을 위해 Matlab를 리용하여 모의실험을 진 τ 1−= q b (cid:68)τ b (cid:68) q b (26) 행하였다. 모의에 리용한 파라메터들은 표와 같다. 표. 모의에 리용한 파라메터 뽈의 중심으로부터 본체의 중력중심까지의 거리 항 목 뽈의 질량 본체의 질량 뽈의 반경 바퀴의 반경 뽈의 관성모멘트 본체의 관성모멘트 본체의 관성모멘트 본체의 관성모멘트 중력가속도 바퀴의 접촉점까지의 각도 변수이름 rm  bm  kr wr l kθ  xb,θ  yb,θ  zb,θ g α 값 2.29kg 9.2kg 0.125m 0.06m 0.039m 0.023 9 2mkg ⋅ 2mkg ⋅ 2mkg ⋅ 2mkg ⋅ -2sm ⋅ 2.026 2.026 0.092 9.81 45゜ 바퀴들이 놓이는 각도 βββ 2 3 1 , , 0゜, 120゜, 240゜ 그림 4에 종요, 횡요, 편요방향의 초기각도를 준 경우의 뽈보트의 자세각을 보여주었 다. 그림 4에서 보는바와 같이 종요 및 횡요방향의 초기각도를 준 경우 뽈보트는 자유진 동을 하게 되며 편요방향의 초기각도를 준 경우에는 그 상태를 유지하게 된다. 실험결과로부터 론문에서 제안한 수학적모형이 뽈보트의 특성을 잘 반영하고있다는 것을 알수 있다. － 114 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 ㄱ) 종요방향의 초기각도를 준 경우, ㄴ) 횡요방향의 초기각도를 준 경우, ㄷ) 편요방향의 초기각도를 준 경우 4원수를 리용하여 뽈보트의 수학적모형화를 얻는 방법을 제안하고 모의실험을 통하 여 얻어진 모형의 효과성을 검증하였다. 모의실험결과로부터 모형이 대상의 특성을 비교 적 정확히 반영하고있다는것을 알수 있다. 그림 4. 본체의 자세각 맺 는 말 참 고 문 헌 [1] U. Nagarajan et al.; The International Journal of Robotics Research, 33, 6, 917, 2014. [2] A. Hanson; Visualizing Quaternions, Morgan Kaufmann, 35～56, 2006. 주체109(2020)년 5월 5일 원고접수 The Mathematical Modeling of Ballbot by means of Quaternion Kang Jong Su, Nam Kwang Hyon and Ri Jun Il We proposed the mathematical modeling of ballbot by means of quaternion. The advantage of this method is that we can get a simple model free of singularity. Keywords: quaternion, mathematical modeling, ballbot