김일성종합대학학보 정보과학 주체109(2020)년 제66권  제3호 객체지향쏘프트웨어의 계승계층구조의 재분해방법 김충혁, 신춘옥 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다.  《첨단돌파전을 힘있게 벌려야 나라의 과학기술전반을 빨리 발전시키고 지식경제의 토대를 구축해나갈수 있습니다.》 객체지향쏘프트웨어에서 하나의 계승계층구조에 너무 많은 기능이 들어있으면 그 계 승계층구조를 《높은 응집도와 낮은 결합도》의 원리에 따라 개선하여 더 많은 계승계층구 조를 창조하여야 한다. 선행연구[1]에서는 계승계층구조에 대하여 비계승계층구조의 재분해방법으로 그 구 조에 들어있는 모든 클라스들을 하나의 실체모임에로 통합하고 그것을 재그룹화하였다. 따라서 코드의 동작을 보존하기 매우 어렵다. 선행연구[2－4]에서는 클라스들을 원래클라스들의 부분클라스 또는 상위클라스로 추 출하는 방법으로 재분해를 진행하였다. 따라서 계승나무의 평균깊이와 직접적인 부분클 라스의 수는 증가하고 수정하기가 더 어렵다. 론문에서는 계승나무를 쪼개는 방법으로 재구축되는 계승나무의 깊이와 부분클라스 들의 수를 조절하는 계승계층구조의 재분해방법을 제안하였다. １．계승계층구조의 재분해를 위한 전처리 객체지향쏘프트웨어를 클라스준위의 다중의존관계망[1](CMDN: Class－level Multi－ 은 정점을 이루는 로 모형화한다. 여기서 relation Directed Network) ∪= GG ) 1 G 2 EV ,( 1 G = 1 EV ,( 2 ) 는 클라스들사이의 계 클라스들사이의 비계승관계들을 서술하는 그라프이고 승계층구조를 서술하는 그라프이다. G = 2 계승계층구조의 재구축을 진행하기 전에 비계승관계그라프의 모든 정점들을 이루는 클라스들과 계승계층구조의 잎정점들에 놓이는 클라스들에 대한 재분해를 선행연구[1]에 서와 같이 진행한다. 계승계층구조의 클라스들에 대한 재분해를 진행하기 위한 전처리를 다음과 같이 진 ① 비계승계층구조에 대한 재분해결과에 따라 다중의존관계망 GG ′∪′=′ 1 G 2 를 다시 행한다. 구축한다.  ② 망 2G′ 우에서 련결성분 Trees = ,{ tr 1 tr 2 , (cid:34) , tr | Trees | } 를 탐색한다. 이때 탐색된 매 련결성분 trk 1( k ≤≤ | Trees |) ③ 고립정점에 대응하는 비계승클라스들을 모두 망 들만을 남긴다. 는 하나의 계승나무를 이룬다.  2G′ 에서 축출하여 계승계층구조 객체지향쏘프트웨어의 계승계층구조의 재분해방법 － 67 － ２．계승계층구조의 재분해알고리듬 계승계층구조의 재분해에서는 계승계층구조를 이루는 매 계승나무 ktr 들을 뿌리에 놓이는 클라스로부터 아래로 내려가면서 분해한다. 만일 무리짓기분석후 새로운 클라스 들을 원래의 상위클라스로부터 추출하면 분해된 상위클라스의 구조에 기초하여 해당한 부분클라스들을 분할하는 방법으로 응집도를 높인다. 재분해알고리듬은 잎정점들이 모두 처리되였을 때 끝난다.  rootV 는 계승나무 Trees root k 들의 뿌리정점들의 모임이고 k ≤≤ Trees trk root 1( V V |) = |) | | | (| root ktr 에서 뿌리정점을 표시한다. clas ∈ 는 계승나무 계승계층구조에 대한 재분해알고리듬은 다음과 같다.  입력: 계승망 2G′ 출력: 재구축된 계승망 for k = ,1 k ≤ | V root |, k 단계 １ 뿌리정점 clas RG2 ++ root k ∈ ∪ root k V root 에서 정의된 모든 실체들(속성들과 메쏘드들)과 그것 들사이의 관계를 메쏘드준위의 무게붙은 망으로 모형화한데 기초하여 클라스 root clas 를 k 재그룹화하기 위한 선행연구[1]에서 제안한 알고리듬에 따라 무리짓기분석을 진행한다.   clas 와 그것과 련결된 모든 릉들 kV 안의 clas 의 직접적인 부분클라스모임 clas 가 분해되지 않았다면 정점 걸음 １ 만일 을 망 root 2G′ 로부터 삭제한다. 다음 클라스 k 직접적인 부분클라스들을 뿌리정점들로 놓는다. root k root k sub V root = V root \ clas root k clas sub k 로 놓고 걸음 1을 반복한다. 로 한다. R k 단계 ２ 클라스 clas 로 표기한다. 걸음 ２ 클라스 clas 로부터 추출된 새로운 클라스들의 모임을 clas 가 무리짓기분석에서 분할되였으면 그것을 클라스추출대상으 kV 로, 재구축된 뿌리정점을 root k new new kV 의 매 클라스들은 추출되는 계승나무의 뿌리로 된다. 이때 추출된 계승나무들은 클라스 clas 에서 모임 R k kV 에 속하는 클라스들의 실례변수들을 창조한다. clas 에 뿌리를 둔 주계승나무에 의하여 호출될수 new R k 있다. 단계  ３ 뿌리정점 걸음 １ 뿌리정점 스들의 모임 new sub kV new ki 구조에 따라 clas 의 직접적인 부분클라스 root k new root k clas 가 클라스모임 kV 로 분해되면 새로 추출된 클라스들의 clas 들을 다음과 같이 분해한다. sub k clas 로부터 추출된 매개 새 클라스에 대응하는 새로운 부분클라 new k 로 된다. 를 창조한다. 그러면 root k sub km ∈ sub V V V = | | | | 모든 clas sub ∈ new V k sub , i ∈ ,2,1[ (cid:34) |, |] , M over i , M inv i ⊆ clas sub km 에 대하여 초기에 clas newsub ki = M over i ∪ M inv i 운 클라스 new clas ∈ ki new V k 로 놓는다. 여기서 clas 는 클라스 clas 로부터 추출한 새로 sub new ki 의 부분클라스를 표시한다. 그리고 inv iM 는 각각 클라스 root k over iM 와 new k new kV － 68 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 clas 에 들어있으면서 클라스 clas 에서 정의된 상위메쏘드들을 재정의하거나 호출 sub km 요청하는 메쏘드들의 모임을 표시한다. 이것들은 ∀ i , j ∈ ,2,1[ (cid:34) |, V |], i ≠ j 에 대하여 new k new ki M inv i ∩ inv M j , φ= 걸음 ２ clas RS k 을 만족시킨다. M φ= over i ∩ over M j ′ 를 재구축된 뿌리정점 RS k ( M inv root \ clas inv 1 ∪ =′ inv 2 M (cid:34) ∪∪ M M R k clas 의 부분클라스라고 하자. 그러면 inv over union union over inv 1 new | V k over root over union ( M M )  ∪ (cid:34) ∪∪ ) , over 2 M M M ∪ = \ | M over new | V k | 이며 이다. 여기서 M inv union = M over inv rootM 와 모두 포함하는 모임으로서 rootM 는 각각 계승되는 메쏘드들을 호출요청하거나 재정의하는 메쏘드들을 M 을 만족시킨다. clas M M ⊆ , . over root sub km 걸음  ３ clas sub km = clas sub km \ clas ′ bsu 1 k ∪ clas ′ bsu 2 k (cid:34) ∪∪ 라고 하자. 무리짓기분석을 inv root ( 시작할 때 sub clas 와 km clas bsu ki ′ 의 매 원소들과 clas RS k clas sub km + new V k 1+ clas ′ bsu new | Vk k ) ′ 를 무리로 놓는다. 즉 | 개의 무리가 있다. 계산하는데 모임 무리짓기알고리듬[1]에 따라 망에서 무리쌍들을 통합하기 전에 무게붙은 모듈도증분을 ′ 에 있는 부분클라스들을 집약시키지 않도록 하기 위하여 임의의 ⊆′ 이면 모듈도증분 qCom 에 대하여 Com 와 p pqQΔ 를 Com Com clas clas ⊆′ bsu ki bsu kj kV bsu , p q 무리 Δ pqQ 0= 으로 놓는다. 여기서 , qp ∈ ,2,1[ (cid:34) |, C |] , i , j ∈ ,2,1[ (cid:34) |, |] , p ≠ , iq ≠ j 이다. new kV 걸음 ４ clas 의 실체들을 재그룹화하여 얻어진 무리모임 C = Com { 1 , Com , (cid:34) , Com 2 } | C | sub km 에서 매 무리를 clas 로부터 추출된 새로운 클라스로 본다. 모든 , qp ∈ ,2,1[ |, C |] , i ∈ ,2,1[ (cid:34) |, new kV |] 에 대하여 Com 와 p qCom , clas 사이의 new ki sub km (cid:34) 계승관계를 다음과 같이 결정한다. · ⊆′ clas bsu ki clas ⊆′ RS k Com p 이면 Com 는 클라스 clas 를 계승한다. p new ki R k clas 를 계승한다. q · Com 이면 qCom 는 클라스 ′ 에서 부분클라스 RS k −C 개의 실례변수들을 창조한다. 걸음  ５  클라스 1| clas | 대하여 clas 로부터 추출된 새로운 클라스들에 sub km 단계  ４  만일 ∈ 단계 3을 반복한다. 잎정점준위까지 모두 분석하였을 때 재분해를 끝낸다. ,2,1[ clas 가 직접적인 부분클라스들을 가지면 kV (cid:34) m ∈ |, V , |] sub km sub k sub endfor  2G′ 를 갱신하여 재구조화된 계승계층구조 재구조화된 계승계층구조 RG2 를 얻는다. RG2 는 원천코드의 동작상의미를 보존한다. 계승계층구조에 서 하위클라스는 상위클라스의 메쏘드들을 호출하거나 재정의한다. 알고리듬의 단계 3에 서 보여준것처럼 재분해과정에 상위클라스의 메쏘드들을 호출하거나 재정의하는 메쏘드 clas 에 대해서나 클 들을 포함하는 하위클라스들의 계승관계는 재구축되는 뿌리클라스 라스추출재분해로 새로 생겨나는 모임 kV 의 클라스들에 대하여 정확히 유지되므로 프 로그람의 동작에 영향을 주지 않는다. 또한 계승계층구조의 재분해는 선행연구[1]에서 제 new R k 객체지향쏘프트웨어의 계승계층구조의 재분해방법 － 69 － 안한 메쏘드준위의 다중의존관계망우에서의 무리짓기분석에 기초하므로 계승계층구조의 모듈도를 증가시킨다. 객체지향쏘프트웨어의 계승계층구조의 클라스추출재분해를 위하여 무리짓기알고리듬 을 리용하는 한가지 방법을 제안하였다. 이 방법은 프로그람의 의미를 변경시킴이 없이 모듈도를 증가시킨다. 맺 는 말 참 고 문 헌 [1] 종합대학학보 정보과학, 66, 1, 41, 주체109(2020). [2] I. Moore; Proc. th11  Annu. ACM Sigplan Conf. Object-Oriented Program. Syst. Languages [3] M. Strekenbach; Proc. th18  Annu. ACM Sigplan Conf. Object-Oriented Program. Syst. Languages Appl., 31, 10, 235, 1996. Appl., 39, 10, 315, 2004. [4] Hamid Masoud; The Journal of Systems and Software, 93, 110, 2014. 주체109(2020)년 5월 5일 원고접수 A Method on Refactoring of Inheritance Hierarchies in Object-Oriented Software Kim Chung Hyok, Sin Chun Ok In this paper, we proposed a method on refactoring of inheritance hierachies using hierachical clustering in order to improve maintenance of object-oriented software. Keywords: refactoring, cohesion, coupling, clustering