김일성종합대학학보 정보과학 주체109(2020)년 제66권  제3호 상태공간외란관측기의 설계와 극소형고정날개무인기의 세로방향로바스트조종에로의 응용 윤정남, 허일건, 백수영 최근시기 첨단과학기술이 집약된 극소형무인기가 널리 연구개발되여 여러 분야에 응 용되고있다. 극소형고정날개무인기의 개발에서 중요한것은 동체의 물리적파라메터들과 항공력학 적파라메터에서의 불확정성이나 기류변화와 같은 외란에 대하여 로바스트성능을 가지는 조종기를 설계하는것이다. 무인기의 조종에서 전통적인 PID조종이나 LQ상태반결합조종과 같은 조종방법들이 널리 리용되고있지만 로바스트성개선을 목적으로 한 설계는 충분히 제기되지 못하였 다.[1, 3] 최근에 조종체계의 로바스트성개선을 위하여 외란관측기가 많이 리용되고있다. 그러나 주파수령역에서의 외란관측기설계문제는 많이 론의되였으나 상태공간에서는 충분히 연구되지 못하였다.[2] 한편 비행기의 조종은 크게 가로방향조종과 세로방향조종으로 나누인다. 가로방향조 종은 동체의 횡요각안정화 및 회전조종과 편요선회조종을 의미하며 이를 위한 조작량은 주날개의 뒤부분에 붙어있는 보조날개(aileron)의 편위각과 꼬리부분의 수직안정판에 돌쩌 귀를 통하여 붙어있는 방향타(rudder)의 편위각이다. 또한 세로방향비행에서 조종해야 할 량은 비행기의 기수들림자세(종요각)와 비행고도 및 공속(공기에 대한 비행기의 상대속 도)이며 이를 조종하기 위한 조작량은 꼬리부분의 수평안정판에 돌쩌귀를 통하여 붙어있 는 승강타(elevator)의 편위각과 추진기의 가스조절변열림비(throttle)이다.[1, 3] 여기서는 세로방향조종만을 보기로 한다. 그림 1에 비행기의 세로방향운동특성량들과 자리표관계를 보여주었다. 그림 1. 비행기의 세로방향운동특성량들과 자리표계 Ex 와 Bx 와 그림 1에서 Bz 는 동체자리표계에서 기수방향과 비행기바닥으로 향한 자리표축 이며 Ez 는 지구관성자리표계에서의 해당한 자리표축이다. 그리고 u 와 w 는 각각 동 체에서의 전진방향(수평) 및 아래방향(수직)으로의 속도이고 V 는 공속, θ 는 종요회전각, γ 는 비행경로각, M 은 종요방향회전모멘트이며 eδ 는 승강타의 편위각을 표시한다. － 96 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 또한 tδ 는 가스조절변열림비로서 그것에 의하여 만들어진 추진력은 직접 Bx 축방향 eδ 의 정의 방향으로의 편위는 비행동체의 부의 으로 작용하여 비행기동체를 추진시키며 방향으로의 종요회전모멘트를 발생시킨다. 그림 1에서 보여준 상태변수들로 표시된 극소형무인기의 세로방향비행동력학의 선형 화된 상태공간모형은 다음과 같이 얻어진다. (cid:5) x = = (cid:5) u ⎤ ⎡ ⎥ ⎢ (cid:5) w ⎥ ⎢ ⎥ ⎢ (cid:5) q ⎥ ⎢ (cid:5) θ ⎥ ⎢ (cid:5) ⎥ ⎢ h ⎦ ⎣ u Z u M X ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ sin ⎢ ⎢ ⎣ u 0 X w Z w M w 0 X q Z q M q 1 0 * θ * θ − g cos − g sin 0 0 * cos θ + * u + * w sin * θ 0 0 0 0 0 ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ q u w ⎤ ⎡ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ ⎥ ⎢ θ ⎥ ⎢ ⎥ ⎢ ⎦ ⎣ h + 0 Z e δ M e δ 0 0 ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ X t δ 0 0 0 0 ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ * θ − cos * θ δ ⎡ e ⎢ δ ⎣ t ⎤ ⎥ ⎦ (1) 여기서 X , Z , M 은 무차원화된 안정곁수들이고 웃첨자 《*》은 동작점에서 선형화되였 을 때의 공칭상태값이다. 또한 q 는 종요각속도이고 g 는 중력각속도이다. 우리가 개발한 극소형무인기의 크기와 동체 및 날개모양, 질량, 각 축방향관성모멘트 등과 관련된 항공력학적파라메터(안정도함수와 조종도함수)에 대하여 균형비행조건을 얻 어내고 마중각 α 에 관한 식으로 변형하면 다음과 같은 상태공간모형이 얻어진다. (cid:5) ⎡ ⎤ u ⎢ ⎥ (cid:5) α ⎢ ⎥ (cid:5) ⎢ ⎥ q ⎢ ⎥ (cid:5) θ ⎢ ⎥ (cid:5) ⎢ ⎥ h ⎣ ⎦ = ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ − 24.0 − 12.0 28.10 002.0 − 24.18 02.1 8.9 − 000.0 01 0 0 − 48.2 0 24.3 − 00.1 0 0 − 000.0 1 − 80.24 0 80.24 − 04.0 − 18.0 + − 32.1 0 0 0 0 ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ u ⎡ ⎤ ⎢ ⎥ α ⎢ ⎥ ⎢ ⎥ q ⎢ ⎥ θ ⎢ ⎥ ⎢ ⎥ h ⎣ ⎦ ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ 0 0 0 0 36.3 ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ 0 0 ⎡ δ e ⎢ δ ⎣ t ⎤ ⎥ ⎦ (2) 웃식에서 보여준 모형은 균형비행을 가정하고 일정한 고도에서 추정 또는 동정의 방 법으로 얻어진 비선형모형을 공칭상태에서 선형화하였을 때의 파라메터값들을 포함하고 있다. 그러나 실제적인 비행시에는 고도와 속도에 따라 이 값들이 변하거나 불확정성을 가진다. 그러므로 일반적으로 상태공간모형을 다음과 같은 선형시변체계로 가정하고 조종문 제를 론의한다. B + dW 는 고려하지 못한 비선형항과 기상조건으로부터 받는 작용힘 등을 포함하는 외란 여기서 항(바람, 돌풍, 막흐름)으로서 이것은 비행자세유지에 심각한 영향을 주게 된다. (3) )( dWtut )( )( xt 세로 세로 세로 )( t )( t A = + δ 세로(cid:5) x 이로부터 론문에서는 극소형고정날개무인기의 세로방향조종에서 상태공간모형에 기초한 상태반결합조종고리와 외란관측기에 의한 로바스트조종고리를 결합한 로바스트 상태반결합조종의 설계와 세로방향조종의 로바스트성을 개선하기 위한 한가지 방법을 제안한다. １．세로방향최량상태반결합조종 항법체계에 의하여 상태변수들이 모두 추정된다고 가정하면 식 (3)에 대한 공칭모형 t )( (4) t )( = + xA p 세로 tuB )( δ p 세로(cid:5) x 상태공간외란관측기의 설계와 극소형고정날개무인기의 세로방향로바스트… － 97 － 에 대하여 2차평가함수 ∞ J = ( T x 세로 Qx 세로 + T u Ru δδ ) dt , = QQ T ≥ 0 , = RR T > 0 ∫ 0 을 최소화하는 다음과 같은 LQ상태반결합조종을 설계할수 있다. F 세로x 여기서 세로F 는 다음과 같은 리까찌대수방정식 u −=δ 세로 (5) T PA p + PA p − PB 세로 T1 − BR 세로 QP + = 0 을 만족시키는 정의정값대칭행렬 P 로부터 얻어진다. F 세로 −= T1 BR 세로 P 이 조종법칙은 식 (4)에서와 같은 공칭모형에 대하여 성립하는 조종법칙이며 실제적 인 비행시에는 비행고도와 속도에 따라 동체의 물리적파라메터와 항공력학적파라메터가 달라지게 되며 바람외란이 심하게 작용하면 식 (5)에 의하여 설계된 조종체계는 조종특 성을 원만히 발휘하지 못하게 된다. ２．외란관측기에 의한 로바스트조종 모형불확정성과 외란이 존재하는 대상모형에 대하여 로바스트성을 보장하는 가장 직 접적인 수법은 불확정성과 외란에 의하여 형성되는 종합적인 등가외란을 추정하여 보상 하는것이다. 이를 위해 외란을 받는 조종대상의 상태공간모형을 고찰하자. = uB p ed 는 비선형항과 모형파라메터불확정성과 관련한 항, 바람외란항들을 종합적으로 (6) 세로(cid:5) x xA p 세로 + + d δ e 여기서 고려한 등가외란이다. 로바스트설계의 목적은 이 종합등가외란 x A A d = − ) ( p 세로 e + ( B p − B 세로 du ) + (7) 를 보상함으로써 체계가 외란을 받지 않는 선형공칭모형과 같은 동작을 하도록 하는것 이다. 이제 적당한 차단주파수의 저역통과려파기를 리용하여 이 외란을 다음과 같이 추정 하자. −= 여기서 L 은 외란관측기의 증폭도행렬로서 L− 은 안정이여야 하고 보통 대각행렬로 선정 하며 이때 그 고유값의 절대크기는 저역통과려파기의 대역을 결정한다. (8) uLB e xLA e −= Ld + − − + e e e e ˆ dL (cid:5) xL (cid:5) ˆ d ˆ dL 한편 식 (8)을 다음과 같이 변형할수 있다. 여기에 새로운 상태변수 z 위한 다음과 같은 상태공간모형을 얻는다. (cid:5) ˆ d e (cid:5) xL − = ˆ d −= ˆ dL − 2 xLxL + 2 e 를 도입하면 웃식으로부터 외란추정량의 계산을 (9) − xLA e − uLB e e − Lx −= Lz − 2 xL − xLA e − uLB e (cid:5) z ˆ d ⎧ ⎪ ⎨ ⎪⎩ e z += Lx (10) － 98 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 이렇게 추정된 종합등가외란을 리용하여 식 (5)의 LQ상태반결합조종법칙에 외란보상 을 위한 항을 다음과 같이 보충할수 있다. ˆ ed dK + F 세로 u δ −= 여기서 (11) x 세로 dK 는 외란추정량으로 실제외란을 상쇄시키기 위하여 조종입력들이 얼마만한 량 을 더 내야 하는가를 결정하는 외란보상곁수행렬로서 여러가지 방법으로 결정할수 있다. 식 (6)으로부터 알수 있는바와 같이 식 (10)으로 추정된 외란은 상태와 같은 차원수 이므로 입력작용 δu 에 의해서 외란이 직접 보상될수는 없다. 그것은 상태공간모형에 기초한 외란보상방법에서는 모든 상태에 관한 외란들을 독 립적으로 보상할수 있는 충분한 개수의 조종입력이 일반적으로는 보장되지 않기때문이다. 다시말하여 입력행렬 pB 가 일반적으로는 비가역이기때문이다. n 을 가지며 또한 rank 세로 ( B <) n 그러나 특수한 경우에 출력개수가 입력개수와 같은 경우에는 외란이 출력에 주는 영 1−−= B p 향을 없애기 위한 보상이 가능하다. 이 경우에 행렬 pB 가 가역이므로 간단히 K d 로 구할수 있지만 식 (1) 또는 (2)에서 알수 있는바와 같이 극소형고정날개무인기에서는 이 조건이 성립하지 않는다. 한편 좀더 일반적인 방법으로서 거짓역행렬 K d −= ( T BB p p ) − T1 B p (12) 를 리용할수도 있다. 이 방법은 특정한 상태변수위치에 작용하는 외란에 대하여 효과적 이지만 조종고리의 일반적인 위치들에 작용하는 외란들에 대해서는 완전한 억제담보가 없다. 한편 외란의 영향을 주목하는 상태변수들에서만 없앨것을 목적으로 하여 상태공간 모형의 출력행렬을 pC = 00001 ⎡ ⎢ 10000 ⎣ ⎤ ⎥ ⎦ 과 같이 선택하여 주목하는 상태변수들(공속 u 와 비행고도 h )만을 출력으로 뽑아낸다 면 이 출력들에서 외란의 영향을 완전히 없앨수 있다. 이를 위하여 dK 를 다음과 같이 선정한다. 1 − K d AC ( [ −= p p − FB p 세로 ) − 1 B p ] AC ( p p − FB p 세로 1 − ) (13) 식 (13)은 상수외란을 가정하고 정상상태에서 출력에 들어있는 실제외란의 성분이 추정외란에 의하여 완전히 보상되여야 한다는 조건으로부터 얻어진것이다.[1] 선행연구[3]에서는 추정된 외란을 식 (13)을 리용하여 보상하는 방법을 리용하였다. 그러나 이 방법은 해당 변수에 대한 정상상태에서의 외란제거를 목적으로 하고있으므로 과도과정에서의 외란제거기능은 충분히 발휘하지 못한다. 한편 식 (6)을 무인기에 대하여 구성할 때 돌풍외란은 자세각도를 포함한 모든 상태 변수들에 다 작용하는것이 아니라 실제적으로는 회전모멘트차원의 변수들에 기본적으로 작용하므로 만일 회전모멘트차원에서의 외란을 보상하기만 하면 정상상태에서의 외란의  영향은 자동적으로 제거된다. 그러므로 우리는 추정된 외란을 식 (12)를 리용하여 보상함으로써 외란제거의 효과 가 정상상태와 과도과정에서 모두 나타나도록 하였다. 상태공간외란관측기의 설계와 극소형고정날개무인기의 세로방향로바스트… － 99 － ３．모의실험 및 결과분석 우선 제안된 극소형고정날개무인기의 세로방향로바스트조종에 대한 Simulink모의를 진행하였으며 그 모의결과는 그림 2와 같다. 모의에서 식 (11)의 외란보상곁수행렬로 식 (12)에서와 같은 행렬을 리용하였다. 그림 2. 로바스트조종고리를 가진 경우(제안한 방법)와 가지지 않은 경우(선행한 방법)의 모의결과 ㄱ) 공기속도, ㄴ) 마중각, ㄷ) 종요속도, ㄹ) 종요각, ㅁ) 고도 모의실험결과로부터 10s인 시각에 돌풍이 가해진 경우를 가상한 모의에서 식 (11)에 의한 로바스트조종은 상용LQ반결합조종만을 리용한 경우보다 상태변수들이 균형비행상 태로부터의 리탈을 절반이하로 줄이였다는것을 알수 있다. 다음 비행모의도구인 XPlane을 리용한 비행조종실험을 진행하였다. 식 (11)에 의한 조종 은 XPlane과 UDP통신규약으로 련결된 Simulink환경에서 실현하였다. 이때 plane-maker로 빚 어진 날개길이 2.4m, 익현길이 0.6m인 극소형무인기의 균형비행상태에서의 타조작에 대 한 응답자료에 기초하여 동정수법을 리용한 항공력학적파라메터들의 동정과 선형화과정 을 거쳐서 식 (2)의 상태공간모형을 얻었다. 실험을 통하여 바람속도가 10m/s, 돌풍이 8m/s, 막흐름지수가 1로 설정된 대기환경조 건에서 외란보상이 있는 경우는 없는 경우에 비하여 마중각, 종요각, 비행고도에서의 편 차가 평균적으로 2/1 이하로 감소되였다는것을 확증하였다. 맺 는 말 극소형고정날개무인기에서 물리적 및 항공력학적파라메터들의 불확정성과 외란에 대 한 억제성능을 가진 로바스트세로방향비행조종을 실현하기 위하여 우선 상태공간모형에 기초한 외란관측기의 설계방법을 제기하고 다음 그것을 LQ최량상태반결합조종고리와  결합하여 로바스트조종체계를 구성하는 방법을 제안하였으며 Simulink와 XPlane을 리용 한 모의실험을 통하여 조종방법의 효과성을 검증하였다. － 100 － 종합대학학보 정보과학 주체109(2020)년 제66권 제3호 참 고 문 헌 [1] 윤정남; 로바스트운동조종(외란관측기응용), 고등교육도서출판사, 36～72, 주체108(2019). [2] Yun Jong Nam et al.; IEEE Transactions on Control Systems Technology, 22, 2, 809, 2014. [3] J. Smith et al.; Journal of Intelligent & Robotic Systems, 88, 2, 329, 2018. 주체109(2020)년 5월 5일 원고접수 A Design of State Space Disturbance Observer and Its Application to Longitudinal Robust Control of a Micro Fixed Wing UAV Yun Jong Nam, Ho Il Gon and Paek Su Yong We proposed a robust control system that consisted of LQ optimal state feedback control loop and state space disturbance observer inner loop in order to eliminate the effects of physical and aero dynamical parameter variation and atmospheric disturbance on a micro fixed wing UAV. Keywords: flight control, disturbance observer, longitudinal control