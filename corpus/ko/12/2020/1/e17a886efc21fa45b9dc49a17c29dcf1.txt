김일성종합대학학보 정보과학 주체109(2020)년 제66권  제1호 PTZ카메라를 리용한 자동화된 강의기록체계실현의 한가지 방법 김정혁, 손대성 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다.  《과학기술과 경제의 일체화를 다그치고 나라의 경제를 현대화, 정보화하는데서 과학 기술부문이 주도적인 역할을 하도록 하여야 합니다.》 강의기록은 직결식학습과 원격교육에서 중요한 역할을 한다. 대부분의 강의들은 사 람이 촬영하거나 혹은 고정카메라를 리용하여 기록된다. 론문에서는 원격강의봉사를 위하여 PTZ(Pan Tilt Zoom)카메라를 리용한 자동적인 강 의기록체계의 한가지 방법을 제안하였다. 체계는 세가지 단계로 나누어 동작한다.  첫째로, 강의자의 위치를 검출하는 단계이다.(전처리공정)  둘째로, 대상의 움직임을 판정하는 단계이다.  셋째로, 추적결과에 따라 PTZ카메라를 조종하는 단계로서 추적대상이 항상 카메라촬 영화면의 중심에 놓이도록 한다. １．원격강의실에서 강의기록 강의기록은 원격학습과 전자학습에서 리용되는 매우 중요한 기능이다. 카메라는 강 의자와 설계된 슬라이드, 필기자료, 지어 강의에 참가한 학생들과 같은 다매체내용물을 채집하는데 리용되는 일반적인 기록장치이다.[1] 일반적으로 두가지 형태의 카메라 즉 고정 및 능동형 카메라들이 리용된다. 매 카메 라는 강의기록의 특정한 목적에 따라 선택되여 리용된다. 고정카메라들은 보통 강의자와 설계된 슬라이드 등을 기록하는데 사용된다. 만일 고정카메라를 리용하여 강의를 기록한 다면 강의자는 계속 앉아있거나 제한된 령역안에 서있어야 하며 그렇게 하지 않으면 카 메라의 시야(FOV: Field of View)밖에 있게 된다. 때로는 강의의 모든 측면들을 기록하여 보다 완벽하게 만들기 위하여 둘 또는 그 이상의 고정카메라들을 리용할수 있다. 비록 고정카메라들은 강의기록을 위하여 쉽게 설치하고 조작할수 있지만 일부 문제 점들에 부닥칠수 있다. 실례로 각이한 카메라들로부터 받은 동영상들을 결합하고 편집을 진행하려면 추가적인 노력을 들여야 한다. 또한 배경이 변하지 않고 고정격식화된 동영 상을 볼 때 학생들은 인차 싫증을 느낄수 있으며 동영상화면안에서 본문이나 필기자료를 인식하는것도 힘들수 있다. 고정카메라의 결함을 극복하기 위하여 PTZ카메라들이 강의기록에 리용된다. PTZ카 메라는 상하/좌우/확대축소기능을 가지고있는것으로 하여 넓은 지역을 촬영할수 있으며 높은 해상도동영상을 채집하는데 리용될수 있다. PTZ카메라들의 회전은 기록되는 동영상 들을 더 실감있게 만들며 또한 고정카메라와 협동하여 보다 더 정교한 기능을 가진 동영 상을 만들어낼수 있다. 이러한 2중카메라체계에서 추적목표는 보통 강의자이며 고정카메 PTZ카메라를 리용한 자동화된 강의기록체계실현의 한가지 방법 － 59 － 라의 화상에서 검출된다. 그다음 PTZ카메라를 조종하여 강의자를 따라가면서 높은 화질 의 동영상을 계속 채집한다. 움직임에 대한 판정의 결과는 운동하는 목표의 실시간적인 추적에 직접적인 영향을 준다. 따라서 적합한 판정알고리듬을 선택하고 리용하는것은 중요한 문제로 된다.[2] 정 지된 배경에서 운동하는 목표를 추적하는 방법에는 주로 프레임사이 차분법(Meanshift방 법, Camshift방법), 배경제거법(Background Subtraction), 빛흐름법(Optical Flow)이 있으며 각 각 우점과 부족점을 가지고있다. Meanshift방법(평균밀기방법)에서는 최대화소밀도를 가지는 창문을 찾고 그 무게중심 의 위치이동을 판정한다. 이 방법은 계산량이 작고 간단하여 쉽게 실현할수 있으며 간단 한 배경조건에서 빠른 속도로 목표를 정확히 추적할수 있다. 그러나 목표식별과 추적을 진행할 때 탐색창문의 크기가 고정불변하기때문에 목표의 치수가 변화될 때 필요한 목표 정보에 대한 갱신을 진행할수 없으며 알고리듬의 믿음성을 떨어뜨리고 지어는 목표를 잃 어버릴수도 있다. Camshift방법(련속적응평균밀기방법)에서는 Meanshift알고리듬의 기초우에서 동적으로 목표정보를 갱신할수 있으며 벡토르연산방법을 리용하여 목표의 치수와 방향변화를 예측 하고 자동적으로 탐색창문의 크기를 조절할수 있다. 그러나 Camshift방법은 색갈특징을 리용하여 목표를 묘사하기때문에 색갈에 민감하게 반응하고 주위환경의 영향을 쉽게 받 으며 가리움 등의 간섭들로 하여 추적결과가 변화된다. 배경제거방법은 움직이는 대상들 은 배경과 다른 색을 만든다는 가정에 기초하여 목표의 움직임을 추적하는 간단한 방법 이지만 외부환경의 변화에 대하여 매우 민감하고 간섭에 대한 저항능력이 낮다. 빛흐름방법은 목표물 혹은 카메라의 운동에 의해 일어나는 2개의 련속화면들사이의 겉보기움직임패턴들에 대한 분류를 진행하는 방법으로서 이 방법을 리용하면 동적인 배 경변화조건에서도 목표의 완전한 이동정보를 얻을수 있지만 계산량이 비교적 많다. ２．화상처리방법을 리용한 PTZ카메라의 조종 원격강의실에서 카메라는 중심뒤홀에 설치하며 청중의 눈높이보다 약간 높은 위치에 설치해야 강의자와 칠판정보 등을 기록하는데 적합하다.  원격강의실의 강의기록환경을 그림 1에 보여주었다. 카메라 강의자 교탁 화면 학생 그림 1. 원격강의실의 강의기록환경 － 60 － 종합대학학보 정보과학 주체109(2020)년 제66권 제1호 PTZ카메라조종체계의 흐름도를 그림 2에 보여주었다. 전처리 강의자검출 강의자위치 동영상입력 판정 강의자추적 강의자 정보추출 카메라동작 동영상출력 그림 2. PTZ카메라조종체계의 흐름도 그림 2에서 보여준것처럼 체계는 전처리, 움직임판정, 카메라동작의 3단계로 구성된다. １）전처리 전처리단계에서는 강의자를 검출하고 현재의 위치를 확정한다. 검출결과는 카메라의 상태를 초기화하는데 도움을 준다. 이때 강의실의 앞에는 오직 한사람이 서있고 그 사람 이 강의자라고 가정한다. ２）움직임판정 적합한 움직임판정알고리듬을 적용하여 강의자의 움직임상태를 판정하고 중심점의 위치이동정보를 추출해내고 이동거리를 계산한다. ３）PTZ카메라동작 움직임판정을 통하여 강의자의 위치이동정보를 얻으면 강의자가 카메라의 중심에 놓 이도록 카메라를 조종한다. 카메라를 조종하는 규칙은 다음과 같다.  ① 카메라를 초기의 위치(실례로 교탁방향)에로 회전시킨다.  ② 강의자가 미리 설정된 허용범위를 벗어나지 않는가를 판정한다.  ③ 강의자의 위치이동이 허용범위를 벗어나면 이동량에 대응하여 일정한 각도만큼 카메라를 회전시킨다. 카메라의 회전은 상사식카메라인 경우 따로 설치한 RS485모선을 리용하여 조종할수 있으며 망카메라인 경우 망통신규약에 따라 조종할수 있다.  ④ ②, ③단계를 반복하면서 강의기록을 계속 진행한다. PTZ카메라를 리용한 자동화된 강의기록체계실현의 한가지 방법 － 61 － ３．실 험 결 과 론문에서는 공개원천콤퓨터화상처리서고인 OpenCV를 리용하여 Camshift방법과 빛흐 름법에 대한 대비고찰을 진행하였다. １）Camshift방법 Camshift방법을 리용한 움직임추적결과를 그림 3에 보여주었다. 그림 3. Camshift방법을 리용한 움직임추적결과 그림 3에서 보여준것처럼 단순배경조건에서는 비교적 잘 동작하지만 복잡한 배경조 건에서는 쉽게 목표를 잃어버리며 목표의 색갈구성이 복잡한 경우 더욱 심하게 나타난다. 또한 추적할 령역을 미리 선택해야 하기때문에 새로운 목표가 출현하는 경우 능동적으로 대처할수 없다. ２）빛흐름법 빛흐름법은 일부 가정들에 기초하여 동작한다.  ① 련속프레임들사이에서 대상의 화소세기는 변하지 않는다.  ② 린접화소들은 류사한 움직임을 가진다.  첫 프레임안의 1개 화소세기 tyxI ), ,( 를 론의하자. 여기서 새로운 차원수로서 시간 이 추가되는데 이전에는 정지화상들만을 가지고 연구하였기때문에 시간이 필요없었다. 화소가 dt시간후의 다음번 프레임에서 거리 ( dx , dy ) 만큼 이동하였다면 그것들의 화소 세기는 변함이 없기때문에 다음과 같이 표시할수 있다.  + tyxI ,( ), tdy , xI ( dx , 식 (1)에서 오른변의 테일러합렬근사화를 진행하고 일반항들을 제거한 후 dt로 나누 (1) dt = + + y ) 면 다음과 같은 빛흐름방정식을 얻을수 있다. 여기서 x I , 들은 화상경사도들이고 x I y 의 속도이다. × I ∂ x ∂ VI x 0 + = × + dy dt I I ∂ y ∂ VI y dx dt + tI 는 시간에 따르는 경사도이며 I ∂ t ∂ 0 = + y t (2) x VV , 들은 x, y방향 y 방정식의 풀이를 얻기 위하여 실험에서는 Lucas－Kanade방법을 적용하였으며 OpenCV － 62 － 종합대학학보 정보과학 주체109(2020)년 제66권 제1호 함수 calcOpticalFlowPyrLK()를 리용하였다. 또한 일정한 시간간격으로 함수 goodFeatures ToTrack()를 반복적용하여 추적목표의 특징점들을 실시간적으로 갱신할수 있도록 하였다.  빛흐름법을 리용한 움직임추적결과를 그림 4에 보여주었다. 그림 4에서 보여준것처 럼 배경조건에 관계없이 움직이는 목표를 실시간적으로 추적할수 있으며 주기적으로 특 징점들을 갱신하는 기능을 첨부하여 새로운 목표가 출현하는 경우에도 제때에 대응하여 목표를 계속 추적할수 있다. 그림 4. 빛흐름법을 리용한 움직임추적결과 움직임추적알고리듬들의 성능비교결과를 다음의 표에 보여주었다. 표．움직임추적알고리듬들의 성능비교결과 지 표 목표지정방식 배경조건 목표의 색갈 움직임량 측정정확도 계산시간 Camshift 수동 단순 단순 단순배경(100%) 복잡배경(50%미만) 5ms미만 빛흐름법 자동 의존성이 거의 없다. 의존성이 거의 없다. 단순배경(100%) 복잡배경(100%) 20ms미만 실험결과들로부터 교원의 움직임을 자동추적하면서 강의기록을 진행하기 위하여 빛 흐름방법을 리용하는것이 보다 더 효과적이라는것을 알수 있다. 인공지능적인 화상처리방법을 적용하여 강의자를 자동추적하도록 PTZ카메라를 조종 하는 방법을 제안함으로써 실시간원격강의 및 록화형원격강의봉사를 보다 편리하고 합리 적으로 진행할수 있게 하였다. 또한 강의봉사효률을 높이고 학생들의 강의인식률을 한계 단 높일수 있게 하였다. 맺 는 말 참 고 문 헌 [1] 종합대학학보(자연과학), 58, 2, 42, 주체101(2012). [2] Hsien-Chou Liao et al.; International Journal of Applied Science and Engineering, 13, 1, 1, 2015． 주체108(2019)년 11월 5일 원고접수 PTZ카메라를 리용한 자동화된 강의기록체계실현의 한가지 방법 － 63 － An Implementation Method of Automated Lecture Recording System with PTZ Camera Kim Jong Hyok, Son Tae Song In this paper, we propose a method to control PTZ camera so that it may automatically track the lecture through artificial intelligence image processing. And we confirm its efficiency through the experiment. Keywords: distance lecture, video recording, object tracking