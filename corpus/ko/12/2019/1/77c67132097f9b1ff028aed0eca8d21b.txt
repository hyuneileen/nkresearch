김일성종합대학학보 정보과학 주체108(2019)년 제65권  제1호 구조광원을 리용한 ３차원재구성의 한가지 방법 김경석, 오영근 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《다른 나라의 선진과학기술을 우리 혁명의 요구와 우리 나라의 실정에 맞게 연구 도입하여 우리의것으로 만들면 그것도 주체적립장에서 과학기술을 발전시키는것으로 됩니다.》(《선집》 증보판 제22권 24페지) 구조광원기술은 다른 3차원재구성방법들에 비하여 제작원가가 눅고 높은 정확도를 보장하는것으로 하여 널리 리용되고있다. 론문에서는 구조광원기술의 대표적방법들인 시간다중화방법과 공간린접법의 우점들 을 결합하여 새로운 혼합패턴을 제안함으로써 3차원재구성속도를 높이도록 하였다. １．혼합패턴설계 구조광원기술[1]은 패턴설계방식에 따라 2개 부류 즉 시간다중화방법(TM)과 공간린 접법(SN)으로 나눈다. 시간다중화방법은 일정한 시간동안 패턴렬을 련속적으로 투영하는 방식인데 그중 대 표적인것들이 2진부호패턴렬, N－배렬부호패턴렬, 회색부호패턴렬, 위상이동패턴렬들이다. 시간다중화방법은 부호화가 매 화소별로 독립적으로 진행되는것으로 하여 복호화알고리 듬이 단순하고 정확도가 높은 재구성결과를 얻을수 있다. 그러나 이 방법은 부호화공정에 서 많은 시간이 걸리게 되므로 높은 측정속도와 실시간성을 보장하여야 하는 분야에서는 리용되지 못한다. 공간린접법은 1개의 잘 설계된 패턴을 투영한다. 공간린접법[1]은 동적인 대상들에서 리용할수 있으나 해상도와 정확도가 낮다. 론문에서는 시간다중화방법과 공간린접법의 우점들을 결합하여 혼합패턴을 구성하였 다. 이 혼합패턴은 3단계 시누소이드위상이동줄무늬패턴과 준우연반점패턴을 결합하였다. 줄무늬패턴들중의 하나인 시누소이드패턴은 광학식3차원주사에서 널리 리용된다.  시누소이드패턴은 수직패턴인 경우 다음식으로 결정된다. ,( yxFk ) = AC + 2 fx π + k = ,2,1 , N (1) L ⎛ cos ⎜ ⎝ 2 k π N ⎞ , ⎟ ⎠ 여기서 A는 진폭, C는 스칼라량, f는 줄무늬패턴의 주파수, (2πk/N)는 N개의 서로 다른 위상이동들이다. 일반적으로 투영기는 이 패턴들을 대상에 투영하며 카메라는 이 패턴들을 하나씩 순 서대로 얻는다. 많은 경우 재구성속도를 높이기 위해 3단계 위상이동방법이 리용된다. 이 때의 식은 다음과 같다. 구조광원을 리용한 3차원재구성의 한가지 방법 － 65 － ,( yxFk ) = AC + 2 fx π + k = 3,2,1 (2) ⎛ cos ⎜ ⎝ 2 k π 3 ⎞ , ⎟ ⎠ 카메라로부터 얻어진 화상들은 다음과 같이 모형화할수 있다. k 2 π 3 vuI ,( A vuI ,( k vu ,( vu ,( cos + + = C ) ) I ) ) ⎡ φ ⎢ ⎣ ⎤ ⎥ ⎦ (3) ,( vuI A IC vu ,( ) α= ,( ) Avu (4) ) = α Cvu )[ ,( + β vu ,( )] (5) 웃식들에서 투영기화상과 카메라화상의 자리표계를 구별하기 위하여 카메라화상에 와 대하여서는 (x, y), 투영기화상에 대하여서는 (u, v)를 리용하였다. 식 (4), (5)에서 vuβ ,( 는 대상의 매 점에서의 반사능과 환경빛함수이다. vuα ,( ) ) 식 (3)으로 모형화된 3개의 카메라화상들에서의 화소밝기를 리용하여 카메라와 투영 기사이의 대응관계를 반영한 매 화소의 위상을 다음의 식으로 계산한다. ,( vuφ ) = arctan 3 ⎡ ⎢ ⎣ ,( vuI 2 ) ,(2 vuI − 3 ) ,( vuI − 1 ,( ) vuI − 2 ) ,( vuI 1 ) ⎤ ⎥ ⎦ (6) 식 (6)으로부터 시누소이드그라프에서 주목하는 화소의 위상을 구할수 있다.  vuφ ,( 사이의 값을 가지는 상대위상으로 된다. 2/~2/ π π− 는 ) 준우연반점패턴을 리용하여 현재 고찰하는 화소가 시누소이드그라프에서 어느 주기 에 속하는가를 결정한다면 이 주기값과 식 (6)으로부터 얻어지는 상대위상값을 결합하여 현재 화소의 절대위상값을 계산할수 있다. 식 (6)에서 볼수 있는것처럼 위상계산에서는 배경밝기를 나타내는 가 무시되 는 상수밝기값이 되여야 할 요구가 제기 ,( vu IC ) 게 된다. 이 특성으로부터 줄무늬패턴의 IC ,( vu ) 되지 않으며 결과 준우연반점패턴과 같은 일부 공간린접법패턴들이 시누소이드패턴에 결 합되여도 위상계산에 영향을 주지 않게 된다. 준우연반점패턴에 대한 복호화는 카메라화상과 투영기화상사이에서 화상쪼각별 대응 관계를 구하는 방식으로 진행한다. 그림 1에서 보여준것처럼 반점패턴은 준우연생성기를 리용하여 생성되였다. 그림 1. 시누소이드 줄무늬패턴과 2진반점패턴 2진반점패턴은 다음의 규칙에 의하여 생성된다. － 66 － 종합대학학보 정보과학 주체108(2019)년 제65권 제1호 • 반점크기 : 매 반점패턴들은 K × K 령행렬이며 K는 투영기와 카메라의 해상도에 의 해 결정된다. • 반점밀도 : 3×3점들의 령역에서 오직 하나의 점만이 반점패턴이다. • 반점분포 : 반점패턴들은 우연적으로 분포되며 어느 두 반점패턴도 린접한 8개 점 들중에 놓이지 않는다. 카메라로부터 얻어진 화상의 화상쪼각들과 투영기화상의 화상쪼각들에 대하여 정규 화된 교차상관법을 적용하여 화상쪼각들사이의 류사도를 계산한다. 같은 크기의 2개의 화상쪼각 즉 목표화상쪼각 f와 참조화상쪼각 g가 주어졌을 때 류 사도[2]는 다음과 같이 계산된다. (γ , gf ) = (7) ∑ , vu ∑ , vu ( ,( vuf ) − vugf ,( )( ) − g ) ( ,( vuf ) − f ) ,(( vug ) − g ) 2 2 ∑ , vu 여기서 f 와 g 는 두 화상쪼각들의 평균밝기이다. 카메라로부터 얻어진 화상의 매 쪼각들에 대하여 류사도가 가장 큰 참조화상의 쪼각 들을 대응시킨다. 이 대응관계로부터 현재 화상쪼각이 시누소이드패턴에서 몇번째 주기에 놓이는가를 결정한다. 줄무늬패턴과 반점패턴을 결합한 3개의 혼합패턴화상들은 그림 2와 같다. 0=위상 /32π=위상 /34π=위상 그림 2. 줄무늬패턴과 반점패턴을 결합한 3개의 혼합패턴화상들 ２．혼합패턴에 의한 ３차원재구성 구조광원체계에서는 먼저 카메라－투영기체계에 대한 교정을 진행한다. 다음으로 카 메라화소와 투영기화소들사이의 대응관계를 결정하고 그에 기초하여 3각측량법을 적용하 여 화소의 깊이를 계산한다. 앞에서 제안한 혼합패턴을 리용하면 카메라의 매 화소에 대한 절대위상을 계산할수 있다. 이 절대위상은 투영기의 렬번호로 해석할수 있으며 결과 투영기의 렬과 카메라의 화소사이의 대응관계들이 얻어지게 된다. 여기에 적용하는 3각측량법은 직선－평면3각측 량법이다. 혼합패턴에 의한 3차원재구성은 다음의 단계로 진행된다. 구조광원을 리용한 3차원재구성의 한가지 방법 － 67 － ① 카메라와 투영기에 대한 교정을 진행하여 카메라와 투영기의 내외부파라메터를 결정한다. ② 대상에 혼합패턴렬을 투영하고 카메라로 매 혼합패턴이 투영된 대상에 대한 화상 들을 얻는다. 이때 혼합패턴개수는 3개이다. ③ 카메라의 매 화소에 대하여 식 (6)과 (7)을 리용하여 줄무늬패턴의 절대위상을 계 산하며 카메라의 화소와 투영기의 렬사이의 대응관계를 결정한다. ④ 카메라의 화소와 투영기의 렬사이의 대응관계에 기초하여 직선－평면3각측량법을 적용하여 카메라의 매 화소의 깊이를 계산한다. ３．실 험 결 과 구조광원체계는 투영기(ACER AS307 1 024× 720)와 카메라(DH-HV1351UM-ML)로 구성 각이한 깊이에서의 재구성오유를 측정하고 분석하기 위하여 3차원주사대상으로 바른 하였다. 6면체를 리용하였다. 새로 구성한 구조광원체계의 성능과 정확도를 평가하기 위하여 회색부호패턴에 기초 한 구조광원체계에 의한 재구성오유와 론문에서 제안한 혼합패턴에 기초한 구조광원체계 에 의한 재구성오유를 측정하였다. 회색부호패턴렬은 1 024해상도를 보장하기 위하여 10개의 화상으로 구성하였다. 혼합패턴렬은 3단계 시누소이드줄무늬패턴렬과 준우연반점패턴을 결합한 3개의 화상 으로 구성하였다. 그림 3에서 볼수 있는것처럼 측정오유는 2.5mm보다 작으며 이것은 제안된 혼합패턴 에 의한 3차원재구성방법이 속도와 함께 높은 정확도도 보장한다는것을 보여준다. 2.5 2 1.5 1 0.5 / m m 유 오 성 구 재 0 550 600 650 700 750 800 850 900 950 1 000 거리/mm 그림 3. 회색부호패턴과 혼합패턴에 기초한 구조광원체계의 RMS재구성오유들 1－회색부호패턴에 의한 결과, 2－혼합패턴에 의한 결과 2 1 － 68 － 종합대학학보 정보과학 주체108(2019)년 제65권 제1호 맺 는 말 참 고 문 헌 3단계 시누소이드패턴과 준우연반점패턴을 결합한 새로운 혼합패턴에 기초한 3차원 재구성방법을 제안하여 재구성속도를 높이였다. [1] 최춘화; 콤퓨터시각기하, 종합대학출판사, 142～192, 주체99(2010). [2] Daljit Singh Dhillon, Venu Madhav Govindu; Machine Vision and Applications, 26, 339, 2015. A Method of 3D Reconstruction Based on the Structured Lighting 주체107(2018)년 11월 5일 원고접수 Kim Kyong Sok, O Yong Gun In this paper, we proposed a new hybrid pattern combining with the advantages of the time multiplexing(TM) and spatial neighborhood(SN) patterns, and proposed a 3D reconstruction method based on it. Key words: structured lighting, hybrid pattern, spatial neighborhood