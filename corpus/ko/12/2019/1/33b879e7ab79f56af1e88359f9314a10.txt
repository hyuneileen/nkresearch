김일성종합대학학보 정보과학 주체108(2019)년 제65권  제1호 촬영화상의 기하학적모형과 립체정합을 리용한 도로화상분석법 최 진 혁 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다.  《첨단과학기술분야에서 세계적경쟁력을 가진 기술들을 개발하기 위한 투쟁을 힘있게 벌려야 합니다.》(《조선로동당 제7차대회에서 한 중앙위원회사업총화보고》 단행본 39페지) 도로표면검출을 위한 선행연구[1]에서는 표식선모형을 구성하고 화상의 소멸점위치를 결정하여 도로령역을 검출하였지만 표식선특징에 많이 의존한다. 립체정합의 정확성을 개 선하기 위한 선행연구[2]에서는 립체정합비용계산의 대역최량화문제를 해결하는 방법을 서술하였지만 도로화상분석의 정확성과 실시간성을 동시에 보장하지 못하였다. 론문에서는 립체촬영화상에 대한 기하학적정보를 반영하여 도로령역검출을 진행하는 방법을 제안하고 각이한 도로화상에 대한 분석실험을 통하여 그 효과성을 검증하였다. １．립체촬영체계에서의 기하학적모형과 화상모형 화상에서 점 iO 와 기준평면 π 에 대하여 iO 에 대응한 화상의 점들은 촬영기 C 와 C′ 에 의하여 다음과 같이 표시된다.   T 2 = i iO 에 대응한 화상점 p ∈ ]1, vu [ P , i i ′ , 들은 기준평면 π 에 관하여 다음의 기하학적모형에 i p i ′=′ [ vu , i i ]1, ∈ P p p ′ i , 점 T 2 따른다. p =′ i Gp i + β i A ⋅′ (1) z z i ′ i ⎛ ⎜ ⎜ ⎝ x f d ⎞ ⎟ ⎟ ⎠ 여기서 ⎛ ⎜ ′= xRAG ⎜ ⎝ + f T n d ⎞ ⎟ ⎟ ⎠ 1− A 은 투영호모그라피이고 =β i 는 투영시차이다. D i z i 2대의 촬영기설치환경에서의 일반적인 기하학적모형을 그림 1에 보여주었다. 촬영기 T] 이다. C 에 대한 점 iO  의 자리표는 zDdx − i m i = [ i i 핀홀모형을 리용하면 다음의 식이 얻어진다. D i = x i = z i = d βα v i v v ( − i 0 sin) θ u 0 + u 0 u − i α u ⎞ ⎟⎟ θ ⎠ + βα v i ⎛ ⎜⎜ ⎝ u i z − i α u d α v v − i βα v i + ( v 0 sin) θ cos (2) 행에 기초한 화상대조에 의해 기하학적정보를 재구성하여 화상정합이 최량이 되도록 촬영화상의 기하학적모형과 립체정합을 리용한 도로화상분석법 － 45 － 한다. iOπ π iO iD π′ ip z x C y G ( fxR , ) ipπ′ ip′ z′ x′ y′ C′ 그림 1. 2대의 촬영기설치환경에서의 일반적인 기하학적모형 화상변형함수와 화상류사도, 투영시차에 파라메터결정을 포함한 화상모형을 보기로 하자. 식 (1)에서 정의된 두 관찰공간에 대한 기하학적구성을 리용하면 화상 I 에서 1개 이며 N 은 화상렬의 개수 행은 이고 화상 I ′ 에서 1개 행은 P P ] ] , , ′= L [ 1 p , ′ Np , p [ 1 L= Np 이다. 이지러짐함수 ′ vu , [ i ′ i ] T ) 는 다음과 같이 결정할수 있다. , ( w β= i + ug 11 i p i vg 12 i ug 21 i + u ⎡ ⎢ ⎣ v ′ i ′ i ⎤ =⎥ ⎦ ⎡ ⎢ ⎢ ⎢ ⎢ ⎢ ⎣ ( fz fx x x d + − + + /) θ cot + g ′+′ xu ) 0 ′ ( αβ i u vg g + 32 33 i ′ x ( αβ + i v + g 13 ug 31 i vg + 22 i ug 31 klg 은 투영호모그라피 G 의 (k, l)번째 원소로서 교 fy d x / β i fz ′+′ xv sin/ θ 0 (3) 23 vg 32 i ⎤ ⎥ ⎥ ⎥ ⎥ ⎥ ⎦ fy + β i /) + 33 d g d x fz fz / i 여기서 iβ 는 점 ip 에서 투영시차이고 정된 촬영기파라메터들로부터 계산할수 있다.  , 에서 화상점들의 농담값들을 PP S ′ s 1 변형함수로부터 P′ 에서 해당한 점들을 I ′ 범위밖에 놓을수 있다. 그러므로 마스크벡토르 0=iδ [ δ L=Δ 1 두 점모임의 류사도는 호상상관곁수에 의해 측정할수 있으며 다음과 같이 표시된다. ip′ 가 I ′ 범위밖에 놓이면 1=iδ 로 정한다. 로 각각 표시한다. 아니면 ′=′ s [ 1 Nδ 는 L L ′ N = S s s N ] ] [ T , , , , , , T ,] T ,( SSc =′ ) (4) N ∑ δ i i 1 = ( s i − s )( s ′−′ ) s i N ∑ δ i i 1 = ( s i 2 − s ) ( s ′−′ ) s i 2 N ∑ δ i i 1 = 여기서 s , s ′ 는 S , S′ 에서 확정된 점들의 평균값이다. 호상상관곁수 c 는 －1부터 1사이 의 값이며 c 값이 클수록 S 와 S′ 가 더 잘 정합된다. － 46 － 종합대학학보 정보과학 주체108(2019)년 제65권 제1호 매 화상렬에 대하여 투영시차는 련속성이 있다고 보고 1차원B－스플라인함수를 리용 하여 파라메터들을 결정한다. B－스플라인곡선은 화상렬에서 균등하게 겹치는 조종살창 에 의해 정의된다. 여기서 M 은 조종점의 개수이며 이웃한 두 조종점사이 { c j 2 의 간격은 MNk 이다. ,1[ M )3 }, ∈ /( − = ] − j T ] 2 , 화상점들의 시차값을 [ ββ = 1 , , Nβ L T ] 라고 하면 조종점들의 값을 [ ϕϕ L M − 근사함수는 다음과 같이 표시된다. Φ = 1 , , 여기서 F 는 MN × 행렬이며 i 번째 행 ΦF ⋅=β (5) F i = iF 는 다음과 같이 표시된다.  0 0 0[ ]0 L L 321 321 i i ⎢ ⎥ ⎢ ⎥ 2 M −⎥ − −⎥ ⎢ ⎢ k k ⎣ ⎦ ⎣ ⎦ t )( i f 2 (6) 여기서 f )( t i = [ f ( t i ), 0 f 1 ( t i ), f 2 ( t i ), f 3 ( t i )] , ti = , { f 3 k t )}( =k 0 은 립방체의 B－스플라인 i k − i k ⎢ ⎢ ⎣ ⎥ ⎥ ⎦ 토대함수이다. ２．도로화상의 재구성과 검출을 위한 립체정합방법 행에 기초한 화상대조에 대한 최량화문제의 목적함수는 다음과 같다.  ( ′ ( PΦFwIScΦE ,( ))) λ λ − − = ) ) ( ) , ⋅ ( Φr 11 ( Φr 22 (7) 여기서 c 는 화상정합의 질을 평가하는 호상상관곁수이다.  N N 2 Φr ( 1 ) = 1 2 ⎛ ⎜ ⎝ ∑ i 1 = ∂ β i u ∂ ⎞ ⎟ ⎠ ηλ − i 3 ∇ I i e 2 , Φr ( 2 ) = − ( ββ − i i ) 2 (8) 1 2 ∑ i 1 = 다. (1 Φr 에서 지수항은 경계의 불련속성을 표현하는 무게인자이고 ) iI∇ 는 점 − = − [ , ββ 1 iη 는 항상 1로 초기화된다. iη 는 도로경계가 될 확률이다. 는 행에서의 시차이다. 첫번째 화상행의 대조에 대해서는 ip 에서의 화상그라디엔트이고 T − ] Nβ 시되며 L , +∈R3λ 는 척도인자이 에서 (2 Φr (2 Φr ) 가 무 ) 최량화단계에서 파라메터갱신과정은 다음과 같다. Φ k =+ 1 Φ k α Δ+ Φ (9) 여기서 α는 걸음의 크기이고 ΦΔ 는 탐색방향으로서 다음과 같이 표시된다.  1 −ξ ) I ( JJΦ T ( EJ (10) =Δ ( ΦE )) − + T max k E ∂ Φ ∂ 여기서 J = , maxE 는 (ΦE 의 최대값, I 는 단위행렬, ξ 는 수렴속도와 안정성의 견지 ) 에서 최량화성능을 담보하는 무게인자이다. 수렴속도는 ξ 가 작을수록 커지고 ξ 가 커질 수록 보다 안정해진다. 그라디엔트에 기초한 최량화방법을 리용하면 수렴령역은 제한되며 최량화를 위한 초 기값이 거의 최량풀이와 가까와진다. 화상대조는 아래행에서부터 재귀적으로 진행하며 아래행에서 β 의 초기값은 0으로 설정한다. 도로표면은 련속성이 담보된다고 보고 화상에서 이전 행의 최량풀이를 다음 행 의 초기값으로 리용한다. 촬영화상의 기하학적모형과 립체정합을 리용한 도로화상분석법 － 47 － 행에 기초한 지평면에 대한 높이정보는 식 (2)로부터 계산할수 있으며 도로경계가 될 가능성에 대한 기준은 다음과 같다. 여기서 u ∇∇ , 는 v D ∇⋅∇= v vu, 방향에서의 편미분을 의미한다. D ∇⋅∇= u CI , C u u v I v (11) 화소준위의 정합류사도측정방법과 주목령역에 대한 비파라메터변환이나 표준화된 교 차상관법을 결합할수 있다. 여기서 왼쪽 화상 s lu )( p f 1 와 오른쪽 화상 f = I lu )( p u α+ G p l )( (12) rt f 사이의 화소준위비류사도는 )(lu I p 이며 uG p 은 )(l 해당한 그라디엔트화상 rt 들사이의 화소준위비류사도이다. l min g ,1 f g ⎛ ⎜ ⎜ ⎝ ⎛ ⎜ ⎜⎜ ⎝ min ⎛ ⎜ ⎜ ⎝ I )( lu p = u G p )( l = min ld +≤≤ − 5.0 ⎛ ⎜ ⎜ 5.0 ⎝ ∑ Cc ∈ f lf c ( x p ) − f rt c ( x p − d (13) ⎞ I ⎟ τ,) ⎟ ⎠ ⎞ ⎟ ⎟ ⎠ ∑ lf g , xc },{ yx ; xCc ∈ ∈ ( x p ) − g rt , xc ( x p − l ⎞ ⎟ G τ,) ⎟ ⎠ ⎞ ⎟ ⎟⎟ ⎠ (14) 이때 절단턱값은 I τ = ,90 G τ = 180 이다. ３．도로령역화상의 검출실험과 결과분석 교통도로와 좁은 도로화상에 대한 도로령역검출실험을 진행함에 있어서 촬영기의 외 부파라메터교정을 먼저 진행하고 기준평면은 다음과 같이 설정하였다. λ 2 각이한 도로령역화상에 대한 도로경계검출결과를 그림 2에 보여주었다. nmd ,1 ,1 = ξα ,05.0 ,5.0 ,5.1 ,1.0 λ 3 λ 1 20 M = = = = = = = T ,]010[ ㄱ) ㄴ) 그림 2. 각이한 도로령역화상에 대한 도로경계검출결과 ㄷ) 그림 2에서 ㄱ)는 좁은 도로화상이고 ㄴ)는 도로표식선이 있는 구내도로화상이며 ㄷ) 는 도로표식이 없는 구내도로화상이다. 그림 2에서 보여준것처럼 제안된 립체정합방법을 리용하면 선행방법[1]에 비하여 도로령역검출의 정확성이 보다 개선된다. 또한 대부분의 립체정합방법[2]은 분리도에 크게 의존되지만 제안된 방법은 촬영구성체계의 기하학적모 － 48 － 종합대학학보 정보과학 주체108(2019)년 제65권 제1호 형과 시차를 고려하여 밀도재구성을 하였으므로 탐색령역을 훨씬 줄일수 있다. 도로화상분석알고리듬의 성능비교결과를 다음의 표에 보여주었다. 표．도로화상분석알고리듬의 성능비교결과 도로화상분석법 적중률/% 완전률/% F-척도/% 처리시간/s 확률호우변환[1] 표식선검출[2] 제안된 방법 63.8 93.5 95.3 65.0 94.9 97.2 62.7 92.1 93.5 1.04 2.94 1.83 구조성이 없는 임의의 환경에 대한 도로표면검출방법은 색, 변, 모양특징을 결합하는 것보다 화상을 기하학적으로 표현하는데서 두 시야에 대한 기하학적정보를 리용하면 검 출의 정확성을 보다 높일수 있다. 맺 는 말 참 고 문 헌 [1] Son Lam Phung et al.; Computer Vision and Image Understanding, 149, 1, 186, 2016. [2] Mikhail G. Mozerov et al.; IEEE Transactions on Image Processing, 24, 3, 1153, 2015. 주체107(2018)년 11월 5일 원고접수 Road Scene Analysis Method by Using the Geometric Model of the Captured Images and Stereo Matching Choe Jin Hyok In this paper we propose a road surface detection method to use two-view geometric model and image model, and optimization for the function calculation of stereo matching cost. Then we evaluate the effectiveness in comparison with the several previous methods through the experiments. Key words: road detection, stereo matching, vanishing point estimation