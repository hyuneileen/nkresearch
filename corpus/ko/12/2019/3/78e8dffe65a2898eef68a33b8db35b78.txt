김일성종합대학학보 정보과학 주체108(2019)년 제65권  제3호 린접색융합을 리용한 천연색화상처리의 한가지 방법 최옥주, 최춘화 천연색화상처리는 흑백색화상을 색화상으로 변환하는 화상처리방법이다. 최근에 오래 전의 흑백색사진이나 흑백색영화를 천연색으로 변환하는것이 하나의 추세로 되고있다. 천연색화상처리는 흑백색화상에 색을 추가하는 허위색화상처리이다.[1] 천연색화상처리방법[2]은 크게 자동색처리방법과 반자동색처리방법으로 분류할수 있다.  ① 자동색처리방법에서는 색화될 흑백색화상과 류사한 색화상을 리용한다. 이 방법에 서는 사용자의 호상작용을 요구하지 않으며 최종결과를 수동적으로 수정하거나 강조하는 것이 불가능하다. 그러므로 현재 반자동색처리방법이 널리 리용되고있다. 흑백색화상을 색화상으로 처리하는 과정은 유일하지 않으므로 일반적으로 사용자의 호상작용에 의한 색선택을 요구한다. ② 반자동색처리방법에서는 사용자가 흑백색화상의 내부에 선택한 색으로 선을 그린다. 이 방법에서는 그려진 선으로부터 시작하여 화상령역우에 색을 입히는것으로 볼수 있다. 선행연구[2]에서는 주목화소에 색을 할당하기 위해 평균두제곱오차목적함수를 설정하고 최량화문제를 해결하였지만 요구하는 천연색화상의 질을 얻자면 많은 계산량이 요구된다. 선행연구[3]에서는 거리변환에 기초하여 천연색화상처리를 진행하는데 령역들사이의 경계부분에서 색퍼짐현상이 나타나므로 천연색화상의 질이 높지 않다. 론문에서는 처리의 고속화를 진행하면서도 높은 화질을 보장하기 위해 린접색융합에 의한 천연색화상처리방법을 제안하였다. １．문 제 설 정 흑백색화상에 대한 천연색화상처리를 진행하기 위하여 YCbCr색모형을 리용한다. 이 색모형을 리용하는 리유는 천연색화상처리될 화상은 밝기만 주어지고 색통로는 미지이기 때문이다. 따라서 천연색화상처리문제는 밝기통로(Y)가 주어진 조건에서 거기에 해당한 색통로(Cb, Cr)를 결정하는것이다. 자연스러운 천연색화상처리결과는 주목화소로부터 가까운 색선들까지 거리의 무게붙 은 평균으로 얻을수 있으므로 다음과 같이 문제를 설정한다. ① 임의의 두 화소사이의 내부거리를 계산한다.  ② 내부거리에 기초한 린접색융합에 의한 색화를 진행한다. ２．임의의 두 화소사이의 내부거리계산 화소 s의 농도값을 Y(s), 색을 C(s)(Cb와 Cr를 표현)라고 할 때 2개의 린접화소 s와 t 의 내부거리는 다음과 같다. － 58 － 종합대학학보 정보과학 주체108(2019)년 제65권 제3호 tsd ),( = − tY )( (1) sY )( 임의의 2개 화소 s와 t의 내부거리에 대하여 론의하기로 하자. 임의의 2개 화소 s와 t 이 존재한다고 할 때 여기서 (cid:34) C } { = , , pp , 1 2 mp 사이에 8린접관계를 만족시키는 화소렬 p 1 이다. m = = , ps t 화소렬 C의 내부거리는 다음과 같이 표시한다. Cd ( ) = pd ( i p , i 1) + (2) m 1 − ∑ i 1 = 임의의 2개 화소 s와 t의 내부거리는 s와 t를 련결하는 곡선의 내부거리들의 루적합 의 최소값으로 정의한다. tsd ),( = (min Cd ) (3) ３．내부거리에 기초한 린접색융합 사용자가 N개의 각이한 색을 가진 선들을 그렸다고 하자. 이때 같은 색을 가진 화소 nΩ 까지의 내부거리는 다음과 같이 표 이라고 할 때 화소 s로부터 (cid:34)= ,1 , nn Ω N , 모임을 시된다. t ), min ,( sd ,( tsd ) =Ω n , Ω∉∀Ω∈∀ n 내부거리계산에 많은 계산량이 요구되므로 Dijkstra알고리듬을 리용한다. Dijkstra알고 리듬은 그라프의 2개 마디점사이의 최단경로를 찾는데 리용되는 방법으로서 화소와 색선 까지의 거리계산에 효과적이다. 이 알고리듬을 적용하기 위하여 화상에서 매 화소를 그라 프의 마디점으로 하고 화소와 근방화소사이의 경로에 두 화소사이의 내부거리를 대응시 킨다. (cid:34)= ,1 N n s n , , 화상에서 Dijkstra알고리듬의 동작단계를 그림 1에 보여주었다. 6 0 4 6 0 10 4 6 6 12 0 4 6 4 4 4 + 6  6 + 4 4 6 3 4 6 3 4 6 2 2 8 ㄱ) 6 2 4 2 6 ㅁ) 8 12 4 7 5 ∞ ∞ 4 7 ∞ 6 0 4 6 0 4 0 4 6 ∞ ∞ 0 4 4 6 10 ∞ 4 7 ∞ ∞ ∞ 4 4 + 6  9 + 7 7 4 6 3 4 6 3 ∞ ∞ 2 2 ∞ ㄴ) 2 2 6 4 6 ㅂ) 0 4 4 6 ∞ 0 4 4 6 6 0 4 6 0 4 4 6 3 4 6 3 ∞ 4 7 ∞ ∞ 6 + 4  10 + 4 4 7 10 9 6 ∞ 2 2 ∞ ㄷ) 2 2 6 4 6 ㅅ) 9 10 그림 1. 화상에서 Dijkstra알고리듬의 동작단계 6 0 4 0 4 4 6 ∞ 6 0 4 0 4 6 4 10 4 6 3 4 6 3 6 2 4 + 0  6 + 2 2 ∞ ㄹ) 6 4 6 2 2 ㅇ) ∞ ∞ 4 7 ∞ 10 10 4 7 9 린접색융합을 리용한 천연색화상처리의 한가지 방법 － 59 － 그림 1에서 ㄱ)는 밝기값과 내부거리로 표시된 초기화상, ㄴ)는 거리값초기화(진한 회 색마디점은 주목화소를 표시), ㄷ)로부터 ㅇ)까지는 최소경로계산단계이다. 알고리듬은 주목화소로부터 시작하여 근방화소들을 해석한다. 그림 1의 ㄱ)에서는 근방 화소쌍들이 대응하는 내부거리를 가진 경로로 련결된 화상을, ㄴ)에서는 주목마디점에는 0 거리값을 주고 나머지 모든 마디점들에는 무한거리값을 할당한 초기거리값화상을 보여준다. 그리고 ㄷ)로부터 ㅇ)에서는 최소경로계산을 위한 거리값화상변화단계를 보여준다. 거리는 주목화소의 모든 근방화소들에 대하여 계산되며 최소거리만이 마디점에 할당된다. 만일 하 나의 마디점에 여러개의 련결이 존재하는 경우 항상 최소거리값이 선택된다.(그림 ㄹ)의 중 심화소) 이 처리는 모든 마디점들에 거리값들이 다 할당될 때까지 반복한다. 화소 s의 최종적인 색은 화소 s에 대한 최소내부거리를 가진 3개 색값들의 무게붙은 합으로 결정한다. sC )( = (4) 여기서 무게함수는 rd −=)( dw 이고 변수 r는 색퍼짐의 평활성을 조종하는 파라메터로서 4=r 이다. 3 ∑ i = 1 3 ∑ i = 1 sdw ,(( Ω )) kC ( ) i k i sdw ,(( Ω )) k i ４．실험 및 결과분석 선행방법과 제안한 방법에 의한 천연색화상처리를 실험을 통하여 비교하였다. 실험은 Intel(R) Corei5 2.4GHz, 4.0GB RAM desktop에서 진행하였다. 천연색화상처리에 대한 실험결과화상을 그림 2에 보여주었다. ㄱ) ㄴ) ㄷ) 그림 2. 천연색화상처리에 대한 실험결과화상 ㄱ) 흑백색화상, ㄴ) 선행방법(PSNR = 31.07)[3], ㄷ) 제안방법(PSNR = 31.4) 천연색화상처리시간을 다음의 표에 보여주었다. 화상의 크기/pixel 1 920×1 080 400×240 표. 천연색화상처리시간 선행방법[3]의 처리시간/s 제안한 방법의 처리시간/s 4.3 1.06 2.7 0.6 실험결과 선행방법보다 제안한 방법이 더 효과적이라는것을 알수 있다. － 60 － 종합대학학보 정보과학 주체108(2019)년 제65권 제3호 맺 는 말 참 고 문 헌 흑백색화상의 천연색화상처리를 린접색융합으로 진행하여 높은 화질을 얻는 방법을 제안하고 실험을 통하여 효과성을 평가하였다. [1] 최일국, 김순돌; 화상정보처리, 종합대학출판사, 180～184, 주체101(2012). [2] Anat Levin et al.; ACM Transactions on Graphics, 23, 8, 689, 2004. [3] P. Lagodzinski et al.; Multimed. Tool Appl, 69, 1, 111, 2014. A Method of  Image Colorization Using Adjacent Chrominance Blending 주체108(2019)년 5월 5일 원고접수 Choe Ok Ju, Choe Chun Hwa In this paper, we proposed the effective grayscale image colorization method using adjacent chrominance blending and verified the efficiency. Key words: image processing, chrominance blending, grayscale image