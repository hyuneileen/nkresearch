김일성종합대학학보 정보과학 주체108(2019)년 제65권  제3호 최량화방법에 의한 카메라이지러짐 파라메터결정의 한가지 방법 김 진 옥 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다.  《첨단돌파전은 현대과학기술의 명맥을 확고히 틀어쥐고 과학기술의 모든 분야에서 세계를 앞서나가기 위한 사상전, 두뇌전입니다.》 사영기하에서의 선형성을 유지하기 위하여 렌즈이지러짐[1]을 고려하는것이 매우 중 요하다. 는 방법을 제안하였다. 결정하지 못한다. 선행연구[2, 3]에서는 호모그라피를 리용한 공선성에 기초하여 렌즈이지러짐을 교정하 그러나 이 방법은 하나의 방사이지러짐곁수만을 추정하므로 카메라의 특성을 완전히 론문에서는 호모그라피를 가지고 방사, 중심리탈, 얇은 프리즘이지러짐으로 구성된 카메라이지러짐모형의 파라메터들을 최량화하는 방법을 제안하였다. １．평면호모그라피를 리용한 최량화문제설정 렌즈이지러짐은 보통 방사이지러짐, 중심리탈이지러짐, 얇은 프리즘이지러짐과 같은 세가지 형태로 나타난다. ① 방사이지러짐은 렌즈요소들의 곡률편차에 의하여 생긴다.  ② 중심리탈이지러짐은 렌즈요소들의 시각중심들이 한직선에 놓이지 못한것으로 하 ③ 얇은 프리즘이지러짐은 카메라요소들의 조립과 설계, 제작에서의 오차로부터 생 여 생긴다. 긴다. 시각적효과에서 볼 때 방사이지러짐이 가장 뚜렷하게 나타나며 얇은 프리즘이지러짐 효과는 매우 약하다. 즉 이지러짐효과에서 기본인자는 방사곁수라고 할수 있다. 이지러짐 모형에는 다항식형태와 방사이지러짐만을 고려한 분수형태 등 여러가지가 있다.  , 중심리탈곁수 론문에서는 방사곁수 , 얇은 프리즘곁수 s 를 포함시 1, s p 1, p k 1, k 2 2 2 킨 다항식형태의 렌즈이지러짐모형을 론의하였다. ⎧ σ ⎪ x ⎨ σ ⎪⎩ y r 2 = rxk u 1 + rxk u 2 = ryk u 1 + ryk u 2 2 2 4 + 4 + x 2 + ( rp 1 yxp uu 1 2 2 u + 2 yxp uu 2 2 + y u + ) + 2 rs 1 2 rs 2 (1) + ) 2 ( rp 2 c − y = x u 2 + y u 2 , x u = x u − c , x y u = y u 추정하여야 할 파라메터들은 다음과 같다. － 62 － 종합대학학보 정보과학 주체108(2019)년 제65권 제3호 D c ( = , x c y , k 1 , k 2 p 1 , p 2 , s 1 , T s 2 ) (2) , 교정된 화상과 리상적인 투영화상사이의 기하학적오차를 목적함수로 설정하고 최량 화방법으로 추정을 진행한다. C = N ∑ 1 N (ˆ([ mxxd i , i ), Hx ip 2)] (3) 1 = 은 이지러진 화상의 특징점 i (ˆ mxx , i i ) ix 를 이지러짐파라메터 를 리용하여 교정한 교정점이며 m = ipHx 는 렌즈이지러짐이 없을 때의 리상적인 투영화상에 서의 특징점이다. 즉 추정하려는 이지러짐파라메터 m은 식 (3)을 최소로 하는 방정식 (1) 의 풀이로 된다. pp , 1 k 1 s 1 k s ( ) 2 2 2 , , , , T ２．선형 및 비선형방법에 의한 렌즈이지러짐파라메터결정방법 최량화방법에는 목적식과 제한조건들이 1차함수인가 2차이상의 함수인가에 따라 선 형계획법과 비선형계획법이 있다. 리에서는 화상의 특성에 따라 다르다. 일반적으로 비선형최량화가 선형최량화에 비하여 더 좋은 결과가 얻어지지만 화상처 여기서는 화상에서 잡음의 특성을 고려하여 선형풀이와 비선형풀이를 모두 얻고 두 풀이의 기하학적오차를 비교하여 가장 최적인 이지러짐파라메터들을 얻는다. 이지러짐정 도는 주점의 중심에서는 가장 작고 주점에서 멀어질수록 크게 나타나므로 이지러짐중심 은 카메라의 주점과 일치한다. 선형 및 비선형방법에 의한 렌즈이지러짐파라메터결정방법은 다음과 같다.  우선 비용함수 (3)을 계산하기 위한 호모그라피 H를 결정한다. 호모그라피는 한 시야 로부터 다른 시야에로 점들을 넘기는 넘기기로서 두 평면사이의 호모그라피를 안다면 한 평면의 점을 다른 평면에로 정확히 넘길수 있다. 화상에 이지러짐이 없다면 대상평면과 화상평면사이의 호모그라피를 대응점들로부터 정확히 결정할수 있다. 화를 진행하여야 한다. 그러나 화상에 잡음과 함께 시각적이지러짐이 존재하는것으로 하여 호모그라피근사 호모그라피는 높은 정확성을 보장하는것으로 하여 시각처리분야에서 널리 쓰이는 레 벤베르그－마르쿠와드(LM: Levenberg-Marquard)알고리듬을 리용하여 근사화한다. 다음 선형풀이와 비선형풀이를 추정하고 오차가 최소로 되는 최적풀이를 선택한다.  C 를 얻 최소두제곱법과 반복법으로 식 (1)의 선형풀이 linearm 를 구하고 비용값 linear 는다. 최량화방법에서는 초기값을 어떻게 잡는가에 따라 옳은 풀이에로 수렴할수도 있고 전혀 다른 풀이가 얻어지거나 발산할수도 있다.  풀이의 정확성을 보장하기 위하여 선형풀이 linearm 를 초기값으로 하여 LM알고리듬 으로 비선형풀이 m nonlinear 를 구하고 비용값 C nonlinear 를 얻는다. 최량화방법에 의한 카메라이지러짐파라메터결정의 한가지 방법 － 63 － C linear = (ˆ([ mxxd i , i linear ), Hx ip 2)] (4) C nonlinear = (ˆ([ mxxd i , i nonlinear ), Hx ip 2)] (5) 1 N 1 N N ∑ i 1 = N ∑ i 1 = 일반적으로 선형풀이보다 비선형풀이가 더 최적이다.  그러나 화상에 잡음이 존재할 때 비선형풀이는 불안정성을 띠게 되며 오히려 선형풀 이가 더 좋을수도 있다.  이로부터 두 풀이 것을 최종적인 이지러짐파라메터로 선택한다. linearm 와 m nonlinear 의 비용값을 비교하여 더 작은 비용값을 가지는 ( k 1 , k 2 , p 1 , p 2 , s 1 , s 2 ) = arg linear { , = min nonlinear k (ˆ([ mxxd i , i k ), Hx ip 2 )] (6) ⎛ ⎜ ⎜ } ⎝ 1 N N ∑ i 1 = ⎞ ⎟ ⎟ ⎠ 제안한 방법에 의한 이지러짐교정단계는 다음과 같다.  ① 참고할 대상평면화상과 어느 한 시점에서의 이지러진 화상을 선택한다.  ② 두 화상에서 특징점들을 검출하여 대응시킨다.  ③ 호모그라피 H를 결정한다.  ④ 선형풀이와 비선형풀이를 계산하고 오차값을 비교하여 최종이지러짐파라메터 를 결정한다. m = ( k 1 , k 2 , p 1 , p 2 , s 1 , s 2 ) T ３．실험 및 결과분석 실험은 640 × 480 pixel의 모의화상과 실화상에 대하여 진행하였다. 모의화상을 그림 1에 보여주었다. 화상 1 화상 2 화상 3 그림 1. 모의화상 모의화상들에 대하여 선행방법[2]과 제안한 방법으로 이지러짐교정을 진행하였다.  이지러짐파라메터들과 기하학적오차를 다음의 표에 보여주었다. 표에서 보여준것처럼 선행방법보다 제안한 방법이 교정오차가 작으며 특히 방사이지 러짐만 존재할 때 더 효과적이라는것을 알수 있다. － 64 － 종합대학학보 정보과학 주체108(2019)년 제65권 제3호 표. 이지러짐파라메터들과 기하학적오차 파라 메터 xc  yc  1k 2k 1p 2p 1s 2s 화상 1 320.00 240.00 810 −× 89.2 − − 81.5 610 −× 610 −×  510 −× 510 −× 8.1 65.5 89.2 선행방법[2] 화상 2 320.00 240.00 710 −× 64.7 − 510 −×  510 −× 4 −× 10 510 −× 61.1 − 07.1 − 41.1 − 93.4 화상 3 320.00 240.00 610 −× 13.1 − 510 −×  510 −× 4 −× 10 410 −× 72.3 − 95.9 − 29.3 − 1.1 화상 1 320.00 7.8 75.4 240.00 610 −× 11 −× 10 −× 10 −× 10 −× 10 −× 10 18 18 19 18 06.3 22.1 02.1 09.4 제안한 방법 화상 2 320.00 − 54.1 6 240.00 −× 10 11 −× 10 −× 10 −× 10 −× 10 −× 10 19 19 19 20 − 08.3 − 26.6 − 25.7 − 08.2 − 41.2 − 09.1 화상 3 320.00 6 240.00 −× 10 11 −× 10 −× 10 −× 10 −× 10 −× 10 19 20 20 20 − 19.5 − 66.1 − 78.5 − 55.5 − 92.1 오차 1.7 1.51 2.9 0.5 0.9 1.54 교정판화상에 대한 이지러짐교정결과를 그림 2에 보여주었다. ㄱ) ㄴ) 그림 2. 교정판화상에 대한 이지러짐교정결과 그림 2에서 ㄱ)는 실화상이고 ㄴ)는 교정결과화상이다.  잡음에 따르는 기하학적오차를 그림 3에 보여주었다. 오차    2.5 2.0 1.5 1.0 0.5 0 0.2 0.4 0.6 0.8 1.0 잡음 그림 3. 잡음에 따르는 기하학적오차 그림 3에서 실선은 선형풀이이고 점선은 비선형풀이이다. 그리고 교정판화상의 경우 잡음준위에 따르는 선형풀이와 비선형풀이의 기하학적오차를 보여주었다. 실험결과로부터 선행방법보다 제안한 방법이 더 효과적이라는것을 알수 있다. 최량화방법에 의한 카메라이지러짐파라메터결정의 한가지 방법 － 65 － 맺 는 말 참 고 문 헌 호모그라피에 기초하여 최량화방법으로 카메라이지러짐파라메터들을 결정하는 방법 을 제안하고 실험을 통하여 그 효과성을 검증하였다. [1] 최춘화 등; 콤퓨터시각처리, 종합대학출판사, 130～150, 주체105(2016). [2] Dapeng Gao et al.; Optics & Laser Technology, 49, 1, 95, 2013. [3] Daniel Santana-Cedres et al.; Computer Vision and Image Understanding, 161, 1, 1, 2017. 주체108(2019)년 5월 5일 원고접수 A Method of Determining Camera Distortion Parameters by Optimization Kim Jin Ok In this paper, we proposed the effective method of determining camera lens distortion parameters with homography and undistorted using the proposed method. Key words: lens distortion, homography, undistort