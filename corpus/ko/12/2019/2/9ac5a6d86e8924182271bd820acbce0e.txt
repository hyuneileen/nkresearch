김일성종합대학학보 정보과학 주체108(2019)년 제65권  제2호 웨브GIS상에서 NetCDF자료를 시각화하여 봉사하기 위한 한가지 체계개발 김정혁, 한석민 현재 대기련관자료와 같은 다차원마디점자료의 보관과 회복을 위하여 NetCDF (Network Common Data Form), GRIB(Gridded Binary)와 같은 형식의 자료들을 리용하고있고 그것을 시각화하기 위한 도구들이 많이 개발되였다. 그러한 도구들로서는 MICAPS (Meteorological Information Comprehensive Analysis and Process System)[2]와 MATLAB의 netcdp도구가 있으며 최근에 ArcGIS를 리용하여 웨브기반우에서 NetCDF를 시각화한 한가 지 방안도 제기되였다. NetCDF자료를 웨브GIS기반에서 시각화한 공개원천쏘프트웨어인 ncWMS[1]에서는 자 료읽기 및 화상생성속도를 높이기 위하여 Java의 ehCache서고를 리용한 완충기능을 리용 하였다. 론문에서는 NetCDF자료를 시각화하여 웨브지도봉사를 실현하는 한가지 봉사체계의 체계구성방식과 OpenCV화상처리서고를 리용하는 새로운 화상생성 및 자료완충방안에 대 하여 제안하였다. １．체계의 구성방식 ① Data Provider에 의하여 NetCDF자료는 봉사기의 Disk에 복사되며 복사된 화일경로 를 MySQL자료기지의 화일이름표에 등록한다. 화일이름표를 사용하는것은 NetCDF자료관리와 완충관리에서 많은 편리를 제공한다. 화일이름표를 사용하여 사용자의 자료읽기와 Data Provider의 자료쓰기의 동시성문제를 해 결할수 있으며 자료의 완충상태에 대한 기발을 관리할수 있다. 또한 화일이름표에 기초하 여 낡은 자료들을 선별하여 Disk에서 삭제하여 Disk의 여유공간을 조성할수 있다. ② Data Reader는 NetCDF JAVA서고를 리용하여 NetCDF자료로부터 자료를 읽어내는 기능을 제공한다. ③ 매개 NetCDF자료에 대하여 Meta자료는 XML형식으로 변환하고 기본자료는 OpenCV의 클라스인 Mat형실체로 변환하여 Disk에 보관하며 재리용시에 완충자료로 리용 한다. ④ Presentation Layer에서는 Metadata를 XML, JSON형식으로 말단의뢰기에 전송한다.  Mat실체로부터 의뢰기가 요구하는 목표령역에 따르는 부분화상을 생성하여 말단의뢰기에 전송한다. ⑤ HTTP Layer는 말단의뢰기에서 온 요청들을 처리하여 응답을 보내며 지도를 층별 로 관리하는 기능을 제공한다. Codigniter프레임워크를 리용하여 체계의 모든 요소들을 모 － 38 － 종합대학학보 정보과학 주체108(2019)년 제65권 제2호 듈화하고 결합하였다. 웨브GIS상에서 NetCDF자료화상을 봉사하기 위한 체계구성도를 그림에 보여주었다. GetMap GetFeatureInfo JSON, XMI PNG, JPG HTTP Layer Presentation Layer Metadata Cache 자리표변환 Mat Cache Data Reader NetCDF Java I/O NetCDF 자료 화일이름표 Data Provider 그림. 웨브GIS상에서 NetCDF자료화상을 봉사하기 위한 체계구성도 ２．OpenCV서고를 리용한 NetCDF의 시각화와 자료완충방안 NetCDF자료의 시각화에서 제일 시간소모적인 부분은 DataReader공정으로서 이 부분 공정을 한번 거친 자료들을 완충자료로 쓰는것이 화상생성속도를 보장할수 있는 방도로 된다. NetCDF자료로부터 전체 령역의 자료를 추출하여 OpenCV의 Mat클라스의 자료구조로 변환하여 Disk에 보관하며 다음번 자료요청이 들어오면 재리용하는 방법으로 완충기능을 실현한다. OpenCV는 OpenMP를 리용하는 병렬계산기반우에서 최량설계된 화상처리알고리듬에 의하여 자료읽기와 화상생성을 매우 빠른 속도로 처리하여 말단의뢰기의 자료요청에 응 답한다. 웨브GIS상에서 NetCDF자료를 시각화하여 봉사하기 위한 한가지 체계개발 － 39 － ３．NetCDF자료 웨브GIS봉사의 성능평가 성능이 Dell Optiplex 3020 Core-i3 4th (3.20GHz, 8G RAM)인 계산장비에서 마디점의 크기 817 × 인 NetCDF자료의 color-coding화상생성속도는 50ms미만이므로 전용지도봉사기 673 가 와 결합되여 지도봉사를 할수 있다. OpenCV는 자료를 주기억에 적재하기때문에 처리하려는 마디점자료의 크기는 봉사기 의 능력에 따라 적당히 제한하여야 한다. 1개의 NetCDF자료가 OpenCV의 Mat형실체로 변 환되여 주기억에 차지하는 크기는 2.2MB정도이므로 주기억의 여유공간 1GB당 약 465개 의 자료를 동시에 적재하여 처리할수 있다. NetCDF자료를 시각화하여 웨브지도봉사를 실현하는 한가지 봉사체계의 체계구성방 식과 OpenCV화상처리서고를 리용하는 새로운 화상생성 및 자료완충방안에 대하여 제안 하였다. [1] J. D. Blower et al.; Elsevier, Environmental Modelling & Software 47, 218, 2013. [2] Y. Q. Wang; Meteorol. Appl, 21, 360, 2014. 주체108(2019)년 2월 5일 원고접수 The Development of a System Providing Visualized Service of NetCDF Data on the Web GIS Kim Jong Hyok, Han Sok Min In this paper we proposed a system configuration of the service system implementing web map service that visulalized the NetCDF data, and a new method of image generation and data buffering using OpenCV image processing library. Key words: NetCDF, OpenCV, GIS 맺 는 말 참 고 문 헌