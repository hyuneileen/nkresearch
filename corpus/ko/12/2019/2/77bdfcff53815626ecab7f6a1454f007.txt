김일성종합대학학보 정보과학 주체108(2019)년 제65권  제2호 에피폴라기초행렬을 리용한 립체시각체계에서의 카메라교정의 한가지 방법 방금석, 최춘화 선행연구[1]에서는 위상정합을 리용하여 대응점들을 구하고 카메라교정을 진행하는 방법을 제안하였지만 계산비용이 많이 소비된다. 선행연구[2]에서는 카메라교정에 핀홀카메라모형을 리용하는 방법을 제안하였지만 그 정확성이 떨어진다. 론문에서는 립체시각체계에서 에피폴라기초행렬을 리용한 최량화방법으로 카메라교 정을 진행하는 한가지 방법을 제안하였다. １．립체시각체계에서 카메라교정의 수학적모형 핀홀카메라모형[1]은 화상공간(화상점은 yxm ,[ )과 대상공간(대상점은 T] pP [ , x p y , p z T] ) 사이의 관계에 의하여 다음과 같이 표시된다. 여기서 s ⎛ ⎜⎜ ⎝ m 1 ⎞ =⎟⎟ ⎠ [ TRA ww ⎛ ⎜⎜ ] ⎝ P 1 ⎞ ⎟⎟ ⎠ A = μα ⎡ x ⎢ 0 ⎢ ⎢ ⎣ α y 0 0 0 x y ⎤ ⎥ ⎥ ⎥ ⎦ 와 0 1 (1) (2) 이고 s 는 미정의 무게곁수이다. pP [ , x p y , p z T] yxm ,[ T] 는 공간과 그것에 대응하는 화 상평면의 점이다. 그리고 한 A 는 카메라내부교정행렬로서 5개의 파라메터( 는 카메라자세로서 회전행렬과 평행이동벡토르이다. 또 yα 에 따르는 카메라유 xα 와 yx, 방향 ww TR [ ] 효초점거리, 비례곁수 μ는 보통 0으로 설정)를 포함한다. 오른쪽 카메라와 왼쪽 카메라(화상점: xm [ L L , y L T] 와 xm [ R R , y R T] )의 대상공간(대상 점 pP [ , x p y , p z T] )과 화상공간사이의 관계[3]는 각각 다음과 같다. s L s R m L 1 m R 1 ⎛ ⎜⎜ ⎝ ⎛ ⎜⎜ ⎝ ⎞ =⎟⎟ ⎠ ⎞ =⎟⎟ ⎠ ⎛ ⎜⎜ ⎝ ⎛ ⎜⎜ ⎝ P 1 P 1 ⎞ ⎟⎟ ⎠ ⎞ ⎟⎟ ⎠ TRA [ L L L ] (3) TRA [ R R R ] (4) 식 (3)에서 왼쪽 카메라자리표계는 보통 3차원자리표계로 정의된다.  왼쪽 카메라자리표계 pO : ( R 와 오른쪽 카메라자리표계 pO : ( L pp YL XL ZL ) p YR p ZR XR ) 사이 의 관계는 다음과 같다. － 84 － 종합대학학보 정보과학 주체108(2019)년 제65권 제2호 ⎛ ⎜ ⎜ ⎜ ⎝ p XL p YL p ZL ⎞ ⎟ ⎟ ⎟ ⎠ p XR p YR p ZR ⎞ ⎟ ⎟ ⎟ ⎠ ⎛ ⎜ ⎜ ⎜ ⎝ = R + T (5) 식 (3)과 (4)로부터 R 와 T 는 다음과 같이 표시된다. 1 − TRR LR 이로부터 립체시각체계의 카메라교정에서는 식 (6)으로 표시되는 카메라자세인 회전 T − = R L (6) − RRR LR = 1 ⎧ ⎪ ⎨ ⎪⎩ T 행렬 R 와 평행이동행렬 T 를 결정하여야 한다. ２．에피폴라기초행렬을 리용한 카메라교정 에피폴라기초행렬(F)과 카메라내부파라메터(A) 및 외부파라메터 ([ T x ,] R ) 사이에는 다 음과 같은 관계[1]가 있다. 식 (7)에서 기초행렬 F 는 2개의 화상에서 대응하는 특징점들로부터 결정한다. 행렬 는 경사대칭행렬이므로 이로부터 카메라의 미지파라메터들을 포함한 6개의 제한 T A T FAR = ][ T x (7) 식 (7)의 오른변에 있는 평행이동행렬의 매 성분을 i , =j 3,1 라고 하면 다음의 식이 tij , t = 기초행렬 F 의 성분들을 t 11 33 + = t 12 t t = = + 22 13 , 회전행렬 R 의 성분들을 ijf = + 21 23 31 t t t 0 = (8) t 32 ijr 로 표시하면 다음과 같다. T T FAR A 식을 얻는다. 성립한다. + ( rf 12 12 α v + ( uf 11 0 + vf 0 12 + f 13 ) r 13 ) α u = 0 (9) + ( f ( r 21 21 f + + α u ) α u + 31 vf 21 vf 23 0 0 + vf 21 0 uf 11 uf 13 0 + (( + uf 21 0 ( + r 31 + f + vf 22 uf 12 u ) 0 + ( + f 0 + 23 vf 22 uf 12 0 + 0 ) r 23 f + = ) α v ) α v 32 vf 22 0 r 32 + 0 + 31 r ) 33 0 = f 33 0 f 2 α u 11 r 21 + f αα v u r 22 12 + ( f u 0 + f α u v 0 12 + f α u ) r 23 13 + 0 (10) + f ) v 0 + 32 (11) (12) + f αα v u r 11 21 + f 22 r 12 + ( f α v 21 u 0 + f α v v 0 22 + f α v ) r 13 23 = 0 11 α u 2 α v rf 11 11 f r 22 22 uf ( 11 2 α u 2 αv + 0 f 2 α u 11 r 31 + ( v α 0 u uf 12 uf 12 0 12 + ( 0 + ) r 33 + + f α 13 u vf 22 vf 22 0 0 + f 32 + f ) α v + 0 32 ) v r 12 + (13) f αα v u r 31 21 f α v v 0 22 + f α v ) r 33 23 + + + + + + f r 11 + 0 = 0 + 0 ) α u ) α v ( (( f + + αα 12 v u uf + 11 0 uf 11 uf 13 + r 32 vf 21 0 vf 21 vf 23 2 r α v 32 + 0 + 0 f 0 + + ( ( f 11 f + + f 0 + ( f u α 0 u ) α u ) u 31 f 31 ) r 13 u 33 α v f 21 + 31 0 22 uf 11 uf 12 0 uf 11 uf 13 0 + ( + (( + + + 0 vf 21 vf 22 0 vf 21 vf 23 0 0 + + f 32 f + 0 + f 33 u ) 31 r ) 23 0 = 0 + + r 21 r 22 ( + uf 12 0 + vf 22 0 + f ) v 0 + 32 (14) 에피폴라기초행렬을 리용한 립체시각체계에서의 카메라교정의 한가지 방법 － 85 － 이제 다음과 같은 벡토르  t ( 11 V = 를 리용하면 식 (9)－(14)는 , t , t , t 12 + t , t 13 21 33 22 + t 31 , t 23 + t 32 ) 0=V 으로 된다. 따라서 카메라의 교정을 위한 파라메터들은 식 (15)의 제한밑에서 식 (16)을 만족시키는 최량풀이로 된다는것을 알수 있다. (15) 식 (15)의 제한밑에서 식 (17)을 최소로 하는 최량풀이에 의해 카메라의 내부파라메 xT ][ 로부 터 A 와 회전행렬 R 가 결정되며 평행이동벡토르는 식 (7)로부터 계산된다. 즉 터 평행이동벡토르 t = ( t , t , y x t z T) 는 t ( x , t y , t z ) ≅ t ( , t 31 , t 21 32 T T ) 로 결정된다. 실지 촬영된 화상 즉 잡음이 존재하는 화상들에서는 행렬 T FAR A T 가 정확한 경사대 칭행렬이 아닐수 있으므로 평행이동벡토르는 t ( x , t y , t z T ) ≅ ( t 32 − t , t 13 23 − t 31 , t 21 − t 12 ) T (16) 1 2 와 같이 결정된다. 결국 에피폴라기초행렬을 리용한 카메라파라메터들은 식 (15)의 제한밑에서 목적함수 f , ( αα u v , u 0 , v 0 , r 11 , (cid:34) , r 33 ) = (17) n ∑ i 1 = 2 v i 를 최소로 하는 최량인 파라메터들로 결정된다. 식 (17)의 비선형최량화문제는 파라메터들의 초기풀이에 중요하게 관계된다. 카메라 내부파라메터 A 의 초기풀이는 리용되는 카메라의 특성에 따라 주어진다. 카메라외부파라 메터 를 구한 다음 인자분해 RT , 는 화상들로부터 결정된 기초행렬에 의하여 FATAE ≅ RtTE )( ≅ ⋅ (18) 를 리용하여 결정한다. ３．실험결과 및 분석 실험에서 리용한 립체시각체계의 장치는 카메라 2대와 1대의 투영기로 구성되였다. 이 립체시각체계에서는 콤퓨터에 있는 격자무늬가 그려진 교정판을 투영기를 통하여 투 영한다. 그리고 투영면에 투영된 화상을 각각 왼쪽 카메라와 오른쪽 카메라로 입력한다. 입력된 2개의 화상평면들사이의 에피폴라기초행렬을 리용하여 식 (15)의 제한밑에서 식 (17)의 목적함수를 최소로 하는 파라메터들을 구한 다음 립체시각체계의 카메라교정을 위 한 회전행렬을 결정한다. 립체시각체계를 다음의 그림에 보여주었다. 그림에서 보여준것처럼 격자무늬교정판을 투영하여 얻어진 화상을 2개의 카메라로 입력한다. 입력된 화상들에 대하여 왼쪽 카메라화상을 기준으로 오른쪽 카메라화상의 회전행렬 R 를 구하면 다음과 같이 표시된다. － 86 － 종합대학학보 정보과학 주체108(2019)년 제65권 제2호 997.0 066 .0 8 5 R = ⎛ ⎜ ⎜ ⎜ ⎝ 066.0 5 − 8 .0 997 .0 000 0 − 000 0 .0 ⎞ ⎟ ⎟ ⎟ ⎠ 0 0 1 그림. 립체시각체계 론문에서 제안한 방법과 선행방법[2]을 리용하여 두 카메라화상사이의 대응점들의 정 이 합을 진행하였다. 계산결과 자리표편차들의 합평균은 각각 611.0 561 와 72 .0 3 2 =E 1 =E 다. 이로부터 제안한 방법이 선행방법보다 카메라자세교정이 개선되였다는것을 알수 있다. 에피폴라기초행렬을 리용한 립체시각체계에서의 카메라교정방법을 제안하고 최량화 방법으로 카메라교정성능을 개선하였다. 맺 는 말 참 고 문 헌 [1] R. Hartley; Multiple View Geometry in Computer Vision, CAMBRIDGE University Press, 97～104, 2006. [2] H. Zhao et al.; Optics and Lasers in Engineering, 68, 1, 213, 2015. [3] J. Brito; Computer Vision and Image Processing, 157, 1, 254, 2017. 주체108(2019)년 2월 5일 원고접수 A Camera Calibration Method of a Stereo Vision System Using the Epipolar Fundamental Matrix Pang Kum Sok, Choe Chun Hwa In this paper, we have proposed a camera calibration method using the epipolar fundamental matrix between the images captured by two cameras in a stereo vision system. Key words: camera calibration, fundamental matrix, stereo vision system