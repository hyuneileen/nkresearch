김일성종합대학학보 정보과학 주체110(2021)년 제67권  제1호 3차스플라인과 속도벡토르마당을 결합한 이동로보트의 장애물회피운동계획 신 영 철 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《여러가지 로보트를 개발하고 받아들이는데서 나서는 과학기술적문제도 풀어야 하겠 습니다.》(《선집》 증보판 제11권 138페지) 선행연구들[2, 3]에서는 포텐샬마당법을 리용하여 기계손로보트와 이동로보트에서 장 애물을 회피하는 회전모멘트나 힘을 생성하는 방법들을 고찰하였다. 론문에서는 이동로보트에서 흡인속도벡토르와 반발속도벡토르를 합성하여 장애물을 회피하는 한가지 방법을 제안하고 모의실험을 통하여 그 효과성을 검증하였다. １．장애물회피를 위한 반발속도벡토르와 흡인속도벡토르 이동로보트의 장애물회피운동계획에서 가장 널리 리용되는 방법은 포텐샬마당법 (potential field method)이다.[2, 3] 포텐샬마당법은 장애물로부터 멀어지는 방향으로 작용하 는 척력(repulsive force)과 목표점에로 향하는 인력(attractive force)의 호상작용을 고려하여 이동로보트가 장애물과 충돌하지 않으면서 초기점으로부터 목표점에로 안전한 이동을 실 현하는 방법이다. 이 방법은 원래 기계손로보트의 경로계획을 위하여 제안되였는데 현재 는 이동로보트의 경로계획에 광범히 리용되고있다. 포텐샬마당법의 기본론의방식은 로보 트가 목표쪽으로는 끌리워가고 미리 알려진 장애물들로부터는 배척을 받는다는것이다. 장애물들과 이동로보트사이의 충돌은 포텐샬마당의 부의 그라디엔트로 표현되는 척 력에 의하여 회피된다. 한편 목표위치로 끌어당기는 어떤 인력의 작용에 의하여 이동로 보트는 목표위치에로 이동하게 된다. 포텐샬마당법에서는 로보트가 인공포텐샬마당 )(qU 의 영향을 받는 점으로 취급된다. 로보트는 마치 공이 경사면을 따라 굴러가는것과도 같이 이 마당을 따라 이동하게 된다. 포텐샬마당법에서는 로보트가 현재의 위치로부터 목표위치에로 향하도록 지도상에서 마 당 혹은 그라디엔트를 생성해낸다. 포텐샬마당법에서 목표점은 공이 끌리워가게 되는 흡인체 즉 포텐샬이 최소로 되는 점으로 취급되며 장애물은 공을 밀어내는 작용을 하는 봉우리 즉 포텐샬이 최대로 되는 점으로 취급된다. 결국 목표점은 로보트를 끌어당기는 인력으로 작용하며 장애물은 로보 트를 밀어내는 척력으로 작용한다. 이 2개의 힘들을 결합한 합성힘이 배렬공간의 점으로 가정한 이동로보트에 가해진다. 이와 같이 인공포텐샬마당은 로보트가 미리 알려진 장애물들을 회피하면서 목표점에 로 원활히 운동하도록 안내해준다. 여기서 중요한것은 포텐샬마당법이 단순히 경로계획 만이 아니라 로보트의 경로계획과 조종을 동시에 보장하기 위한 방법론이라는것이다. 다시말하여 결과적인 마당으로부터 로보트에 작용시켜야 할 힘 즉 로보트의 조종법 칙을 직접 결정해낼수 있는 방법론을 제공해준다. 3차스플라인과 속도벡토르마당을 결합한 이동로보트의 장애물회피운동계획 － 91 － 그러나 축구로보트와 같은 이동로보트에서는 동력학적조종보다도 운동학적조종을 진 행하는 경우가 많다. 이런 경우에 로보트에 대한 조종력으로 힘 혹은 회전모멘트가 아니 라 이동로보트의 속도를 취하는것이 합리적이다. 그러므로 론문에서는 장애물을 회피하기 위한 운동계획을 속도준위에서 진행하는 문 제를 고찰한다. 선행연구[1]에서 제안한 비홀로놈속박을 고려한 3차스플라인을 리용하여 생성한 목표궤 에로 로부터 목표점 도를 따라 이동로보트가 초기점 선속도 으로 운동하는 과정에 장애물이 나타났다고 하자. 이때 그림 1에서와 같이 포텐샬마당법에서의 반발력, 인력과 류사하게 장애물로부터 와 이동로보트로부터 목표점에로 향하는 흡인속도벡 의 반발속도벡토르 , 토르 , 를 정의한다. 그림 1. 반발속도벡토르와 흡인속도벡토르 그리고 이동로보트의 운동에 가장 큰 영향을 미치는 반발속도벡토르 와 흡인속도 벡토르 들의 크기를 다음과 같이 정의한다. (1) (2) 여기서 부터 현재 이동로보트위치까지의 거리, 반영하는 상수이다. 은 로보트가 반발속도벡토르의 영향을 받게 되는 거리, 는 장애물로 은 흡인속도벡토르의 크기에 대한 영향을 식 (1)로부터 반발속도벡토르는 이동로보트와 장애물사이의 거리에 따라 크기가 변 하는데 거리가 가까와질수록 지수함수적으로 증가한다는것을 알수 있다. 또한 흡인속도 벡토르는 속도벡토르마당안에서 크기가 일정하며 방향은 이동로보트의 현재위치에 따라 변하는데 로보트가 속도벡토르마당안에 들어설 때 생성되게 된다. － 92 － 종합대학학보 정보과학 주체110(2021)년 제67권 제1호 ２．반발속도벡토르와 흡인속도벡토르의 합성에 의한 장애물회피운동계획 이동로보트가 3차스플라인궤도계획에 따라 움직이다가 장애물근방의 속도벡토르마당 안에 들어서면 우에서 정의한 속도벡토르들의 합성법에 따라 운동을 진행하게 된다. 반발속도벡토르 R iv 와 흡인속도벡토르 T jv 를 합성하여 합성속도벡토르 ijv 를 다음과 같이 얻는다.(그림 2) v ij = R v i + v T j (3) 그림 2. 반발속도벡토르와 흡인속도벡토르의 합성 이동로보트가 장애물근방에 들어서면 식 (3)에 따라 결정된 합성속도벡토르 ijv 로부 vΔ 를 구하고 이 교정속도벡토르를 이동로보트의 현재의 선속도벡토 0v 과 합성하여 최종적인 속도벡토르 v 를 얻는 방법으로 이동로보트의 운동계획을 터 교정속도벡토르 르 진행한다.(그림 3) 그림 3. 이동로보트의 현재의 선속도벡토르와 교정속도벡토르의 합성 3차스플라인과 속도벡토르마당을 결합한 이동로보트의 장애물회피운동계획 － 93 － 우선 합성속도벡토르 ijv 의 크기는 코시누스정리를 리용하여 다음과 같이 구할수 있다. 이동로보트의 중심점을 R , 목표점으로 향하는 속도벡토르의 끝점을 T , 장애물의 중 심점을 O 라고 하자.(그림 4) 그러면 ROT Δ 에서 vij = 이다. OT 그림 4. 속도벡토르들사이의 관계 한편 흡인속도벡토르 T jv 와 반발속도벡토르 R iv 가 사귀는 각을 β 라고 표시하고 | RT =| A , | OR =| B , | OT =| C 라고 하면 2 C 2 = A 2 + B − 2 BA ⋅ ⋅ βcos (4) 이다. 이동로보트의 현재위치를 ( x , y d 라고 하면 흡인속도벡토르 d ( x obs , y obs ) ) , 목표점의 위치를 T jv 가 x 축과 이루는 각 ( x , ) y , 장애물의 위치를 R iv aβ 와 반발속도벡토르 g g 가 x 축과 이루는 각 rβ 는 각각 다음의 식에 따라 결정된다. ⎞ ⎟ ⎟ ⎠ y obs x obs a tan − − β a tan y x β r ⎛ ⎜ ⎜ ⎝ ⎛ ⎜⎜ ⎝ − − = = , a y y x x d g d g d d ⎞ ⎟⎟ ⎠ 식 (5)를 고려하여 β를 (5) a βββ r − = (6) 와 같이 구할수 있다. 다음 합성벡토르 ijv 의 방향각 θ를 계산하자. ∠RTO 라고 하면 합성벡토르 γ= ijv 의 방향각 θ 는 = βθ a + γ 이고 시누스정리를 리 C / sin( ) β = B / sin( ) γ ⇒ sin( ) γ = CB / ⋅ sin( ) β γ = a sin( CB / sin( β⋅ )) (7) 그런데 이때 얻어지는 각 γ 는 두 값을 가질수 있는데 그것은 sin함수가 ( ) , ππ− 구간 용하면 와 같이 되며 여기로부터 가 얻어진다. － 94 － 종합대학학보 정보과학 주체110(2021)년 제67권 제1호 sin(π 와 )4/ sin( π⋅ 3 )4/ 는 다같이 2/2 로 에서 대칭인 두 값을 가지기때문이다. 실례로 서 같은 값을 가진다. π 2/ 2 πγ 이거나 정확한 γ 를 구하기 위하여 각도판별조건 ≤≤ 각도계산의 편리성을 위하여 π≥γ 이거나  혹은 2 − −≤≤ πγπ π−≥≥ γ0 π≤≤ γ0 2/ 로 보정하여 ⋅ 에 놓이는것으로 판별한다. cos(β ) A B ≥ 를 주어 조건이 성립되면 γ 는 π−≤γ 인 각들은 정의 각 또는 부의 각으 사이 각으로 취한다.(그림 5) 그림 5. 각 γ 의 판별(ㄱ) /2π≥γ 일 때, ㄴ) /2π<γ 일 때) 따라서 합성속도벡토르 합성벡토르 ijv 의 방향각 θ도 구간 우와 같은 방법으로 합성벡토르 ijv 의 방향각 θ는 다음과 같다. = a + γβθ ( , ) ππ− (8) 를 넘으면 구간사이 각으로 보정해준다. ijv 의 크기와 방향각을 구한 다음 v Δ ⋅= t Δ⋅ vk ij p (9) 를 리용하여 교정속도벡토르 pvΔ 를 구한다. 식 (9)에서 0>k 은 이동로보트의 가속과 감속한계를 고려하여 교정속도벡토르 pvΔ 의 크기를 결정하는 상수이며 tΔ 는 조종주기이다. 그리고 식 (8)을 리용하여 교정속도벡토르 x, 성분을 y dx p cos(θ⋅Δ= ) v , dy p sin(θ⋅Δ= ) p pvΔ 의 v p 에 따라 얻고 이동로보트의 선속도벡토르 v 와의 합성을 다음과 같이 진행한다. v (10) Δ+ v = 0 pv 이동로보트의 장애물회피운동계획절차는 다음과 같다. 걸음 １ 이동로보트의 자세와 속도에 대한 초기조건과 종점조건을 다음과 같이 설정 한다. 우선 초기자세와 종점자세에 대하여 다음과 같이 설정한다. 다음 초기속도와 종점속도에 대하여 다음과 같이 설정한다. 0 q = [ x 0 , 0 y , θ T0 ] g q = [ x g , g y , g θ ] T 0 (cid:5) q = [ (cid:5) x 0 , (cid:5) y T0 ] g (cid:5) q = [ (cid:5) x g , g (cid:5) y T ] 3차스플라인과 속도벡토르마당을 결합한 이동로보트의 장애물회피운동계획 － 95 － 걸음 ２ 이동로보트의 x 자리표와 y 자리표에 대한 위치와 속도를 구한다. 걸음 ３ 운동과정에 장애물을 포착하면 장애물표면에서 일정한 간격의 법선방향으로 크기가 일정한 반발속도벡토르와 흡인속도벡토르들을 각각 식 (1), (2)에 따라 생성한다. 걸음 ４ 식 (3)－(8)에 따라 속도벡토르들의 합성을 진행하여 합성속도벡토르를 구한다. 걸음 ５ 식 (9)에 따라 교정속도벡토르 yx, 성분으로 분해한다. pvΔ 를 구하고 걸음 ６ 식 (10)에 따라 이동로보트의 선속도벡토르 0v 과 교정속도벡토르 pvΔ 를 합 성하여 이동로보트의 다음속도벡토르 v 를 얻는다. 걸음 ７ 장애물에 의한 속도벡토르의 작용이 없어질 때까지 걸음 4에로 이행한다. 걸음 ８ 반발속도벡토르의 작용이 없어지면 그 시점에서의 이동로보트의 자세와 속 도를 초기조건으로 하여 걸음 2를 실행한다. ３．모의실험 및 결과분석 론문에서는 장애물이 존재하는 경우 초기자세로부터 종점자세에로 3차스플라인을 리 용하여 이동로보트를 운동시키기 위한 장애물회피운동계획에 대한 모의를 진행하였다. 초기점과 종점에서의 위치조건과 속도조건을 다음과 같이 설정하였다. 우선 초기점에서는 다음과 같다. 0 q = [ x 0 θy , T0 ] = ]0,8.0,7.0[ T 0 0 , , (cid:5) y T0 ] = ]0,1.0[ T q = [ x , g y , g T ] θ = ,8.1,1.2[ π T ]2/ (cid:5) x 다음 종점에서는 다음과 같다. g = (cid:5) q [ g 0 g (cid:5) q = [ (cid:5) x g , g (cid:5) y T ] = ]1.0,0[ T 초기점과 종점에서의 속도조건들은 이 두 점에 gθθ ,0 서의 희망하는 방위 를 고려하여 설정하였 다. 또한 흡인속도벡토르곁수 α 는 0.6으로 설정하 였으며 교정속도벡토르곁수는 로 주었다. 이고 반경이 0.1m인 원모양의 장애물이 존재하는 경우에 이 장애물을 회피하는 이동로보트의 운동과정을 보 여주었다. 그림 6에 중심위치가 8.10=k )5.1,5.1( 초기에 이동로보트는 3차스플라인운동계획 방법으로 생성된 궤도를 따라 운동한다. 운동을 근방에서 장애물을 포착하였는 시작한 후 데 그 시각부터는 걸음 3－걸음 7에 따라 운동 을 진행한다. s9.3=t 그림 7과 8에 장애물을 포착한 이후에 우와 같은 방법으로 장애물회피운동을 진행하는 경우 x, 의 변화곡선을 각각 보여주었다. 그림 6. 장애물을 회피하는 이동로보트의 운동과정 y 우와 같은 모의를 통하여 제안한 3차스플라인과 속도벡토르마당을 결합한 방법에 의하 여 이동로보트가 장애물을 원만히 회피하는 운동계획을 진행할수 있다는것을 확증하였다. － 96 － 종합대학학보 정보과학 주체110(2021)년 제67권 제1호 그림 7. 장애물포착후 x 의 변화곡선(ㄱ) 위치변화, ㄴ) 속도변화) 그림 8. 장애물포착후 y 의 변화곡선(ㄱ) 위치변화, ㄴ) 속도변화) 이동로보트에서 속도벡토르마당의 흡인속도벡토르와 반발속도벡토르를 합성하는 방 법으로 장애물을 회피하는 한가지 방법을 제안하고 모의실험을 통하여 그 효과성을 검증 하였다. 맺 는 말 참 고 문 헌 [1] 신영철 등; 조선자동조종학회지, 1, 122, 주체108(2019). [2] Oscar Montiel et al.; Expert Systems with Applications, 42, 5177, 2015. [3] Yuwan Cen et al.; 16th IEEE International Conference on Control Applications Part of IEEE Multi-conference on Systems and Control Singapore, 10, 415, 2007. 주체109(2020)년 11월 5일 원고접수 Obstacle Avoidance Motion Planning for Mobile Robot Using  Cubic Spline and Velocity Vector Field Sin Yong Chol In the paper an approach has been proposed to avoid obstacles by combining the affective velocity vector and repulsive one, and the effectiveness has been proved through simulation. Keywords: mobile robot, obstacle avoidance, velocity vector field