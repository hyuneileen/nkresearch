김일성종합대학학보 정보과학 주체110(2021)년 제67권  제2호 파케트자리길리력에 기초한 망오유수정의 한가지 방법 리경심, 전남철 경애하는 동지께서는 다음과 같이 말씀하시였다. 《오늘 세계는 경제의 지식화에로 전환되고있으며 우리앞에는 나라의 경제를 지식의 힘으로 장성하는 경제로 일신시켜야 할 시대적과업이 나서고있습니다.》 론문에서는 자료중심망의 규모가 커지는데 따라 위상구조가 복잡해지는것으로 인한 망오유를 수정하는 한가지 방법을 제안하였다. １．선행연구 및 문제설정 자료중심망은 수십만개 혹은 수백만개의 봉사기들을 호상련결하여 클라우드봉사를 제공하면서도 늘어나는 사용자들에게 충분한 대역폭을 제공해야 한다. 자료중심망은 크게 세가지 즉 교환기중심의 자료중심망, 봉사기중심의 자료중심망, 빛섬유 및 무선장치중심의 자료중심망으로 분류한다.[1] 론문에서는 교환기중심의 자료중심망에서 발생하는 오유를 수정하기 위해 VL2와 F2-Tree위상구조에 대하여 고찰한다. 그림 1에 VL2의 구조를 보여주었다. ID 포구 AD 포구 … … 인터네트 핵심망 … 중간교환기 G10 련결 … … … 통합교환기 말단교환기 20개 봉사기 그림 1. VL2구조 VL2는 3준위로 중첩된 클로스망이다.  Fat-Tree와는 달리 VL2는 그림 1에서 보는것처럼 합교환기, 봉사기를 지원하는 20 × ( I DD × A )4/ ID 포구 중간교환기들과 개의 말단교환기들과 호상련결되여있다. AD 포구통 파케트자리길리력에 기초한 망오유수정의 한가지 방법 － 15 － ID 개 2/AD 개의 중간교환기들은 론리적으로 완전한 쌍방향그라프를 구성하기 위해 의 통합교환기들과 호상련결된다. 개별적인 말단교환기들은 2개의 통합교환기와 20개의 봉사기와 련결된다. VL2는 또한 1:1초과가입을 지원하며 케블배치는 고성능련결에 의해 Fat-Tree보다 복 잡하지 않다. 또한 고준위교환기의 경로조종비용이 Fat-Tree보다 더 높다. VL2는 가상적인 2준위망을 실현하기 위해 3준위경로조종구조를 리용한다.  VL2는 VLB를 리용하여 작업부하의 불균형을 없앤다. 또한 교환기들과 봉사기들을 하나의 전체적인 자원덩어리로 보고 봉사기들에 IP주소들과 작업부하를 할당한다. VL2는 임의의 6개의 도약경로를 추적하기 위해 3개의 련결을 표본화할것을 요구한 다. DSCP마당을 추가적으로 리용하는데 마당이 6bit이므로 k개의 련결이 있는 포드내에서 말단－통합련결을 표본화하기 위해 리용한다. 파케트가 6개의 도약경로상에서 지나간다면 1개의 DSCP값과 2개의 VLAN꼬리표를 나른다. 이런 방식으로 6개의 도약경로를 지나가는 파케트에 대해서는 자료평면에서 규 칙루실을 방지한다. F2-Tree구조는 고장견딜성을 높이기 위해 제안된 방법으로서 여러 뿌리를 가진 자료 중심망에서 고장발견시간을 크게 줄일수 있다. F2-Tree구조는 여분경로의 성능을 높이기 위해 일부 련결을 재련결하고 국부적으로 재경로조종하기 위해 일부 교환기구성을 변경한다. F2-Tree구조는 한고리내에서 핵심부층 혹은 통합층의 같은 포드내에 있는 교환기들을 련결한다. 이렇게 하여 고장이 발생했을 때 파케트전송을 정확히 할수 있는 타당한 련결 을 위한 즉시적인 사본화련결이 늘어나게 된다. ２．파케트자리길리력에 기초한 경로순환고리검출방법 론문에서는 우와 같은 자료중심망들에서 발생하는 오유들을 해결하는 망오유수정기 를 제안하였다. 망오유수정기는 개별적인 교환기와 호스트들이 유일한 ID를 가진다고 가정한다. linkID = : 한쌍의 린접한 switchID ( ) j > < i SS , i SS , , Lj Path = ( < > ) : 목록 switchID flowID = (<srcIP, dstIP, srcPort, dstPort, protocol>): 5개의 투플 Flow = (<flowID, Path>): 같은 flowID에서 나온 파케트들이 여러개의 Path들을 통과하 는 경우들에 유용하다. timeRange = timestamp ( < t i , t j > ) 망오유수정기는 switchID와 timestamp에 의한 모든 입력점을 해석한다. 실례로 망오유수정기는 jS 를 교환기 jS 에 들어오는 모든 련결로 해석하며 *, > < ) ( ( < it 는 시간 it 로부터 해석한다. )*, > 망오유수정기는 파케트자리길을 추적하여 망오유를 발견하고 그것에 대한 조종을 진 행한다. 망오유수정기가 파케트자리길을 추적하자면 개별적인 교환기들은 파케트머리부 에 switchID를 추가해야 한다. 그러나 파케트자리길에 속한 모든 switchID를 추가하면 파 케트머리부의 길이가 커진다. － 16 － 종합대학학보 정보과학 주체110(2021)년 제67권 제2호 망오유수정기는 상품교환기들을 리용하여 파케트자리길을 추적하기 위해 CherryPick[2] 의 련결표본화방법을 리용하여 파케트머리부공간을 최량화하면서 VLAN과 MPLS꼬리표 를 리용한다. 그림 2에 자료중심망에서 조종기와 망오유수정기의 호상동작과정을 보여주었다. 파케트는 자리길정보를 자기 머리부에 나른다. 수정응용 수정응용 프로그람들 프로그람들 지나치게 긴 경로를 가진 파케트를 가로채기 조종기 경보발생 요청, 응답 TIB 탐색 갱신 망오유수정기 API 자리길정보 추출 TCP Perf 감시기 OVS 대리기 파케트 흐름 자리길정보(TIB) 그림 2. 자료중심망에서 조종기와 망오유수정기의 호상동작과정 교환기 ASIC에서 파케트의 IP층을 분석하는것은 규칙루실을 초래하므로 조종기가 파케트를 식별하도록 한다. 조종기는 긴 경로를 가진 파케트를 가로채여 망오유수정기에 정보를 넘기고 망오유수정기는 턱값이상의 긴 경로를 통과하는 파케트를 식별하여 해석 한다. 론문에서는 실시간경로조종순환검출응용프로그람을 망오유수정기에 실현하였다. 조종기 5S 3S 망오유수정기는 망에서 긴 경로를 가 진 파케트를 분석하여 실시간적으로 경로 순환고리를 수정한다. 2개이상의 꼬리표를 나르는 하나의 파 케트는 자동적으로 조종자에게 직접 전달된 다. 조종자는 이상한 파케트들에 대한 검사 를 진행하고 경로순환고리들을 검출하여 수 정한다. 그림 3에 자료중심망에 존재하는 경로 순환고리를 보여주었다. 망오유수정기는 파케트머리부의 길이 가 긴 이상파케트들을 분석하여 순환고리 를 검출한다. 4S 6S B 2S 1S A 그림 3. 자료중심망에 존재하는 경로순환고리 그림 4에 파케트에 추가되는 련결꼬리 표를 보여주었다. 파케트자리길리력에 기초한 망오유수정의 한가지 방법 － 17 － 조종기 5S 3S 조종기 5S 3S 2S 2S 1S A 4S 6S B 4S 6S B S − 2 S 3 S − 4 S 5 S − 2 S 3 그림 4. 파케트에 추가되는 련결꼬리표 그림 5에 순환을 검출할수 있는 꼬리표를 가진 이상파케트를 보여주었다. 2S 1S A 조종기 5S 3S 4S 6S B S − 2 S 3 S − 4 S 5 S − 2 S 3 그림 5. 순환을 검출할수 있는 꼬리표를 가진 이상파케트 핵심부교환기 3S 은 세번째 꼬리표에 련결 S − 에 해당한 ID를 첨부한다. 통합 ( 2 4S 는 교환기의 ASIC가 2개의 VLAN꼬리표를 인식한 후 조종자에게 파케트를 층교환기 자동적으로 전송하며 파케트는 2개의 꼬리표를 나른다. 이 단계에서 조종자는 즉시에 파 케트머리부에서 반복된 련결 S − 을 발견함으로써 순환고리를 검출한다. S S ) ) ( 3 2 3 만일 조종자가 3개의 꼬리표에서 반복된 linkID를 찾지 못하면 조종자는 그 파케트 를 처음 보는 파케트로 인정하고 3개의 꼬리표를 국부에 저장한 다음 파케트머리부로부 터 그것을 잘라내여 교환기에 파케트를 전송한다. 론문에서는 파케트크기가 64B부터 1 500B사이에서 변하는 통화량을 생성하였다. 개 별적인 파케트들은 1, 2개의 VLAN꼬리표들을 나른다. 자리길기억에 4 000개의 흐름기록(24개의 호스트들과 련결된 하나의 랙크교환기에서 초당 100 000개의 흐름)을 유지하는 동안 망오유수정기는 초당 0.8～3.6Mbps를 탐색하거 나 갱신한다.(1 500B에 대하여 0.8Mbps, 64B에 대하여 3.6Mbps) 1S A － 18 － 종합대학학보 정보과학 주체110(2021)년 제67권 제2호 그림 6에 파케트크기에 따르는 망오유수정기의 처리량을 보여주었다. vSwitch 망오유수정기 / s p b M 량 리 처 4 3 2 1 0 64 128 256 512 1 024 1 500 파케트크기/B 그림 6. 파케트크기에 따르는 망오유수정기의 처리량 그림 6에서 보는바와 같이 망오유수정기의 처리량이 vSwitch의 처리량에 비하여 4% 높다. 파케트자리길리력에 기초하여 경로순환고리를 검출하여 망오유를 수정하는 방법을 제안하고 성능을 평가하였다. 맺 는 말 참 고 문 헌 [1] Tao Chen et al.; Journal of Parallel and Distributed Computing, 45, 2016. [2] T. Wang et al.; IEEE Globecom, 2252, 2014. A Method of Network Debugging Based on Tracing Packet Trajectories 주체110(2021)년 2월 5일 원고접수 Ri Kyong Sim, Jon Nam Chol In this paper we have proposed the network debugger based on tracing packet trajectories, i.e., it debugs routing loop in realtime by trapping a suspiciously long path in data center networks. Keywords: data center network, packet trajectory