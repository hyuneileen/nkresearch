김일성종합대학학보 정보과학 주체110(2021)년 제67권  제2호 웨브지물봉사에서 여러 말단의 동시편집실현을 위한 한가지 방법 량운혁, 장원철 경애하는 동지께서는 다음과 같이 말씀하시였다. 《과학연구부문에서는 주체공업, 사회주의자립경제의 위력을 강화하고 인민생활을 향 상시키는데서 나서는 과학기술적문제들을 우선적으로 해결하며 최첨단의 새로운 경지를 개척하기 위한 연구사업을 심화시켜야 합니다.》 콤퓨터망의 급속한 발전으로 하여 공간정보봉사는 웨브봉사를 제공하는 봉사기중심 의 웨브공간정보봉사로 확장되였으며 웨브상에서 다매체형식의 지리적묘사를 진행하는 새로운 형태로 발전하게 되였다.[1] 세계적으로 보면 여러가지 지도관련공개원천쏘프트웨 어들을 하나로 결합하는 방향으로 발전하고있는데 가장 주목되는것이 GeoServer봉사체계 와 OpenLayers서고의 결합구성방식이다.[2] 론문에서는 GeoServer-OpenLayers결합구성방식에서 지물잠금처리와 지물편집질문처리 방법을 적용하여 웨브지물편집봉사의 성능을 개선하고 여러 말단에서의 지물동시편집을 실현하기 위한 한가지 방법에 대하여 제안하였다. １．웨브지물봉사에서 지물편집의 실현방식 웨브봉사의 가장 중요한 우점은 웨브우에서의 다중플래트홈, 다중구조, 다중프로그람 언어호환성이다.[1] 웨브공간정보봉사가 이와 같은 웨브봉사기술에 기초하고있는것으로 하여 많은 사용자들이 콤퓨터망을 통하여 대규모적인 지리공간정보들에 쉽게 접근할수 있다.[3] 공개지리정보체계협회(OGC: Open GIS Consortium)에서는 공간정보를 처리하기 위한 여러가지 웨브봉사들을 표준화하여 공간정보봉사표준들을 제정하고 웨브지리정보체계에 서 이러한 공간정보봉사들을 실현하도록 하였다. 대표적인 웨브공간정보봉사[2]들에는 웨브지도봉사(WMS), 웨브지물봉사(WFS), 웨브 지물편집봉사(WFS-T), 웨브지도타일봉사(WMTS) 등이 있다. 이러한 공간정보봉사들을 리용하여 지도공간자료에 대한 관리와 웨브지리정보봉사체 계의 구축이 실현되고 말단사용자들은 지도열람 및 검색, 측정, 분석, 로정봉사 등 여러 가지 봉사를 제공받을수 있다.[3] 여기서 시공간적으로 볼 때 지형지물의 위치관계와 속 성관계가 부단히 확장, 갱신되므로 실시간적인 자료편집에 의한 공간자료관리가 매우 중 요한 문제로 나서게 된다. 선행한 GeoServer-OpenLayers결합구성방식에서 지물편집은 OGC의 웨브지물편집봉사 (WFS-T)에 기초하여 실현된다. 선행연구[3]에서는 임의의 말단들에서 WFS-T봉사를 리용하여 지물을 추가하고 변경, 삭제하는 경우 일반적으로 요청을 즉시 처리하므로 같은 대상에 대하여 여러개의 말단들 이 동시에 편집하는 경우 마지막편집요청에 대한 처리결과만 반영되는것으로 하여 편집 － 26 － 종합대학학보 정보과학 주체110(2021)년 제67권 제2호 결과가 정확히 구축되지 못하는 결함이 있다. 이로부터 말단사용자들이 웨브열람기를 리용하여 직결방식에서 지도편집을 실시간적 으로 진행할수 있는 봉사환경의 구축에서 웨브지물편집봉사의 성능을 개선하여야 할 필 요성이 제기되게 된다. ２．웨브지물편집봉사에서 지물잠금처리와 지물편집질문처리의 실현방법 론문에서는 여러 말단들에서 지물동시편집을 실현하기 위하여 지물편집요청에 대한 잠금처리를 진행하고 이에 기초하여 질문대기렬의 응답처리를 진행하였다. 우선 지물잠금대상 LockFeatureType를 다음과 같이 구성하였다.  lockaction , querygroup { , 여기서 querygroup은 질문묶음, query는 질문, expiry는 잠금시간, lockaction은 잠금동작, lockid는 잠금처리가 적용되는 지물대상의 식별자이다. LockFeatur (1) expiry lockid eType query = } , , querygroup은 query들의 모임으로서 자료보관고에서 실행될 질문정보들이다. expiry는 지물편집을 방해하는 기간으로서 잠금시간동안 지물은 편집불가능상태에 들어가게 된다. lockaction은 잠금동작으로서 1 혹은 0값을 가진다. 다음으로 질문대상 StoredQueryType를 다음과 같이 구성하였다. { 여기서 parameter는 파라메터목록, featureid는 질문처리가 진행되는 지물대상의 식별자이다. (2) StoredQuer parameter featureid yType = } , parameter는 질문과 질문이 적용될 자료보관고정보로 이루어진다. parameter = (query, datastore) 또한 정의한 지물잠금대상들과 질문대상들을 처리하고 관리하기 위한 대면부를 구성 하여 웨브지물편집봉사(WFS-T)에 지물잠금봉사와 지물편집질문봉사를 삽입하였다. 일반적으로 웨브지물편집봉사의 기본처리부인 WFSFactory에 의한 지물잠금처리 및 지물편집질문처리의 봉사기동과정은 그림 1과 같다. 봉사기기동 FactoryRegistry에 의한 Factory조사 WFSFactory적재 WFS-T봉사적재 등록된 Factory정보 화일 등록된 WFS-T 봉사화일 등록된 WFS-T 봉사함수화일 그림 1. WFSFactory에 의한 지물잠금처리 및 지물편집질문처리의 봉사기동과정 그림 1에서 보는바와 같이 봉사기는 기동시 FactoryRegistry에 의하여 등록된 Factory 적재된 WFS 봉사모임 웨브지물봉사에서 여러 말단의 동시편집실현을 위한 한가지 방법 － 27 － 들에 대한 정보를 얻는다. Factory는 큰 범위의 봉사로서 등록된 순서로 기억기에 적재된 다. 적재된 Factory봉사들은 부분봉사들에 대한 적재를 진행하며 부분봉사들은 봉사함수 들에 대한 적재가 끝난 후 봉사준비대기상태에 들어간다. 웨브지물편집봉사에서 지물잠금처리와 지물편집질문처리가 구현된 지물편집요청처리 과정은 그림 2와 같다. 편집질문목록 QueryListk구성 n }, = ,1｜ query { k k i i action , = , L filter k fid k ( = k i k i , i attr k i ) QueryList query k i 지물잠금방식 아니 요 청 예 ki = 0 fid ik 가 LockedFatureList에 있는가? 아니 아니 fid = k i fid k l 예 예 expiry 에 대한 시간계수 lk 0으로 초기화 query 를 StoredQueryList에 ik 보관 ki = i + 1 ki < n 아니 응 답 예 query 를 StoredQueryList에 보관 ik k ,( fid , k i expiry k i ) 삽입 ureList lockedFeat = ,{( e lockFeatur k = k 잠금된 지물목록 e lockFeatur { } k ｜ ) expiry fid , k l k l l ,1 L= , m } 시간계수 expiryl시간후 fidl을 LockedFeatureList에서 삭제 및 LockedFeatureList재구성 편집질문보관 대기렬 StoredQueryList 순서대로 query 실행 ik 그림 2. 지물잠금처리와 지물편집질문처리가 구현된 지물편집요청처리과정 응 답 － 28 － 종합대학학보 정보과학 주체110(2021)년 제67권 제2호 그림 2에서 보는바와 같이 개선된 지물편집요청처리에서는 편집자 k의 지물편집요청 처리시 편집대상들을 편집자별로 잠금한다. 실례로 편집자 k가 대상 를 편집중이면 잠금시간 expiry 동안에는 편집자 k만 fid ik 편집가능하고 나머지편집자들은 편집을 진행할수 없다. 잠금시간 가 지나면 잠금 ik expiry ik 이 해제된다. 되여있었다. 하는 방법을 제안하였다. 선행연구[3]에서는 편집질문이 들어오면 실행하여 결과를 응답하는 방식으로만 제한 론문에서는 그림 2에서 보는바와 같이 편집자들사이의 충돌이 전혀 제기되지 않도록 ３．지물잠금처리 및 지물편집질문처리의 프로그람적실현 제안한 지물잠금처리와 지물편집질문처리를 프로그람적으로 실현하기 위하여 론문에 서는 우선 개선된 웨브지물편집봉사대면부를 그림 3과 같이 구성하였다. EFactory WPSFactory … WFSFactory … WCSFactory InsertType UpdateType DeleteType ⋮ LockFeatureType GetFeatureWithLockType GetFeatureWithUnLockType ListStoredQueriesType CreateQueryType DropQueryType 그림 3. 개선된 웨브지물편집봉사대면부 그림 3에서 보는바와 같이 InsertType, UpdateType, DeleteType 등 WFS봉사의 부분봉사대 면부외에 지물잠금봉사대면부 LockFeatureType와 지물편집질문처리대면부 ListStoredQueriesType 를 새로 추가하였다. 다음 지물잠금처리와 지물편집질문처리가 구현된 개선된 웨브지물편집봉사의 클라스 들을 그림 4와 같이 구성하였다. 그림 4에서 보는바와 같이 지물편집봉사패키쥐의 클라스들로서 LockFeatureTypeImpl 과 ListStoredQueriesTypeImpl을 추가하였다. 웨브지물봉사에서 여러 말단의 동시편집실현을 위한 한가지 방법 － 29 － EPackageImpl WPSPackageImpl … WFSPackageImpl … WCSPackageImpl ListStoredQueriesTypeImpl LockFeatureTypeImpl DropQueryTypeImpl GetFeatureWithLockTypeImpl CreateQueryTypeImpl GetFeatureWithUnLockTypeImpl 그림 4. 개선된 웨브지물편집봉사의 클라스 LockFeatureTypeImpl클라스는 지물잠금봉사대면부 LockFeatureType의 실현클라스로서 편집대상들의 안전성을 담보하는 봉사를 제공하는 역할을 수행한다. 지물잠금봉사클라스는 편집자별로 편집중인 대상들에 대한 정보와 잠금상태정보에 대한 봉사를 제공하는 역할을 수행한다. 지물잠금봉사는 편집이 진행되는 전기간 실시간 적으로 봉사되며 편집말단들에서는 이 봉사를 통하여 편집자들의 편집활동을 감시할수 있다. ListStoredQueriesTypeImpl클라스는 지물편집질문봉사대면부 ListStoredQueriesType의 실 현클라스로서 편집질문들에 대한 봉사를 제공하는 역할을 수행한다. 편집질문봉사클라스는 편집중인 대상들에 대한 정보, 편집결과에 대한 정보, 질문의 실행순차에 대한 정보들을 봉사한다. 편집질문봉사는 편집이 진행되는 전기간 실시간적 으로 봉사되며 편집말단들에서는 편집질문의 동작상태를 파악하고 인위적으로 편집충돌 을 방지할수도 있다. 다음으로 웨브지리정보봉사체계에서 지물잠금처리와 지물편집질문처리를 실현하자면 지물잠금 및 지물편집질문관리봉사를 지도봉사기에 등록하여야 한다. 웨브지리정보봉사체계에서 지물잠금 및 지물편집질문관리봉사의 등록방법은 다음과 같다. 걸음  １  지리정보봉사기에서 WFSPackage(net.opengis.wfs/META-INF/services)등록부에 Extended-WFSTLockFeature라는 화일을 만든다. 이때 ExtendedWFSTLockFeature화일의 내용은 다음과 같다. LockFeatureTypeImpl GetFeatureWithLockTypeImpl GetFeatureWithUnLockTypeImpl 걸음  ２  지리정보봉사기에서 WFSPackage(net.opengis.wfs/META-INF/services)등록부에 Extended-WFSTStoredQuery라는 화일을 만든다. 이때 ExtendedWFSTStoredQuery화일의 내용은 다음과 같다.  ListStoredQueriesTypeImpl DropQueryTypeImpl CreateQueryTypeImpl － 30 － 종합대학학보 정보과학 주체110(2021)년 제67권 제2호 맺 는 말 참 고 문 헌 지물잠금대상과 지물편집질문대상을 새롭게 구성하고 그것에 기초하여 개선된 웨브 지물편집봉사의 실현방법을 제안하였다. 그리하여 선행한 방식에서 여러 말단들의 동시 편집시 요청의 즉시처리에 의하여 편집결과가 정확히 구축되지 못하는 결함을 극복하고 GeoServer-OpenLayers결합구성방식의 웨브지리정보봉사체계에서 여러 말단에 의한 지물동 시편집을 원만히 실현할수 있게 하였다. [1] 리금수 등; 망지리정보체계, 종합대학출판사, 241～273, 주체99(2010). [2] JIA Wenjue et al.; Geo-spatial Information Science, 7, 2, 148, 2004. [3] Lisheng Sun et al.; Asian Journal of Applied Sciences, 8, 3, 185, 2015. 주체110(2021)년 2월 5일 원고접수 A Method to Implement Several Terminal Spatial Data Editing Synchronization in Web Feature Service Ryang Un Hyok, Jang Won Chol In this paper, we have newly built the lock feature and the stored query object and proposed an improved web editing service implementation method. Keywords: WFS-T, lock feature, stored query