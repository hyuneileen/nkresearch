김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체103(2014)년 제60권 제10호 Vol. 60 No. 10  JUCHE103(2014). 수직경계와 적분화상을 리용한 차번호판검출의 성능개선 김순돌, 리계혁, 최철훈 문자인식의 응용분야의 하나인 차번호인식체계는 교통정보관리의 콤퓨터화를 실현하 는데서 중요한 역할을 수행한다. 차번호인식은 일반적으로 입력화상에서 차번호판령역을 찾 은 다음 그안에서 개별글자들을 분리 및 인식하는 방법으로 진행한다. 차번호화상에서 번호판의 추출 및 인식은 복잡한 배경하에서의 문자렬추출 및 인식문 제로서 문서인식의 일반적방법인 2값화 및 련결성분추출수법만으로는 해결될수 없다. 번호 판추출은 화상의 전체령역을 대상으로 진행하기때문에 많은 계산시간이 소비되며 실시간차 번호인식을 실현하자면 번호판추출시간을 결정적으로 줄여야 한다. 번호판령역추출의 대표적인 방법으로는 미분최대값과 련결성분추출에 기초한 방법[1], 수직경계화소들의 밀집정보에 기초한 방법[2]과 같은 경계정보를 리용하는 방법과 Adaboost 나 신경망을 리용하여 번호판과 비번호판을 식별하는 식별기에 기초한 방법[3, 4]들이 있 다. 이 방법들은 화상의 대조도가 낮거나 거짓경계가 많이 존재하는 경우 추출정확도가 낮 으며 계산량이 큰 결함이 있다. 론문에서는 수직경계에 기초한 한가지 안정하고 고속인 번호판추출방법을 제안한다. １．국부대조도강조 화상대조도강조는 전경과 배경사이의 농담값준위차를 강조함으로써 모호한 경계화소 들을 정확히 찾아내기 위한 전처리단계로 리용된다. 해빛반사나 전조등반사 등 여러가지 밝 기조건으로 인하여 지나치게 밝은 부분과 지나치게 어두운 부분이 동시에 존재하는 경우 화 상 전체 령역에서의 대조도강조는 효과가 없다. 차번호판령역추출에서 강조되여야 할 부분은 흐린 부분 즉 농담값분산이 작아 번호글 자와 배경의 구별이 명백치 않은 부분구역이다. 그러므로 화상강조의 파라메터로 국부령역 의 농담값분산을 리용하는 다음과 같은 국부화상강조수법을 제안한다. , 를 화소 ijP 에서의 입력화상과 강조된 화상의 농담값( Hi HW , Wj <≤ <≤ 0, , 0 ′ ij I I ij ijm σ, 를 창 는 화상의 너비와 높이), ijW 를 화소 ijP 를 중심으로 하는 고정된 크기의 창문, ij 문 ijW 안에서의 화소들의 농담값평균 및 표준편차라고 하자. 이때 화상강조식은 다음과 같 이 표시된다. f I I () ⋅ =′ ij (σ ij 여기서 함수 m ij f σ 는 부분구역의 농담값분산에 따르는 강조곁수로서 ijσ 가 령에 가 ( ij 까우면 그때의 부분구역은 단색령역으로 된다.이런 부분구역에 대해서는 대조도강조가 진 행되지 말아야 한다. 또한 ijσ 가 충분히 크면 대조도가 충분히 크다는것을 의미하며 이때 에도 대조도강조가 필요없다. (1) m ij + − ) ) ij － 32 － 수직경계와 적분화상을 리용한 차번호판검출의 성능개선 이로부터 f σ 는 분산값이 작은 일정한 구간에서만 1보다 큰 값을 취하고 다른 구 ( ij ) 간에서는 1을 취하도록 다음과 같은 형태의 함수식으로 결정한다. − ( σ ij − t 2 ) 1 2 2 ⋅ t 2 f ( σ ij ) 2 ⋅= e + 1 (2) 식 (2)는 일정한 구간에서 정규분포형태를 취하는 곡선을 표 시하는 함수이다. 여기서 1t 은 강조곁수가 제일 큰 경우의 값으 로서 30으로 정하며 2t 는 분포구간을 나타내는 값으로서 10으 f σ 의 그라프를 보여주었다. 로 정한다. 그림 1에 함수 ( ij ) 식 (1)에 의한 대조도강조는 매 화소에 대하여 일정한 크 )을 계산할것을 요 기의 창문안에서의 농담값평균과 분산( ijm σ, ij 그림 1. 강조곁수 f σ 의 ) ( ij 형태 구하며 결과 계산량소비가 커진다. 이로부터 론문에서는 다음과 같은 적분화상과 두제곱적 ijm σ, 의 계산시간을 단축하는 방법을 적용한다. 분화상을 리용하여 ∑ I ' , ≤ ∑ (3) (4) ′′ ji j 1 ij = = ' ≤ I I ij ij 2 j i i 2 ′′ ji j I ' ≤ i ' i ≤ , j 여기서 1 ijI 은 적분화상, 2 ijI 은 두제곱적분화상이다. 이때 화소 ijP 를 중심으로 하는 창문 ijW 에서의 농담값평균과 표준편차 ijm σ, ij 는 1 ijI 와 2 ijI 로부터 다음과 같이 계산된다. m ij ⎧ ⎪ ⎨ σ ⎪⎩ ij = ( I 1 C + I 1 A − I 1 B − I 1 D /) S = ( I 2 C + I 2 A − I 2 B − I 2 D /) 2 mS − ij (5) 여기서 S 는 창문 ijW 의 면적, 는 창문 ijW 의 왼쪽 웃모서리점(A)으로부터 시작 하여 시계바늘반대방향으로 조사되는 모서리점의 자리표이다. 창문 ijW 의 너비, 높이는 강 조하려는 차번호판령역의 크기에 관계되며 론문에서는 (60, 30)으로 설정한다. DCBA , , , 식 (3)－(5)를 리용하면 두번의 화상주사로 국부대조도강조를 진행하므로 계산시간을 대 폭 단축할수 있다. ２．수직경계검출 강조된 화상에 대하여 수직쏘벨연산자로 합성적연산을 실시하여 경계화상을 얻는다. 다음 경계화상의 평균경계값을 계산하고 상수 3t 을 곱한것을 턱값으로 하여 2값경계 화상 ijE 를 얻는다. 그런데 이때 얻어지는 경계화상의 경계선폭이 1이상으로 되기때문에 턱 값에 의한 2값화를 진행할 때 다음과 같이 수평방향에서의 비극대값억제를 적용하여 폭이 1인 경계화상을 얻는다. E ij = ⎧ ,1 ⎪ ⎨ ⎪⎩ 0 E ij ,0 4 ⋅≤ E , E 0 ij , 0 E > ij 1- 기타 E 0 ij > E 0 ij 1 + (6) － 33 － 종합대학학보(자연과학)   주체103(2014)년  제60권  제10호 여기서 E 0 ij = ( I ' i ,1 − j 1 + + 2 I ' i , + I ' i j 1 + ,1 + j 1 + ) − ( I ' i ,1 − j 1 − + 2 I ' i , + I ' i j 1 − ,1 + j 1 − ) , E = 1 HW ∑⋅ i , j 0 ijE 이다. 상수 3t 은 평균경계값이 비경계화소들의 영향으로 작아진다는것을 고려하여 턱값이 평 균값의 4배로 되도록 4로 정하였다. 얻어진 경계화상에는 차의 륜곽을 비롯하여 긴 경계선과 차주변의 미세한 잡음경계들 도 포함되여있다. 2값경계화상으로부터 련결성분을 추출하고 매 련결성분에 들어있는 화소 범위에 놓이지 않는 련결성분들은 제거하는 방법으로 잡음경계들을 제거한 개수가 t ( 다. 여기서 턱값 는 각각 짧은 경계선과 긴 경계선의 턱값을 나타내며 차번호판의 크 ) t t t 5 4 , 4 , 기를 고려하여 (5, 40)으로 정하였다. 5 ３．번호판령역의 결정 잡음경계제거후에 얻어진 경계화상을 조사하면 번호판령역에 경계화소들이 밀집되여 있는것을 알수 있다. 그러나 번호판령역이 아 닌 부분에 경계화소들이 밀집되여있는 경우들 도 존재한다. 이로부터 경계화소들의 밀집성만 을 가지고 번호판령역을 추출하기는 어렵다. 그 림 2에서 보는바와 같이 번호판령역에서는 경 계화소들이 수평으로 긴 직4각형형태로 밀집되 여 나타나지만 비번호판령역에서는 경계선의 길 이나 웃끝, 아래끝의 위치가 고르롭지 않다. 그림 2. 번호판령역의 경계밀집특성(ㄱ))과 번호판령역안은 경계화소들이 밀집되여있 으며 그 주변령역에는 경계화소들이 존재하지 않는다. 이러한 특성을 가진 령역을 검출하기 위 하여 그림 2의 ㄴ)와 같은 특징마스크를 리용한다. 이때 특징마스크의 아낙 및 바깥4각형 의 정점을 왼쪽 웃정점부터 시작하여 시계바늘반대방향순서로 } NMLK ,{ 특징마스크(ㄴ)) DCBA , ,{ }, , , , 으로 표기한다. 을 리용한다. 또한 추출시간을 단축하고 척도안정성을 보장하기 위하여 경계화상에 대한 적분화상 번호판령역결정알고리듬은 다음과 같다. ① 경계화상 E 에 대한 적분화상 1E 을 식 (3)과 같은 방법으로 작성한다. ② 특징마스크를 경계화상의 좌우상하로 4화소씩 밀면서 특징마스크의 바깥4각형안의 경계점수와 아낙4각형의 경계점수의 차 1 K ⋅= α (2{ 1 M F E E + − E 1 N − E ) − ( 1 L 1 E C + E 1 A − E 1 B − E 1 D )} (7) 를 정합측도로 계산한다. 가장 작은 정합측도값을 주는 령역의 자리표가 이미 등록된 번호 판후보령역들과 겹치는 부분이 없으면 이 령역을 번호판후보령역으로 등록한다. ③ 특징마스크의 4각형크기(너비, 높이)에 척도인자를 곱하여 4각형크기를 변경시키는 방법으로 ②를 반복계산한다. － 34 － 수직경계와 적분화상을 리용한 차번호판검출의 성능개선 ４．실험결과 및 성능평가 실험은 도로측면에 설치된 촬영기로 입력한 차번호화상들에 대하여 진행하였다. 이때 입력화상의 크기는 384pixcel×288pixcel이다. 입력화상에 대하여 P4(3GHz CPU)콤퓨터에서 성능실험을 하였다. 제안한 방법과 선행한 방법[1, 2]과의 성능비교를 표에 보여주었다. 방법 화상개수 선행한 방법[1] 선행한 방법[2] 제안한 방법 747 747 747 제1위 후보 검출개수 672 684 716 표. 성능평가 제2위 후보 검출개수 37 42 27 검출실패 개수 38 21 4 검출시간/ms 검출률/% 50 35 20 94.9 97.2 99.4 표에서 제1위 후보검출개수는 번호판후보들중 제1위 후보에 정확한 번호판령역이 검 출된 개수를 의미하며 검출실패는 2위 후보에도 정확한 번호판령역이 검출되지 않은 경우 를 의미한다. 표에서 보는것처럼 제안한 방법이 선행한 방법에 비하여 검출률과 검출시간 지표가 개선되였다는것을 알수 있다. 참 고 문 헌 [1] 종합대학학보(자연과학), 51, 8, 36, 주체92(2003). [2] D. Zheng; Pattern Recognition, 26, 2431, 2005. [3] C. C. Chen; IAPR Conference on Machine Vision Application, 5, 16, 2007. [4] R. Parisi; IEEE Internat Symp. on Circuits and Systems, 3, 195, 1998. 주체103(2014)년 6월 5일 원고접수 On the Improvement of License Plate Location by Vertical Edge and Integral Image Kim Sun Dol, Ri Kye Hyok and Choe Chol Hun We propose a robust and high speed method of license plate location even though the vehicle image with low contrast. By experiments we confirmed that the proposed method effectively improve the speed  and location rate of license plate by local contrast enhancement method using integral image and extraction of vertical edge concentration. Key words: license plate location, integral image, vertical edge extraction － 35 －