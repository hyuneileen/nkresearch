김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체103(2014)년 제60권 제7호 Vol. 60 No. 7  JUCHE103(2014). EEPROM을 식별카드로 리용한 USB결합 자료관리프로그람 석철, 정철진 위대한 령도자 동지께서는 다음과 같이 지적하시였다. 《과학기술을 발전시켜야 나라의 경제를 빨리 추켜세울수 있으며 뒤떨어진 기술을 앞선 기 술로 갱신하여 생산을 끊임없이 높여나갈수 있습니다.》(《선집》 제20권 증보판 62페지) EEPROM을 식별카드로 리용한 자료관리프로그람에 대한 자료[1, 2]는 구체적으로 밝 혀져있지 않다. 우리는 사용자 ID가 기록된 EEPROM구성회로와 USB결합부 및 장치조종프로그람과 장 치로부터 자료의 입출력을 진행하며 자료를 합리적으로 관리 및 열람하기 위한 응용프로 그람에 대하여 고찰하였다. １．EEPROM을 리용한 사용자카드와 USB결합부 사용자의 ID를 보관하기 위하여 EEPROM－24C02(128kB)를 리용하였다. 결합부에 동시에 자료기지관리자와 사용자의 카드 2개가 접속되는 경우를 구별하기 위 하여 관리자카드는 ROM의 A0, A1핀을 접지시키고 A2핀에 전원을 련결하여 주소 100으로 설정하고 사용자카드는 A0, A2핀을 접지시키고 A1핀에 전원을 련결하여 주소 010으로 설 정하였다. 다음으로 결합부를 구성하기 위하여 FX2계렬 전용결합소자 CY7C68013을 리용하여 USB 결합부를 제작하고 이 조종소자의 I2C결합모선을 리용하여 ROM접속을 실현하였다. ２．FX2조종소자프로그람 결합부는 응용프로그람에서 전송되는 SetUp파케트를 분석하여 사용자정의형인 경우 파 케트의 bRquest마당자료에 따라 EEROM 읽기 및 쓰기를 진행하여 결과를 다시 주콤퓨터로 전송한다. SetUp파케트의 분석에 따라 EEROM 읽기 및 쓰기를 진행하는 부분의 코드를 요약하 면 다음과 같다. #define VX_MST_RD 0xB2 //Master card read command #define VX_SLV_RD 0xB3 //Slave card read command #define VX_SLV_WR 0xB4 //Slave card write command #define VX_MST_WR 0xB5 //Master card write command － 74 － EEPROM을 식별카드로 리용한 USB결합 자료관리프로그람 #define MST_ADDR 0x51 //master card address #define SLV_ADDR 0x50 //slave card address BOOL DR_VendorCmnd(void) { BYTE i; switch(SETUPDAT[1])  { //TPM handle new commands   case VX_MST_WR:          I2C_Addr=MST_ADDR;          EP0BCH=0;          EP0BCL=0;          while(EP0CS & bmEPBUSY);          EEPROMWrite(0, 5, EP0BUF);       break;   case VX_MST_RD:          I2C_Addr=MST_ADDR;          while(EP0CS & bmEPBUSY);          for(i=0; i<5; i++)          *(EP0BUF+i)=0xcd;          EEPROMRead(0, 5, EP0BUF);          EP0BCH=0;          EP0BCL=5;       break;   case VX_SLV_WR:        I2C_Addr=SLV_ADDR;        EP0BCH=0;        EP0BCL=0;        while(EP0CS & bmEPBUSY);        EEPROMWrite(0, 5, EP0BUF);      break;   case VX_SLV_RD:        I2C_Addr = SLV_ADDR;        while(EP0CS & bmEPBUSY);        for(i=0; i<5; i++)        *(EP0BUF+i)=0xcd;        EEPROMRead(0, 5, EP0BUF);        EP0BCH=0; － 75 － 종합대학학보(자연과학)   주체103(2014)년  제60권  제7호 EP0BCL=5;      break; } return(FALSE); // no error; command handled OK } ３．자료관리프로그람 응용프로그람에서는 초기화과정에서 해당 변수초기화를 진행한 다음 카드읽기지령을 USB결합부조종드라이버에 전송한다. 다음 읽은 결과에 따라 자료관리권한을 설정하고 사용자의 지령에 따라 자료의 입력 과 열람을 진행한다. 자료기지는 data.mdb로 보관되며 암호를 설정하여 프로그람에 의해서 만 열람 및 수정할수 있다. 프로그람은 설치판으로 되여있으며 허가번호가 입력된 경우에만 실행된다. 프로그람의 허가번호생성은 해당 하드의 계렬번호를 리용하여 진행되므로 허가번호생 성프로그람을 리용해야만 프로그람을 리용할수 있다. 다음으로 프로그람에서는 현재 입력된 카드에 따라 관리자카드가 접속되였으면 사용 자의 정보와 개별적사용자들의 자료보관상태, 지표에 따르는 총적인 입출고량 등을 여러가 지로 열람할수 있다. 그러나 정보들에 대한 수정은 진행할수 없게 되여있다. 또한 관리자와 사용자카드가 동시에 접속된 경우에는 자료기지가운데서 해당 사용자 의 자료만이 현시되며 수정, 열람가능하다. 그외에는 프로그람이 실행되지 않도록 되여있다. 이에 따라 현존상태도 변화되게 되며 이러한 수정은 프로그람에서 관리자와 사용자의 카드가 동시접속된 상태에서만 가능하다. 시험적으로 진행한 자료처리에 대한 몇가지 대비자료는 표와 같다. 표．자료처리성능비교 지표 프로그람의 도입이전 프로그람도입후 자료처리효률 자료처리정확성/% 자료보안/% 하루 10h동안 작업 90 0 즉시처리 100 100 1) EEPROM을 식별카드로 리용하기 위한 구성회로와 조종소자 CY7C68013을 리용하 여 USB포구에 의한 콤퓨터접속을 실현하였다. 2) EEPROM자료를 I2C모선을 통하여 읽기, 쓰기할수 있는 장치조종프로그람과 EEPROM 에 보관된 식별ID에 따라 사용자의 요구에 맞게 열람 및 수정할수 있도록 하는 응용프로 그람을 작성하였다. 맺 는 말 － 76 － EEPROM을 식별카드로 리용한 USB결합 자료관리프로그람 참 고 문 헌 [1] 종합대학학보(자연과학), 55, 9, 98, 주체98(2009). [2] 석철 등, 자연과학론문집 88, 종합대학출판사, 80, 주체98(2009). Data Process Program through USB using EEPROM as ID Card 주체103(2014)년 3월 5일 원고접수 Sok Chol, Jong Chol Jin The problem of USB connection with EEPROM by using CY7C68013 was considered. The program that could manage data by means of EEPROM as ID card was drawn up.  Key words: EEPROM, USB connection － 77 －