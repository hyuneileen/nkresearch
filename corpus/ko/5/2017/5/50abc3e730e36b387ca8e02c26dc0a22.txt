김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체106(2017)년 제63권 제5호 Vol. 63 No. 5  JUCHE106(2017). 극소형처리기 STM32F103RE를 리용한 다통로진폭분석기에 대한 연구 한정혁, 윤철혁 위대한 수령 동지께서는 다음과 같이 교시하시였다. 《원자력을 생산에 받아들이기 위한 연구사업을 전망성있게 진행하며 방사성동위원소 와 방사선을 공업과 농촌경리를 비롯한 여러 부문들에 널리 적용하여야 할것입니다.》 (《전집》 제27권 391페지) 현재 다통로진폭분석기는 핵물리연구에서는 물론 물질분석을 비롯하여 방사성동위원 소와 방사선을 인민경제 여러 부문에 널리 리용하는데서 중요한 수단의 하나로 되고있다. 특 히 고분해능의 반도체검출기들이 실험실적인 범위에서만이 아니라 생산현장에서도 리용될 수 있게 계렬생산되고있는 오늘의 현실은 다통로진폭분석기의 분해능을 높이고 동작특성 을 개선하며 그 제작을 고도로 집적화, 경량화할것을 요구하고있다. 다통로진폭분석기에 대 한 이러한 요구는 최근 한소편처리기술의 급속한 발전으로 하여 원만히 보장되고있다. 이전시기 극소형처리기로 다통로진폭분석기를 구성한 실례로는 PIC18F4550을 리용한 분석기와 MCS-51계렬의 한소편콤퓨터 8032를 리용한 분석기, 극소형조종기 8051과 USB조 종기가 결합되여있는 USB조종소편 CY7C68013을 리용한 분석기 등이 있다. PIC18F4550을 리용한 분석기는 A/D변환기의 분해능이 10bit이므로 통로수를 1024이상 으로 할수 없다. 또한 내부자료기억기의 용량이 충분하지 못하므로 1 024통로측정을 위하 여 외부에 기억기를 설치하여야 한다.[1, 3] MCS-51계렬의 한소편콤퓨터 8032를 리용한 분석기는 내부장치가 매우 간단하므로 스 펙트르측정에 필요한 프로그람기억기(ROM)와 자료기억기(RAM), A/D변환기 등을 외부에 서 구성해주어야 한다. USB조종소편 CY7C68013을 리용한 분석기는 스펙트르측정에 콤퓨터의 내부기억기를 리 용하고있다.[2] 우리는 이전의 진폭분석기구성에서 제기되던 일련의 문제점들을 해결하기 위하여 극 소형처리기 STM32F103RE를 리용한 다통로진폭분석기의 구성가능성을 밝히고 이에 기초 하여 4 096통로진폭분석기를 구성하였다. １．STM32F103RE를 리용한 다통로진폭분석기의 구성 극소형처리기 STM32F103RE를 리용하여 다통로진폭분석기를 구성할수 있는 가능성은 ① STM32F103RE의 동작주파수가 72MHz로서 아주 높기때문에 프로그람실행속도가 매 다음과 같다.[4] 우 빠르다. 극소형처리기 STM32F103RE를 리용한 다통로진폭분석기에 대한 연구 － 71 － ② 12bit의 분해능을 가진 3개의 독립적인 A/D변환기를 가지고있으므로 4 096통로진폭 분석기를 구성할수 있다. 또한 A/D변환기의 최대변환속도가 4 096통로에서 1MSPS로서 매 우 빠르기때문에 변환시간에 대한 요구를 충분히 만족시킨다. ③ 봉우리검출신호에 의한 외부사건이 발생하면 A/D변환이 새치기처리봉사를 받지 않 고도 사건구동방식으로 즉시에 진행될뿐아니라 변환결과처리도 DMA를 통하여 진행하면         1개 임풀스에 대한 불감시간을 훨씬 줄일수 있다. ④ 또한 STM32F103RE의 내부프로그람기억기용량은 512KB, 자료기억기용량은 64KB 로서 스펙트르측정에 충분하다. 로 프로그람작성이 아주 편리하다. ⑤ 실시간시계기능도 갖추고있으며 모든 자료처리가 32bit 혹은 16bit단위로 진행되므 ⑥ STM32F103RE는 내부에 우선권방식을 적용한 끼움식새치기조종기를 갖추고있으므 로 새치기처리시간이 매우 짧고 유연하다. 이와 같이 극소형처리기 STM32F103RE를 리용하면 장치구성이 매우 간단하면서도 스펙 트르측정조건들을 충분히 만족시키는 다통로진폭분석기를 구성할수 있다. 극소형처리기 STM32F103RE를 리용한 다통로진폭분석기의 구성도는 그림 1과 같다. 그림 1. 다통로진폭분석기의 구성도 봉우리검출 및 유지회로에서 얻어진 봉우리검출신호는 극소형처리기의 EXTI11선에서 처 리기내부의 A/D변환기에 대한 외부시동을 일으켜 프로그람적인 조작이 없이 순수 장치적 으로 A/D변환을 시작하도록 한다. A/D변환끝새치기가 발생하면 변환결과처리, 눈금이동량설정, 봉우리검출회로의 기억콘 덴샤방전 및 문열기신호출구 등의 동작을 프로그람적으로 수행한다. 또한 A/D변환끝새치기의 우선권을 높여주어 다른 부분의 새치기처리기간에도 A/D 변환끝새치기가 발생하면 그 요구부터 먼저 처리하도록 하여 스펙트르측정 및 처리속도 를 훨씬 높인다. 극소형처리기는 내부자료기억구역에 스펙트르자료보관구역(2B×N, N은 통로수)을 할당 하고 측정자료를 보관한다. 따라서 콤퓨터와의 결합은 비직결방식으로 실현된다. MPU와 콤퓨터와의 결합을 위하여 STM32F103RE가 가지고있는 비동기식직렬통신포구 (USART1)를 리용하였다. STM32F103RE는 PA9/USART1_TX 단자와 PA10/USART1_RX 단자를 리용하여 다른 장 치들과의 비동기식직렬송수신을 진행한다. 콤퓨터는 RS-232통신규약에 기초한 표준직렬통신포구(COM포구)를 가지고있으며 이 포 구를 리용하여 STM32F103RE와의 결합을 실현할수 있다. STM32F103RE의 직렬통신포구의 － 72 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제5호 신호준위와 극소형콤퓨터의 신호준위가 서로 차이나기때문에 준위변환소자 MAX3232를 리 용하여 준위변환을 진행하였다. 론문에서 구성한 다통로진폭분석기의 적분비선형성과 미분비선형성은 4 096통로에서 각 각 0.1, 2%이며 변환시간은 2μs이다. 선행연구[1]에서 고찰한 다통로진폭분석기의 적분비선형성과 미분비선형성은 1 024통 로에서 각각 0.5, 2.6%이며 변환시간은 17μs이다. ２．몇가지 표준원천들의 스펙트르측정 우리는 새로운 다통로진폭분석기를 리용하여 스펙트르메터를 구성하고 몇가지 표준방 사성원천들의 스펙트르를 측정하였다. 스펙트르메터의 구성도는 그림 2와 같다. 섬광검출기로는 NZ-307(섬광체 NaI (Tl), 빛전자증배관, 예비증폭기)을 리용 하였고 고압직류안정전원과 선형임풀 스증폭기는 표준실험체계 CAMAC의 고압직류안정전원 및 선형임풀스증폭 기모듈을 리용하였다. 표준방사성원천 그림 2. 스펙트르메터의 구성도 들로서는 137Cs, 60Co을 리용하였다. 몇가지 표준방사성원천들의 스펙트르측정결과를 그림 3, 4에 보여주었다. 그림 3. 137Cs원천의 스펙트르 그림 4. 60Co원천의 스펙트르 스펙트르메터의 분해능은 256통로에서 8%였다. 우리가 구성한 분석기가 섬광 γ스펙트 르메터의 요구를 충분히 만족시킨다는것을 확인하였다. 맺 는 말 우리는 극소형처리기 STM32F103RE를 리용한 다통로진폭분석기의 구성가능성을 밝히 고 그에 기초하여 4 096통로진폭분석기를 구성하였으며 특성량을 결정하였다. 적분비선형 성은 0.1%, 미분비선형성은 2%, 변환시간은 2μs이다. 다통로진폭분석기를 리용하여 스펙트르메터를 구성하고 137Cs과 60Co표준원천들의 스 펙트르를 측정하였다. 에네르기분해능은 256통로에서 8%이다. 극소형처리기 STM32F103RE를 리용한 다통로진폭분석기에 대한 연구 － 73 － 참 고 문 헌 [1] 종합대학학보(자연과학), 56, 12, 76, 주체99(2010). [2] 종합대학학보(자연과학), 55, 9, 98, 주체98(2009). [3] Microchip Technology Inc; PIC18F2455/2550/4455/4550 Data Sheet, 247～256, 2007. [4] STMicroelectronics; UM0488 User Manual/STM3210E-EVAL Evaluation Board, 14～19, 2013. On the MCA using Microchip Controller STM32F103RE 주체106(2017)년 1월 5일 원고접수 Han Jong Hyok, Yun Chol Hyok We clarified the configuration possibility of MCA using microchip controller STM32F103RE and configured the 4096 channel analyzer based on it. And we determined the characteristic quantity of the MCA. The integral nonlinearity, differential nonlinearity and conversion time of the MCA were 0.1, 2% and 2μs particularly. The energy resolution of the MCA was 8% on 256 channel scale.  Key words: microcontroller, MCA, analyzer