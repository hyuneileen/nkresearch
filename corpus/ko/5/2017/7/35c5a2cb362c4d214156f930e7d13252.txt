김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체106(2017)년 제63권 제7호 Vol. 63 No. 7  JUCHE106(2017). 불변량을 리용한 촬영기이지러짐교정방법 하정원, 최춘화 선행연구[1]에서는 사영불변량인 교차비를 촬영기렌즈이지러짐교정에 리용하였지만 한 직선상에 놓이는 4개의 점을 가지고 교차비를 구하였으므로 교정판의 수직선들의 기 하학적관계를 고려하지 못하였다. 선행연구[2]에서도 촬영기렌즈이지러짐교정에 교차비를 리용하였지만 1차방사이지러짐만을 고려하여 실험을 진행하였다. 이로부터 우리는 교정판의 수직선들의 기하학적관계를 고려한 교차비를 리용하여 촬 영기렌즈의 이지러짐을 교정하기 위한 한가지 방법을 제기하였다. １．교차비를 리용한 촬영기렌즈이지러짐교정방법 렌즈이지러짐교정에서 점들사이의 거리와 같은 기하학적관계를 만족시키는것은 매우 중요한 문제이다. 사영변환에 의하여 변하지 않는 점들사이의 거리와 같은 불변량은 사영 촬영기모형을 모르고도 화상점들의 위치를 교정할수 있게 한다. 사영기하는 거리도 거리비도 보존하지 않는다. 그러나 교차비(cross ratio)는 보존하며 따라서 촬영기모형으로 표현되는 투시투영을 모르고도 점들의 위치를 교정할수 있다. 즉 교차비는 투시투영에 의하여 불변이다. 4개 점 , DCBA , , 가 한 직선 l 우에 순서대로 있으면 그 점들에 대한 교차비는 다 음과 같이 정의된다. DCBACR ( , , , =) (1) AC CB AD DB 여기서 점 A 와 B 는 기준점이고 C 와 D 는 참고점이다. 교차비의 불변특징은 관측된 화상점을 교정하는데 적용할수 있다. 평면교정판에서 한 에 대하여 , x=x x=x , , , y y y ) ( ( ) ) ( ) , , x=x 3 3 3 2 2 2 4 4 4 직선우에 놓이는 4개 점 , x=x 1 1 교차비는 다음과 같이 쓸수 있다. ( y 1 CR ( xx , 1 2 , x 3 , =x ) 4 (2) d 13 d 14 2 ⋅ ⋅ d d 24 23 y 여기서 ijd 는 점 ix 와 jx 사이의 거리 , 3x , 4x 의 정확한 화상자리표를 vu=m ( 1 고 하면 교차비의 불변성으로부터 다음의 방정식이 성립한다. u=m ( , x i − + − = d v y x ) ) ( ( ) 1 2 2 2 1 , , j i 2 ij j ) 을 나타낸다. 점 1x , 2x , 라 u=m ( , v ) ) vu=m ( , , 4 4 3 3 4 2 3 CR ( , mmmm 2 3 1 , , 4 ) = = CR ( , xx 1 2 , x 3 , x 4 ) (3) s 13 s 14 ⋅ ⋅ s 24 s 23 여기서 ijs 는 점 im 와 j 모든 특징점들에 대하여 균등분포를 가지기때문에 ) 교정판의 4개 점과 대응하는 화상점에서 같다. 이지러진 자리표 jm 사이의 거리 xCR ( 1 u ( v i + = − − u x x x v ) ) ( 3 4 2 , , , j i 2 s ij 2 2 을 나타낸다. 평면교정판은 는 균등분포된 평면 id ,m 는 정확한 점 불변량을 리용한 촬영기이지러짐교정방법 － 43 － im 로 교정되면 교차비 xCR ( 1 , x 2 , x 3 , x 4 ) 를 만족시킨다. 론문에서는 교차비결정을 위한 4개 점을 한 직선우에서의 거리관계를 만족시키면서 도 교정판을 구성하고있는 각이한 직선들의 기하학적관계를 유지하도록 다음과 같이 설 정하였다. 그림 1은 교정판의 한직선우에 놓이는 4개 점( , DCBA , , )들과 투시투영후의 4개 점 들을 보여주고있다. 여기서 점 B 를 주목하는 직선에 수직인 직선우의 점들에 의하여 결 정함으로써 교차비의 불변성을 만족 시키면서도 교정판의 수직선들의 기 하학적관계도 만족시키도록 한다. 우에서 특징점들을 한직선상에 있는 N 개 점들로 이루어진 L 개 모임으로 분할하자. 여기서 L 은 교 정판의 직선수이고 N 은 매 선상에 있는 점의 수이다. l,m 는 l 번째 직 , L 선의 i 번째 특징점이다.( l i i ,1 L= , N ) 이지러진 화상점 , ,1 L= ,m ld , i 의 정확한 위치 l,m 를 찾자면 를 시작점으로 하여 다음식을 ,m ld 최소로 하는 비선형탐색을 진행하여야 한다. i i , ㄱ) ㄴ) 그림 1. 교차비결정을 위한 교정판(ㄱ))과 그 투시투영화상(ㄴ))에서의 4개 점 그림에서 점 E 와 F 는 교정판의 특징점으로 설정하고 그 점들을 맺는 직선과 주목하는 직선(AD)의 사귐점으로 점 B 를 설정함 J CR = 3 CR ( L N − ∑ ∑ l 1 = i 1 = ( m l , i u ( , v ld , , i ld , , i ), m ′ l , ( m i 1 + ld , , i , m ld , , i 1 + ld , ,1 + i 1 + ld , + ,3 i + 2 , m , m ), m u ( l , i + 2 ld , , i + 2 ld , , i + 2 l , i + 3 ld , , i + 3 ld , , i + 3 ), m u ( , v , v (4) , x 3 , x 4 )) 2 )) − CR xx , ( 1 2 , L+′ i (1 ) lm ,m ld 이며 따라서 점 로 i , + i ,3 ldm , 에 의하여 결정되므로 + 2 , 1 + ldm ,1 + i , ldm , 여기서 lm (, Li ) 는 이지러지지 않은 점 A, C, D의 자리표이며 은 선분 AB′와 선 분 EF의 사귐점 B의 이지러지지 않은 자리표이다. 점 A의 이지러진 자리표를 보면 점 B′, E, F의 이지러진 자리표는 ldm , , +i 1 , lm m , L+′ i (1 ) +′ m ( l i , 1 은 ,m ld , i , , m , m ld , , i ld , , i 1 + ld , ,1 + ld , + ,3 i + 2 +i 1 , ldm , m , 1 + i , , + i ,1 ldm , 이다. 마지막 3개의 수평선과 수직선에 대하여서 ) + i ,3 1 + + 2 는 이전 직선들을 리용하여 점 B 를 계산한다. 선택한 평면교정판이 수직, 수평방향의 직선을 가지고있다는것을 고려하면 이 방정식 은 수평, 수직직선들에 대하여 성립된다. 매 화상점들은 두 직선에 속하며 그것들의 사귐 점이다. 이렇게 이 점들의 교차비는 식 (4)가 최소일 때 두 방향의 근방점들에 대하여 성 는 평면견본을 설계할 때 미리 계산한다. 우의 교정판인 경우 립한다. xxCR ( x x , , , 1 , 2 =x ) 4 3 9/10 ) 4 이다. xxCR ( , 1 , 2 x 3 ２．실험결과 및 분석 실험은 모의자료와 실제자료를 가지고 진행하였다. 먼저 제안방법의 정확성검증을 모의자료를 가지고 진행하였다. － 44 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제7호 모의실험에서는 640×480해상도화상에 20×15개의 격자점들을 등간격으로 배치한 교 정판화상을 리용하였으며 식 (4)를 최소로 하는 최량풀이를 계산하였다. 계산결과를 선행 결과[1]와 비교분석하였다. 모의실험결과의 정확성검증을 위하여 다음의 거리오차평균값을 리용한다. 여기서 i vu ( , i ) i 는 원래의 이지러지지 않은 점들의 자리표, 들로 교정된 점들의 자리표, N 은 격자점들의 개수이다. e d = 1 N N ∑ = 1 ( u i − )ˆ u i 2 + ( v i − )ˆ v i 2 (5) )ˆ,ˆ( i vu i 은 추정된 이지러짐곁수 실험결과 제안방법에 의한 오차는 1.5이고 선행방법에 의한 오차는 2.2로서 제안방법 이 보다 정확하였다. 2와 같다. 다음으로 실제화상을 리용한 실험을 하였다. 720×540해상도의 교정판화상을 리용하여 이지러짐교정실험을 진행한 결과는 그림 그림 2. 실화상에 의한 이지러짐교정실험 ㄱ) 원화상, ㄴ) 교정된 화상 [1] C. Ricolfe-Viala et al.; Pattern Recognition, 43, 1688, 2010. [2] G. Zhang et al.; Optics and Laser Technology, 35, 457, 2003. 참 고 문 헌 A Calibration Method of the Camera Distortion by using Invariants 주체106(2017)년 3월 5일 원고접수 Ha Jong Won, Choe Chun Hwa We allowed to maintain the geometric relation between the perpendicular lines on the calibration pattern by choosing four points on the different straight lines for the calculation of the cross ratio and determined the distortion parameters with the distortion model of [3] by considering the radial and decentering distortion. Key words: cross ratio, lens distortion, camera calibration