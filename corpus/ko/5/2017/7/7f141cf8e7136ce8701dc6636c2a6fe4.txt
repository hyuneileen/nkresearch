김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체106(2017)년 제63권 제7호 Vol. 63 No. 7  JUCHE106(2017). 대리자료기지에 의한 기초자료웨브봉사검사방법 조영희, 최성혁 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《품질검사의 현대화는 곧 검사수단과 방법의 현대화입니다.》 오늘날 많은 경우 업무체계는 SOAP, HTTP, WSDL규약들에 의하여 구성된 봉사지향 구성방식(SOA: Service Oriented Architecture)으로 개발되고있으며 이 업무체계에 대한 검 사는 웨브봉사검사와 함께 자료기지련동검사도 필수적으로 요구한다.[2－4] 선행한 검사방법들[1, 2]에서는 웨브봉사가 접근하는 자료기지에 검사체계가 직접 접 근하는 방법으로 검사를 진행하므로 매번 자료기지의 설정과 탐색 등의 조작을 진행하여 야 한다. soapUI도구[2]는 자료기지값을 리용할수는 있지만 그것을 의도적으로 설정할수 없는 결함이 있다. 또한 자료기지에 대한 직접적인 접근으로 하여 많은 검사를 진행하는 경우 자료기지접속시간이 길어지므로 그 속도를 보장할수 없다. DBUnit도구[1]는 많은 검사를 하는 경우 자료기지접속과 검사후 다시 원래상태로 복 귀하여야 하는것으로 하여 적지 않은 시간을 소비하는 제한성이 있다. 이로부터 우리는 자료기지련동검사를 위해서만 존재하는 대리자료기지를 구성하고 그것을 리용하여 웨브봉사를 검사하는 한가지 방법을 제안한다. １．대리자료기지의 구성 대리자료기지는 검사를 위한 전용자료기지로서 자료기지와 표의 창조와 같은 질문들 은 접수하지 않고 자료의 읽기, 쓰기, 삭제, 변경에 해당한 CURD질문(INSERT, UPDATE, SELECT, DELETE의 4개 SQL)에 대한 해석 및 실행을 제공한다. 이때 대리자료기지봉사 기에서 자료기지와 표의 창조는 XML자료를 리용한다. 대리자료기지는 XML꼬리표들로 된 자료기지상태를 접수하고 그것을 림시화일에 복사하여 외부의 SQL질문에 따라 그 내 용을 변경시키는 방법으로 처리한다. 대리자료기지는 웨브봉사를 통하여 자료기지상태의 초기화 및 얻기를 진행한다. 대리자료기지는 우선 MSSQL, Oracle과 같은 실제 자료기지들에 접근하기 위하여 JDBC대면부를 JDBC구동프로그람의 한 형태로 실현한다. 다음 4개의 SQL질문을 해석 및 실행하도록 한다. 즉 4개의 SQL질문의 해석만을 진행하는 EVOLUTION-TEST방식을 제공 하여 SQL질문이 문법적으로 정확한가 혹은 SQL질문의 표이름과 마당이름, 마당형 등이 자료기지상태의 구조와 일치하는가를 검사한다. 만일 불일치되는 경우 호출자측에 례외를 보내며 기록화일에 불일치정보를 기록한다. 다음 대리자료기지는 봉사호출마디가 실행되 기 전과 후에 XML로 된 자료기지상태의 적재와 갱신을 할수 있는 웨브봉사를 제공하도 록 한다. 대리자료기지에 의한 기초자료웨브봉사검사방법 － 39 － ２．대리자료기지를 리용한 기초자료웨브봉사의 검사방법 기초자료웨브봉사검사실례(test case)는 기초자료웨브봉사를 호출하기 위한 SOAP요청 통보문 TC_REQ, 기초자료웨브봉사가 접근하는 실제자료기지상태가 복사된 초기자료기지 상태 TC_DBS, 기초자료웨브봉사호출후 응답되여야 할 예상SOAP응답통보문 TAR_REQ, 기초자료웨브봉사호출후 갱신되여야 할 예상자료기지상태 TAR_DBS로 이루어져있다. 대리자료기지를 리용한 기초자료웨브봉사검사단계는 다음과 같다. ① 검사자는 TC_REQ를 리용하여 기초자료웨브봉사를 호출하며 이 봉사는 실제자료 기지가 아니라 대리자료기지에 접속을 요청한다. ② 접속을 받은 대리자료기지는 검사웨브봉사를 통하여 검사자에게 자료기지초기상태 TC_DBS를 요구하며 검사자는 검사웨브봉사응답으로 TC_DBS를 대리자료기지에 전송한다. ③ 대리자료기지는 TC_DBS로 자료기지를 설정하며 기초자료웨브봉사는 필요한 4개 의 SQL질문실행을 대리자료기지에 요청한다. ④ 대리자료기지는 질문을 해석실행하여 SELECT문에 대한 검사결과를 보관한다. 이 때 이 결과는 XML로 된 자료기지상태로 변경된다. ⑤ 기초자료웨브봉사는 접속을 해제하며 대리자료기지는 검사웨브봉사를 통하여 검 사자에게 변경된 자료기지상태를 전송한다. 을 검사자에게 전송하여 기록하게 한다. ⑥ 검사자는 변경된 자료기지상태를 기록하고 기초자료웨브봉사는 SOAP응답통보문 검사결과는 SOAP응답통보문 TO_REQ, 검사자에게 등록된 자료기지상태 TO_DBS로 이루어진다. 검사때 검사결과와 예상출력자료가 모두 XML형식이므로 XML나무구조로 검사하며 검사자는 TAR_REQ와 TO_REQ를, TAR_DBS와 TO_DBS를 각각 비교한다. 이때 차이점을 분석하여 오유를 기록한다. SOA에 기초한 기초자료웨브봉사검사체계는 검사웨브봉사, 대리자료기지와 련동을 진 행하는 자료기지접근웨브봉사, 그것을 리용하는 검사자측의 자동검사실례생성웨브봉사 등 의 웨브봉사부분품들로 이루어져있다. 대리자료기지는 자료기지구동프로그람을 실현하는 부분과 검사봉사기의 자료기지접근웨브봉사와 통신하는 부분으로 구성된다.(그림) 그림. 기초자료웨브봉사검사체계의 구성방식 － 40 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제7호 검사하려는 기초자료웨브봉사의 조작을 검사하는 testWSMethod와 검사실례를 추가하 는 addMethodTestCase조작으로 구성된 TestService는 검사하려는 기초자료웨브봉사요청과 응답을 호출한다. 자동검사실례생성웨브봉사는 검사하려는 기초자료웨브봉사에 대한 코드 정보로부터 검사실례를 생성하며 이 검사실례로 기초자료웨브봉사를 호출하여 검사를 진 행한다. 웨브봉사검사체계는 우선 검사하려는 웨브봉사객체의 원천코드로부터 검사의뢰기프 로그람을 생성하는데 이 검사의뢰기프로그람은 TestService를 호출하여 검사를 의뢰한다. 또한 검사실례를 리용하여 응답자료를 얻고 기초자료웨브봉사객체의 실제응답통보문 과 검사실례의 예상응답통보문의 비교, 갱신된 실제자료기지상태와 예상자료기지상태의 비교를 진행한다. 기초자료웨브봉사를 호출하면 그것은 자료기지봉사기에 접근하는데 이때 검사를 위 하여 대리자료기지에 련결된다. 기초자료웨브봉사가 대리자료기지에 접속을 요구하면 대리자료기지는 DBAccessService 의 자료기지상태적재조작 loadDBState를 통하여 초기자료기지상태를 얻어 대리자료기지를 초기화하며 기초자료웨브봉사가 자료기지에 대한 접근을 완료하면 DBAccessService의 자 료기지상태갱신조작 updateDBState를 통하여 웨브봉사검사체계에 변경가능한 자체의 자료 기지상태를 전송한다. 이런 방법으로 기초자료웨브봉사검사때에 웨브봉사검사체계와 대리자료기지사이의 통신이 보장된다. 매 검사때마다 자료기지를 자동적으로 설정한 다음 복귀하는 조작을 빨리, 효과적으 로 할수 있는 검사를 위해서만 존재하는 대리자료기지를 개발하였다. 검사와 관련하여 자 료기지를 임의로 설정하고 봉사가 호출된 후에 자료기지값을 다시 얻기 위하여 그 자료 기지에 대한 호출이 기초자료웨브봉사의 검사단계에 포함되게 하였다. 맺 는 말 참 고 문 헌 [1] K. Grolinger et al.; Information and Software Technology, 53, 159, 2011. [2] C. Kankanamge et al.; Web Services Testing with SoapUI, Packet Publishing Ltd, 139～159, 160～ 176, 178～198, 2012. [3] N. M. Josuttis et al.; SOA in Practice, O'Reilly Media Inc., 65～73, 2007. [4] Q. Z. Sheng et al.; Information Sciences, 258, 416, 2014. 주체106(2017)년 3월 5일 원고접수 대리자료기지에 의한 기초자료웨브봉사검사방법 － 41 － Method of Testing the Basic Data Web Service by means of Proxy Database Jo Yong Hui, Choe Song Hyok We explained how to form the virtual database which is used only for the test of database connection and suggested a method of testing web service using the virtual database. We suggest a method of testing the web service by accessing to the virtual database, thus, reducing the test time based on MSSQL and Oracle. Key words: web service, basic data web service, SOA, test case, database test