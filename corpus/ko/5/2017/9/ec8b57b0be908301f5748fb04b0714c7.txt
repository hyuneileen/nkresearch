김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체106(2017)년 제63권 제9호 Vol. 63 No. 9  JUCHE106(2017). HTML 5 Canvas와 Web Socket에 의한 WebGIS의 설계 및 실현 김 유 성 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《새로운 과학기술분야를 개척하기 위한 사업도 전망성있게 밀고나가야 합니다.》 (《선집》 증보판 제11권 138페지) WebGIS는 망과 GIS기술의 결합산물이며 GIS의 응용령역은 WebGIS에 의하여 보다 확 장되고있다. 동시에 콤퓨터망기술의 발전은 WebGIS의 발전을 촉진시켰[4]으며 HTML 5 표 준의 공개는 WebGIS개발의 새로운 길을 열어놓았다.[1－3] HTML 5(Hyper Text Markup Language 5)는 미래의 인터네트표준기술로서 Web문서를 제 작하는데 사용되는 기본프로그람작성언어의 최신규격이다. HTML 5 Canvas의 기능은 다음과 같다. ① Web상에서 2차원도형처리를 실현하기 위한 API를 지원한다. 객체를 회전 및 변환시키고 그라디엔트, 화상생성 등과 같은 각이한 효과를 주는 기능 들을 가지고있으며 각종 객체를 생성하는데 필요한 API도 포함하고있다. ② Canvas 3D(WebGL)를 리용한 3D도형처리기능을 지원한다. WebGL을 기반으로 3D응용프로그람 또는 유희오락프로그람을 개발할수 있는 Java Script 3D engine을 지원한다. Web Socket의 기능은 다음과 같다. Web상에서 쌍방향통신이 가능한 API를 제공한다. 봉사기와 의뢰기사이에서 쌍방향통신이 가능하다. 다시말하여 의뢰기가 요청을 보내지 않아도 봉사기가 의뢰기에 응답을 보낼수 있게 한다. 한 Web페지에서 서로 다른 봉사기에 있는 Web페지에 쌍방향통신을 할수 있는 특정한 규약을 정의한 API도 제공하고있다. HTML 5 Canvas와 Web Socket기술에 기초한 WebGIS와 이전의 WebGIS의 차이를 보 면 이전의 WebGIS는 속도적인 측면에서 많은 제한을 받고있었으며 실시간적으로 변하는 자 료들을 자유롭게 말단들에 전송하는 측면에서도 불리하였다.  또한 봉사기구성모형에서 일련의 결함들을 가지고있다. ① 의뢰기로부터 매번 요청을 받으면 반드시 봉사기에서 처리하여야 하며 실행결과는 반드시 봉사기에서 의뢰기에로 전달되여야 하는데 이것은 봉사기배치와 실행성능에 대한 높 은 요구를 제기하므로 WebGIS를 구축하는데 많은 비용이 들게 된다. ② 봉사기와 사용자말단의 동시적인 교차이행이 자주 진행되기때문에 WebGIS의 성능 은 망에서 자료흐름량의 영향을 받게 된다. 론문에서는 새로운 기술인 HTML 5 Canvas와 Web Socket기술을 분석한데 기초하여 WebGIS를 설계하고 실현하기 위한 방법에 대하여 서술하였다. － 150 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제9호 １．HTML 5에 의한 공간자료의 표시와 Web Socket에 의한 공간자료의 전송 １）HTML 5에 의한 공간자료의 표시 GeoJSON은 JSON(JavaScript Object Notation)에 기초한 일종의 공간지리자료형식인데 JSON의 기초우에서 OGC를 따른 simple feature모형이고 일정한 제약조건이 첨부되여있다.  GeoJSON은 반드시 하나의 type성원이 존재하여야 하며 type성원의 값은 반드시 Point, MultiPoint, LineString, MultiLineString, Polygon 등이여야 한다. GeoJSON은 본문에 기초한 공간자료형식인것으로 하여 공간정보를 표현하는데 리용될 수 있으며 망상에서 아래와 같은 몇가지 우점들을 가지고있다. 우선 사용자가 그것들을 읽고 인식하기가 매우 쉬우며 GML에 비하여 자료구조가 좀 더 간단하다. 화일구조가 간단하고 화일도 비교적 적게 요구되며 기계적읽기와 획득에 편 리하다. 또한 다양한 언어들의 지원을 받는 동시에 열람기에 의하여 JavaScript의 한 대상으로 직 접 해석될수 있다. 이로부터 GeoJSON을 리용하여 자료를 벡토르자료형식으로 정의하고 동시에 GeoServer 가 WFS봉사를 시작할 때 GeoJSON자료형식으로 봉사하도록 하였다. 봉사기에서의 지도작성부하를 줄이기 위하여 바탕지도는 봉사기에서 그리도록 하였고 WMS봉사를 리용하여 말단에 화상자료를 전송 및 표시하도록 하였다. 벡토르공간자료들은 WFS봉사를 리용하여 HTML 5가 지원하는 GeoJSON자료형식으로 전송하고 그것을 리용하 여 말단에서 그리도록 하였다. ２）Web Socket에 기초한 공간자료전송 Web봉사기와 열람기가 주로 사용하는 규약은 초본문전송규약(HTTP: Hypertext Transfer Protocol)이다. 시 실현한다. HTTP는 매번 하나의 요구되는 련결을 처리하고 사용자말단응답을 받은 후 련결을 다 Ajax기술은 HTTP에서 실현하는 자료의 비동기통신기술이다. 자료가 실시간갱신을 필요로 할 때 XML HTTP Request의 부단한 반복을 통하여 봉사 기에 GET 혹은 POST의 요구를 발송할수 있다. 만일 요구자료가 매우 적을 때에도 HTTP 는 매번 요구통보문머리부를 발생시켜야 하며 결과적으로 불필요한 전송량이 많아지게 된다. Ajax가 봉사기로부터 자료를 얻자면 항상 먼저 요청하고 봉사기로부터의 응답을 받아 야 한다. 이러한 요구와 응답은 다같이 시간을 소비할수 있기때문에 시간지연현상이 발생 하게 된다. Web Socket는 공간자료실시간전송의 기초로 된다. Web Socket는 하나의 쌍방향통신통로를 정의하고 Web열람기의 Socket를 통하여 통신 을 진행한다. 우리는 Web Socket봉사기로서 node.js를 리용하였으며 onopen사건을 통하여 련결통보 문을 접수하고 통보문에서 필요한 조작을 진행하였다. 그리고 Web Socket의 send함수를 리 용하여 자료를 봉사기에 발송하였다. HTML 5 Canvas와 Web Socket에 의한 WebGIS의 설계 및 실현 － 151 － ２．Canvas모의를 리용한 완충구역생성과 WebGIS의 구성 HTML 5에 기초한 WebGIS에서 벡토르자료를 라스터자료로 전환하고 라스터자료의 특 징을 결합하여 완충구역을 만드는 방법은 다음과 같다. 먼저 벡토르자료형식의 완충구역을 라스터자료로 전환하고 라스터중첩산법을 리용하 여 완충구역을 합하며 동적완충령역을 높은 정확도로 생성한다. 만일 라스터완충구역의 경 계에 대하여 각각 주사를 진행할수 있다면 훑기선우의 완충령역경계를 추출하여 벡토르자 료를 얻고 다시 사귐점을 구하여 최종적인 완충구역경계선을 생성한다. 동적완충구역을 생성하기 위하여 Canvas의 scale속성을 변화시켜 선폭의 확대와 축소 를 실현하였다. Canvas는 완충구역분석뿐아니라 공간중첩분석에 대하여서도 모의를 진행할 수 있다. 봉사기단구성방식과 사용자단구성방식을 결합한 혼합구조방식으로 WebGIS를 구성하 였다. 이 방법은 복잡한 분석을 봉사기에서 진행하고 간단한 분석의 조작은 의뢰기에서 처 리한다. 또한 봉사기와 의뢰기의 우점을 다같이 살리고 합리적인 분배를 실현하여 최대의 성 능을 발휘할수 있게 한다. 론문에서는 혼합구조방식의 WebGIS를 그림과 같이 구성하였다. 그림. 혼합모형의 구성 맺 는 말 봉사기와 의뢰기가 서로 결합된 혼합구조방식을 리용하여 불필요한 전송량을 없애고 시 간소비를 줄임으로써 이전의 WebGIS를 보다 발전시켰다. Web Socket기술과 Ajax기술을 대비분석하고 WebGIS에서의 그 적용방법에 대하여 서 술하였다. － 152 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제9호 참 고 문 헌 [1] C. Richard; Beginning HTML 5 and CSS 3, Apress, 24～228, 2012. [2] W. Hales; HTML 5 Architecture, O’Reilly Media, 12～77, 2012. [3] S. Fulton; HTML 5 Canvas, O’Reilly Media, 27～257, 2011. [4] Z. Kessin; Programming HTML 5 Applications, O’Reilly Media, 27～116, 2012. 주체106(2017)년 5월 5일 원고접수 Design and Realization of WebGIS by using HTML 5 Canvas and Web Socket Kim Yu Song We have analyzed the Web Socket and Ajax technology and described the applying method. We have achieved buffer analysis in the client. We have selected the server-client mixed tectonic model and achieved the WebGIS based on HTML5.  Key words: WebGIS, HTML 5, Canvas, Web Socket, buffer analysis