김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체106(2017)년 제63권 제4호 Vol. 63 No. 4  JUCHE106(2017). 용수철－질점모형에 의한 얇은 막의 변형모의 김금혁, 안영준, 리창남 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《새로운 과학기술분야를 개척하기 위한 사업도 전망성있게 밀고나가야 합니다.》 (《선집》 증보판 제11권 138페지) 물리적현상의 모의를 비롯한 과학기술계산에서 계산속도와 성능을 높이기 위하여 병 렬계산이 많이 리용되고있다. 병렬계산방법에는 망으로 련결된 여러대의 콤퓨터를 리용하 는 방법, 하나의 중앙처리소자에 내장된 여러개의 핵들을 리용하는 방법 등 여러가지 수 법들이 있다. 최근에는 도형처리소자인 GPU의 성능을 리용하기 위한 방법[2]들이 많이 제안되여 리용되고있다. GPU는 도형처리를 위한 전용소자로서 병렬계산에 전문화되도록 설계되였으므로 과학기술계산을 위한 병렬계산에서 높은 성능을 발휘한다. 우리는 용수철－질점모형에 의한 얇은 막의 변형모의를 GPU를 리용하여 진행하고 그 효과성을 검증하였다. １．용수철－질점모형 용수철－질점모형[2]은 천이나 금속박판과 같은 얇은 막의 두께를 무시하고 그것을 서로 용수철로 련결된 질점들의 2차원구조로 모형화한것이다. 어느 한 질점을 중심으로 볼 때 린접한 4개의 질점과 련결된 용수철, 대각선방향의 4개 질점과 련결된 용수철, 좌우상하방향으로 두번째에 있는 4 개의 질점과 련결된 용수철들은 늘음변형을 나타낸다. 용수철－질점모형은 그림과 같다.  이때 질점의 운동방정식[2]은 (cid:5)(cid:5) xm (cid:5) xc +−= ∑ + f ( in f ext ) . 여기서 c는 감쇠곁수이고 inf 은 용수철들의 튐힘, ext 비롯한 외부힘이다. f 는 중력을 용수철의 튐힘 inf 은 다음과 같이 표시된다. 그림. 용수철－질점모형 f t )(in = k i (|| x i t )( − x t ||)( l − ) i j x t )( − x t )( || x t )( − x t ||)( j j i i 여기서 ik 는 용수철의 튐성곁수, il 는 용수철의 처음길이, ix 는 질점의 위치, jx 는 린접 한 질점의 위치이다. 이 운동방정식을 근사적으로 풀어서 막의 변형을 모의할수 있다. 이때 근사계산식으로 다음과 같은 베를레트도식[1]을 리용하였다. － 68 － 종합대학학보(자연과학)   주체106(2017)년  제63권  제4호 tx ( i t ) =Δ+ )(2 tx i − tx ( i ) t +Δ− ta )( i t Δ 2 이 식을 리용하면 다음순간의 질점의 위치를 결정하는데 현재순간과 이전순간의 위 치값만이 필요하다. ２．GPU를 리용한 병렬계산 GPU를 리용한 병렬계산에는 CUDA, OpenGL과 같은 전용서고들을 리용한다.  우리는 OpenGL의 도형흐름처리선에서 리용되는 프로그람언어인 GLSL을 리용하여 계산하였다. OpenGL이나 GLSL은 일반계산이 아니라 도형처리를 목적으로 하는 전용화된 API와 언어이지만 GPU의 병렬처리능력을 리용하여 고속계산을 진행하도록 알고리듬을 서술해 줄수 있다. 이때 계산결과의 현시도 동시에 실현할수 있는 우점이 있다. 우리는 OpenGL의 도형처리흐름선에서 기하학적자리표변환결과를 CPU나 흐름선의 이전단계로 넘겨주는 수법인 기하변환반영(transform feedback)수법을 리용하여 GPU를 통 한 일반계산을 실현하였다. 계산과정은 다음과 같다. CPU에서 매 질점들의 초기위치값을 완충기억기에 넣어 GPU에 넘겨준다.  이 자료들은 도형처리흐름선의 제일 앞에 있는 정점처리기(vertex shader)로 넘어가 처 리된다. 흐름선의 다음단계로 넘겨진다. 위치를 계산한다. 표준적인 도형처리흐름선에서는 정점처리기에서 자리표변환이 진행되고 그 결과가 정점처리기의 이 처리부분에서 자리표변환과 함께 베를레트도식에 따라 질점의 다음 계산결과는 기하변환반영완충기억기(transform feedback buffer)에 보관된다. 이 완충기 억기는 GPU에 자리잡고있으며 거기에 보관된 자료는 다시 CPU로 가져오지 않아도 되므 로 많은 처리부하를 요구하는 CPU와 GPU사이의 자료전송을 없앨수 있다. 질점들의 현재위치와 이전위치를 보관하는데 2개의 완충기억기가 리용된다. 표준적인 도형처리흐름선에서는 최종결과가 화면에 표시되지만 화면묘사를 억제하고 흐름선을 반복리용하는 방식으로 계산을 진행하였다. 변형과정을 실시간적으로 현시하려면 화면묘사기능을 동작시켜 매 순간의 변형상태 를 표시하여야 한다. 마디점수/개 64×64 128×128 256×256 512×512 1 024×1 024 표. 성능비교결과 CPU OpenMP 1 1 1 1 1 2.24 2.76 3.22 3.40 2.79 GPU 4.20 10.15 18.01 11.07 35.25 이와 같이 용수철－질점모형에 의 한 얇은 막의 변형모의를 GPU를 리용 하여 계산한 결과 CPU나 OpenMP병렬 서고를 리용한 경우에 비해 계산성능 이 훨씬 개선되였다.(표) 특히 마디점 의 수가 많아질수록 성능개선효과가 뚜렷하였다. 용수철－질점모형에 의한 얇은 막의 변형모의 － 69 － 맺 는 말 참 고 문 헌 금속박막이나 포장재료와 같은 두께가 얇은 막들에 용수철－질점모형을 적용하여 GPU의 병렬계산기능을 리용하면 얇은 막의 변형모의계산효과성을 높일수 있다. [1] Baraff Witkin; Proceedings of the 25th Annual Conference on Computer Graphics and Interactive Techniques, Siggraph, 43, 1998. [2] Muhammad Mobeen Movania et al.; OpenGL Insights, CRC Press, 265～279, 2012. 주체105(2016)년 12월 5일 원고접수 Deformation Simulation of Thin Sheet using Spring-Mass Model Kim Kum Hyok, An Yong Jun and Ri Chang Nam A spring-mass model of thin sheet for simulation and an efficient computation method using OpenGL's transform feedback are presented. Key words: spring-mass, GLSL, transform feedback