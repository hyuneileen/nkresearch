김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제1호 Vol. 62 No. 1  JUCHE105(2016). 가상자료기지에 의한 SOA응용프로그람의 자료기지련동검사방법 조영희, 최성혁, 리광 오늘날 SOA에 기초한 업무응용프로그람들은 HTTP, SOAP, WSDL 등에 기초한 웨브봉 사에 의하여 실현되고있다. 이러한 업무응용프로그람은 처리봉사에 의하여 실현되기때문에 업무요구가 변해도 전체 프로그람을 크게 변경시키지 않으므로 처리봉사의 흐름과정을 갱 신하면 된다. 그런데 처리봉사는 웨브봉사들에 의하여 이루어진다. 따라서 SOA에 기초한 업무응용프로그람의 품질을 높이자면 웨브봉사에 대한 검사를 하여야 한다. 선행연구[2]에서는 개별적인 웨브봉사를 검사하는 방법을 내놓았다. 이 방법에서는 SOAP통보문으로 웨브봉사를 호출함으로써 검사를 진행한다. 여기서 웨브봉사검사는 웨브 봉사의 기능검사, 비기능검사, 통합검사, 성능검사로 분류된다. 선행연구[3]에서는 단위검사와 같은 원리로 검사를 진행한다. 여기서는 웨브봉사흐름 공정을 서술한 BPEL화일을 편집하고 이 BPEL을 검사하기 위하여 BPEL화일의 시작마디 를 호출할 때 리용하게 될 요청통보문을 편집하고 편집된 요청통보문을 등록하고 모의를 통하여 검사를 진행한다. 한편 선행한 연구[3]에서는 일반 객체검사와 달리 자료기지의 내용을 설정하거나 얻는 방법을 제공함으로써 검사때 자료기지에 관한 설정과 읽기를 진 행할수 있게 한다. 이 검사방법의 제한성은 많은 검사를 하여야 하는 경우에 이것을 위한 검사자료를 설정하기 위하여 자료기지에 접속하고 검사가 완료된 후에는 다시 원래 상태 로 복귀하여야 하는데 이것은 일정한 시간을 요구하는 자료기지접속으로 하여 적지 않은 시간이 소비된다. 그리고 선행연구[1]에서는 자료기지의 구조가 변경되는데 따라 응용프로그람에서 변 경되여야 할 부분을 발견할수 있게 하였다. 이 방법의 제한성은 SQL질문실행의 기록탐색 단계의 시간이 0으로는 되지 않는것이다. 즉 시간은 단축되지만 완전히 없애지는 못한다. 이와 같은 제한성을 해결하기 위하여 우리는 가상자료기지를 제안하고 그를 통한 웨 브봉사의 자료기지련동검사방법을 제기하였다. １．XML에 기초한 가상자료기지 우리가 제안한 가상자료기지는 검사를 위한 전용자료기지로서 자료기지와 표의 창조 와 같은 질문들은 접수하지 않고 자료의 읽기, 쓰기, 삭제, 변경에 해당한 CURD질문 (INSERT, UPDATE, SELECT, DELETE의 4개 SQL)들만 접수한다. 이때 가상자료기지봉사기 에서 자료기지와 표의 창조는 자료기지와 표의 정보를 서술하는 XML자료를 리용한다. － 40 － 가상자료기지에 의한 SOA응용프로그람의 자료기지련동검사방법 검사자는 웨브봉사를 통하여 자료기지상태의 초 기화 및 갱신을 진행한다. 한편 MSSQL, Oracle과 같은 자료기지봉사기들에 접근하기 위하여서는 JDBC대면부를 리용하여야 한다. 따라서 가상자료기지를 실현하자면 JDBC구동프로그람 을 작성하여야 한다.(그림) ２．가상자료기지를 리용한 기초자료봉사검사와 자료구조갱신검사 그림. JDBC구동프로그람으로 가상자료 기지의 구현 １）기초자료봉사검사 기초자료봉사검사를 위하여 실제 자료기지대신에 가상자료기지를 설치하여야 한다. 검사를 위한 입력자료와 예상출력자료로 이루어진 검사실례는 4개의 자료로서 기초 자료봉사를 호출하기 위한 SOAP요청통보문 TC_REQ, 기초자료봉사가 접근하는 실제자료 기지의 상태를 복사하고 각이하게 변경시킨 자료기지상태 TC_DBS, 예상SOAP응답통보문 TAR_REQ, 예상자료기지상태 TAR_DBS로 이루어져있다. 기초자료봉사검사과정은 다음과 같다. ① 검사자는 TC_REQ를 리용하여 기초자료봉사를 호출한다. ② 기초자료봉사는 실제자료기지(MSSQL 등)가 아니라 가상자료기지에 접속을 요청 ③ 접속을 받은 가상자료기지는 웨브봉사를 통하여 검사자에게 자료기지 초기상태를 한다. 요구한다. ④ 검사자는 TC_DBS를 웨브봉사응답으로 가상자료기지에 전송한다. ⑤ 가상자료기지는 TC_DBS로 자료기지를 설정한다. ⑥ 기초자료봉사는 필요한 4개의 SQL질문을 실행할것을 가상자료기지에 요청한다. ⑦ 가상자료기지는 질문을 해석실행하여 SELECT문인 경우에는 결과를 기초자료봉사 에 돌려준다. 이때 XML로 된 자료기지상태도 변경된다. ⑧ 기초자료봉사가 접속을 해제한다. ⑨ 가상자료기지는 웨브봉사를 통하여 검사자에게 변경된 자료기지상태를 전송한다. ⑩ 검사자는 변경된 자료기지상태를 기록한다. ⑪ 기초자료봉사는 SOAP응답통보문을 검사자에게 전송하며 검사자는 기록한다. ２）가상자료기지를 리용한 자료기지구조변화검사 여기서는 가상자료기지를 리용하여 자료기지구조변화의 검출을 위하여 4개의 SQL질 문에 대하여 완전한 동작을 진행하지 않는 즉 가상자료기지의 기록들을 처리하지 않는 방식으로 자료기지구조변화를 검사한다. 이때 자료기지구조변화에 따르는 기초자료봉사들 의 갱신을 위하여 가상자료기지의 EVOLUTION-TEST방식을 리용한다. 가상자료기지와 접 속하여 단위검사를 진행할 때 기록화일에 기록될수 있는 가능한 응용프로그람의 오유들 로는 표이름, 마당이름, 마당형이 일치되지 않는 경우이다. － 41 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제1호 가상자료기지는 이러한 오유정보를 다음과 같은 XML형식으로 출력한다. <DB-Error> <Error-Num>3</Error-Num> <Error-Type>0</Error-Type>  <Error-Desc>자료기지접속실패</Error-Desc> <App-Trace>…</App-Trace></DB-Error> 여기서 <DB-Error>는 뿌리꼬리표로서 자식꼬리표로 <Error-Num>, <Error-Type>, <Error-Desc>, <App-Trace>를 가진다. <Error-Num>꼬리표는 오유의 번호를 1, 2, 3과 같이 수자로 지적한다. <Error-Type>꼬리표는 오유형태를 지적한다. <Error-Desc>는 오유에 따라 가능한 퇴치방법을 서 술한다. <App-StackTrace>꼬리표는 응용프로그람에서 SQL질문을 가상자료기지에 보낸 조작의 호출탄창을 지적한다. 한편 표의 이름이 변경되였다고 하면 자료기지상태를 다음과 같이 수정하면 된다. <DB-Status Exec_Mode='EVOLUTION-TEST'>  <Table Name=''변경된 이름''> … </Table> </DB-Status> 우의 자료기지상태를 가상자료기지에 전송하고 기초자료봉사검사와 같은 방식으로 검사한다. ３．검사결과분석 제안한 방법의 효과성을 검증하기 위하여 서로 다른 류형의 SQL질문을 가진 기초자 료봉사 40개에 대하여 실험을 진행하였다. 실제자료기지(MS-SQL자료기지봉사기)와 가상 자료기지를 각각 리용한 결과는 표와 같다. 표．기초자료봉사 40개에 대한 검사결과 웨브봉사검사 초기화시간/s SQL실행시간/s 삭제시간/s 자료기지상태얻는 시간/s 실제자료기지접속 가상자료기지접속 15.5 1.8 41 22 7.8 3.1 181(SELECT문) 3.6(웨브봉사) 표로부터 알수 있는바와 같이 가상자료기지를 리용한 경우에 검사시간이 거의 2배나 자료기지를 매 검사때마다 자동적으로 설정하고 복귀하는 조작을 빠른 시간안에 진 행할수 있는 가상자료기지를 설계하고 그것을 리용하여 자료기지를 검사하는 방법을 제 자료기지검사와 관련하여 임의로 설정하고 봉사가 호출된 후에 자료기지값을 다시 얻기 위하여 자료기지에 대한 호출을 웨브봉사의 검사단계에 포함시키는 방법을 제안하 맺 는 말 － 42 － 줄어들었다. 안하였다. 였다. 가상자료기지에 의한 SOA응용프로그람의 자료기지련동검사방법 참 고 문 헌 [1] Katarina Grolinger et al.; Information and Software Technology, 53, 159, 2011. [2] Charitha Kankanamge et al.; Web Services Testing with soapUI, Packt Publishing Ltd., 7～30, 2012. [3] M. Nicolai et al.; SOA in Practice, O’Reilly Media Inc., 81～98, 2007. 주체104(2015)년 9월 5일 원고접수 Interlock Test Method of Database for SOA Application Program by Virtual Database Jo Yong Hui, Choe Song Hyok and Ri Kwang We proposed the virtual database and interlock test method of database for web service using it. We also proposed a test approach of database schema evolution using virtual database. Key words: SOA, virtual database, web service － 43 －