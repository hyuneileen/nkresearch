김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제9호 Vol. 62 No. 9  JUCHE105(2016). 지표면의 반사률을 고려하여 립체지도의 묘사효과를 높이기 위한 한가지 방법 전근철, 조연희 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《정보기술, 나노기술, 생물공학을 발전시켜야 새 재료, 새 에네르기, 우주기술, 핵기술 과 같은 첨단과학기술분야와 기계, 금속, 채취공업, 경공업, 농업을 비롯한 응용기술분야 를 획기적으로 발전시킬수 있으며 시대의 추세에 맞게 경제를 현대화, 정보화할수 있고 나라의 경제구조도 개변할수 있습니다.》(《선집》 증보판 제22권 21페지) 최근 20여년간 수자지형분석과 지형시각화분야에서 많은 연구가 진행되였다.[1, 2, 4] 지형시각화는 음영립체지도를 작성하는 분야뿐아니라 현실세계를 묘사하는 3차원가상모 의분야에서도 많이 리용되고있다. 우리는 복잡하고 다양한 지형기복을 현실세계와 매우 류사하게 묘사하기 위하여 지표면 의 반사률을 고려하여 지형음영의 묘사효과를 높이기 위한 한가지 방법을 제기하였다. 1．지형음영법에 대한 리해 지형음영법(hill shading)은 태양의 해비침에 의하여 나타나는 지표면의 밝기를 모의하 는것을 통하여 지형의 형태적특징이 일정한 립체감을 가지도록 함으로써 지표면의 기복 변화를 직관적으로 묘사하는 방법이다.[4] 수자높이모형(Digital Elevation Model; DEM)을 리용하여 지형음영을 묘사하는 방법의 본질은 가상적인 조명원천을 설정하고 이 조명원천의 방위각, 고도에 따르는 지형요소점 들의 밝음도값을 계산하고 그것을 색농담값으로 전환하여 묘사함으로써 3차원시각효과를 얻어내는것이다.[3] 이때 밝음도는 다음의 식으로 구해진다. 255 cos( (1) [cos cos sin sin Az As )] Z Z S S + − = ⋅ ⋅ ⋅ ⋅ H S 여기서 Z는 광원의 천정각, S는 지형경사각, Az는 광원의 방위각, As는 지형방위각이다. 일반적으로 광원의 천정각은 45°, 방위각은 315°로 설정한다. 그러나 지형은 매우 다양하 고 복잡하기때문에 일반적인 채색법이나 순수 지형음영법만 리용하면 지형의 세부를 상 세하게 묘사할수 없고 인위적인 감이 있으며 현실성이 부족한 결함이 있다. 이로부터 복잡하고 다양한 지형기복을 현실세계와 매우 류사하게 묘사하기 위하여서는 지표면의 반사률을 고려하여 지형음영의 묘사효과를 높여야 한다. ２．지표면의 반사률을 고려한 음영묘사효과제고방법 지표면의 반사률을 고려하여 지형음영의 묘사효과를 제고하기 위한 방법은 다음과 같은 － 44 － 지표면의 반사률을 고려하여 립체지도의 묘사효과를 높이기 위한 한가지 방법 두가지 원리에 기초하고있다. ① 면의 반사률은 반사빛선과 관측벡토르가 일치할 때 가장 크다. ② 지표면은 대상의 류형에 따라 반사률이 서로 차이난다. 두번째 원리인 지표면에서 대상의 류형과 관련된 반사률의 고려는 위성화상 등을 리 용하여 지표면에 대한 분류를 통하여 진행할수 있다. 우리는 첫번째 원리에 기초한 반사 률의 원리만을 고찰한다. 반사빛선과 관측벡토르의 일치성은 반사빛선과 관측벡토르의 스칼라적을 구하여 판 정할수 있다.(그림 1) 계는 다음과 같다. 지표면의 반사률을 고려하여 지형음영도를 작성하는 단 ① 수자높이모형의 매 화소에서 면법선벡토르를 구한다. 방위각이 방α 이고 경사각이 경β 으로 주어지는 지형곡 면우의 한 점에서 법선단위벡토르는 ) x 법법법 , β 경 (sin sin α (cid:71) n = = 방 y z ( , , ⋅ cos α 방 ⋅ sin , β 경 cos β ) 경 으로 주어진다. ② 주어진 화소에서 태양입사빛선벡토르와 법선벡토르 그림 1. 입사빛선, 반사빛선, 관측선들의 관계 를 리용하여 반사빛선벡토르를 구한다. (cid:75) 태양방위각을 α, 고도각을 β라고 하고 태양입사방향단위벡토르 s 를 구하면 다음과 같다. (cid:71) s = ( x y 입입입 z , , ) = (sin cos , βα ⋅ cos cos , βα ⋅ sin ) β (2) 입사각의 코시누스는 입사빛선단위벡토르와 면의 법선단위벡토르의 스칼라적으로 표 시된다. 따라서 입사각을 입α 이라고 하면 입사각의 코시누스는 다음과 같다. cos β ββ 경 경 αβα αβα =입 β 경 cos cos cos cos cos sin sin sin sin sin α + + 방 방 ⋅ ⋅ ⋅ ⋅ ⋅ ⋅ ⋅ (3) 이때 ( x 0 , y 0 , z 0 ) = ( x 법 ⋅ cos α y 법입 , ⋅ cos α z 법입 , ⋅ cos α 입 ) 이라고 놓으면 반사빛선벡토르 는 다음과 같다. (cid:71) r = ( , x 반 x 법 z , y 반 cos 반 , α 입 ⋅ = (2 ) = 2( x , y , z ) − ( 0 cos 0 , y 법 ⋅ α z 법입 cos 0 ⋅ , , ) z x y 입입입 x y ( 입입입 α 입 = − z ) , , ) (4) ③ 반사빛선벡토르와 관측벡토르의 스칼라적을 화소별로 구한다.  지도에서는 수직투영을 리용하므로 관측벡토르를 )1,0,0( 로 취할수 있다. 그러면 반사률 K 는 다음과 같다. K 2 ⋅= ⋅ α cos z 법 cos αβα − 입입 cos cos z ⋅ ⋅ + β 경 + β 경 ⋅ sin 방 sin β ⋅ cos β 경 ) − 2 ⋅= cos (sin αβα cos sin ⋅ ⋅ ⋅ sin β 경 + 방 sin β (5) 매 화소에서 K 값을 구하여 반사그리드 반G 을 얻는다. ④ 얻어진 반사그리드를 음영처리된 수자높이모형에 더하여 반사률을 고려한 음영그 리드를 얻는다. 필요에 따라서 지나친 반사효과가 나타나는 부분들을 피하기 위하여 국부 적처리를 진행한다. － 45 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제9호 지표면의 음영처리된 그리드는 다음과 같이 얻는다. (cid:71)(cid:71) ns =⋅= ⋅ ααβ (sin cos cos cos sin θ G + = 음 β 경 이때 반사률을 고려한 그리드는 다음과 같이 얻어진다. β 경 sin) cos cos sin β + = 방 ⋅ ⋅ + 방 − ααβ cos( cos αα ⋅ sin) 방 sin β ⋅ cos + β 경 β 경 (6) GG = 음 ⋅+ Ga 반 (7) 여기서 a 는 지표면의 류형에 따르는 상수이다. 우의 알고리듬에 따라 반사률을 고려하였을 때와 고려하지 않은 경우 지형음영도는 그림 2와 3과 같다. 프로그람실현은 GIS전용스크립트언어인 Avenue를 리용하였다. 그림 2. 반사률을 고려하지 않은 지형음영도 그림 3. 반사률을 고려한 지형음영도 맺 는 말 지표면의 반사률을 고려하면 빛을 등진 사면에서 지형세부가 잘 나타나지 않는 결함 이 극복되고 각이한 지형세부들을 부각시킬수 있다. 또한 지형의 골격을 이루고있는 릉선 과 골짜기들이 사면에 비하여 비교적 높은 반사률을 가지고있는것으로 하여 지형음영도 에서 명백히 나타나며 결국 립체성이 강조된다. 그리고 지형체들의 세부적인 음영이 보다 더 상세히 묘사된다. [1] 류동권; 수자지형분석, 종합대학출판사, 1～188, 주체102(2013). 참 고 문 헌 [2] B. E. Marston et al.; International Journal of Geographical Information Science, 1, 2015. [3] Collette Gantenbein; U. S. Geological Survey Open-File Report, 101, 2012. [4] 周启鸣 等; 数字地形分析, 科学出版社, 10～327, 2008. 주체105(2016)년 5월 5일 원고접수 － 46 － 지표면의 반사률을 고려하여 립체지도의 묘사효과를 높이기 위한 한가지 방법 A Method to Draw Shaded Relief Map Effectively considering the Reflection of Land Surface Jon Kun Chol, Jo Yon Hui We studied a method that showed different kinds of terrain details, considering reflection of land surface to draw shaded relief map similar to real world. Key words: shaded relief map, terrain rendering － 47 －