김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제11호 Vol. 62 No. 11  JUCHE105(2016). 가야금쏘프트웨어음원에서 집기소리효과를 내기 위한 연구 리명철, 박철규 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《예술부문에서는 민족악기를 적극 살려써야 하며 특히 가야금을 장려하여야 합니다. 가야금연주에서는 롱현이 기본입니다.》(《선집》 증보판 제21권 299페지) 우리는 록음합성방식의 가야금쏘프트웨어음원을 리용한 음악제작에서 집기소리효과 를 내기 위한 한가지 방안에 대하여 연구하였다. 론문에서는 록음된 집기소리가 포함된 음을 리용하여 집기소리효과를 실현하는 방법 의 불합리성과 제한성을 밝히고 가야금줄의 울림소리성분과 집기소리성분을 분리하여 집 기소리자료만 보관리용하는 방안을 제기하였으며 집기소리분리법과 집기연주음합성법에 대하여 론의한다. 가야금연주음에서 집기소리는 줄을 튕겨 소리를 낸 다음 소리가 울리는 줄에 손가락 을 대면 생기는 소리이다. 집기음이 들어간 연주음의 스펙트로그람을 분석해보면 집기음 의 스펙트르는 주파수전대역에서 가야금줄의 진동음과 합쳐져있다. 연주구현에서 집기소리를 내는것은 쏘프트웨어음원으로 작성한 음악의 자연성을 보 장하기 위한 중요한 문제이다. 그러나 집기소리효과를 내기 위하여 이것을 독자적인 지표 로 설정하고 록음하면 록음량을 배로 증가시키게 된다. 또한 첫음이 울리기 시작하여 집 기소리가 날 때까지의 시간이 노래의 특성이나 연주자의 연주특성에 따라 다르므로 집기 연주를 모두 록음하여 재생하는 방법으로 이 문제를 해결하는것은 어려운 문제이다. 론문에서는 이 문제를 가야금줄의 울림소리가 들어가지 않은 집기소리만을 따로 가 지고있다가 필요한 시점에서 록음파형과 합쳐주는 방법으로 해결하였다. 그러나 이를 위 해서는 연주음파형에서 줄의 울림소리와 집기소리를 분리해야 한다. 분리하지 않은 상태 에서 줄의 울림소리와 합쳐진 집기소리구간의 음파형을 록음파형에 그대로 합치면 목적 하지 않은 다른 음높이의 울림소리가 들리면서 원하지 않는 결과음이 만들어지게 된다. 우리는 집기소리가 포함된 연주음파형에서 집기소리만을 분리하는 방법과 집기소리 를 리용한 집기연주음합성법을 제안한다. １．연주음에서 집기소리의 분리 집기소리가 포함된 연주음을 집기소리와 집기소리가 들어가지 않은 소리로 구분하고 이것을 각각 전경소리와 배경소리라고 부른다. 전경소리와 배경소리는 스펙트르의 동적변화특성이 다르다. 배경소리의 매 스펙트르성분 은 상대적으로 느리게 변하며 전경소리의 스펙트르성분들은 급격히 발생했다가 사라진다. 론문에서는 배경소리와 전경소리를 잡음제거에서 론의하는 배경잡음과 깨끗한 신호 － 19 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제11호 에 대응시키고 위너려파기에 의한 잡음제거방법을 리용하여 배경소리를 제거하고 전경소 리를 갈라내였다. 선행연구[1, 2]에서는 실시간환경에서 적응려파기에 의한 배경잡음의 제거방법을 제기 하였으며 특히 적응위너려파기를 리용하는 방안을 론의하였다. 위너려파기에 의한 잡음제거를 위해서는 잡음신호의 전력스펙트르를 추정해야 한다.[2] 론문에서는 배경소리의 스펙트르변화특성을 고려하여 루적평균스펙트르를 계산하는 방법으로 배경소리의 스펙트르를 추정하였다. 또한 입력음의 스펙트르에 대하여 주파수령 역에서 평활화처리를 진행하고 그로부터 배경소리의 스펙트르를 얻었다. 그 리유는 주파 수령역에서 배경소리의 스펙트르에 대하여 평활화를 진행한 미끈한 포락성분을 제거하여 도 배경소리의 에네르기의 대부분은 제거되고 스펙트르의 상세구조만 미세하게 남게 되 는데 이것은 전경소리에 의하여 들리지 않게 되며 스펙트르의 상세구조가 반영된 값으로 직접 처리하는 과정에 전경음의 스펙트르세력이 파괴되는 현상을 줄이기 위해서이다. 우리는 주파수분석령역을 설정하고 분석령역에서 스펙트르변화정도평가값과 그것의 루적평균값을 새롭게 제안하였으며 스펙트르변화정도평가값과 루적평균곡선을 리용하여 스펙트르가 변화되는 정도를 평가하고 스펙트르가 급격히 증가하는 구간과 완만하게 증 가하는 구간, 감소하는 구간별로 배경음스펙트르의 추정을 다르게 진행하였다. 전체 주파수령역 혹은 전경소리의 스펙트르변화가 배경소리에 비하여 두드러지는 령 역을 주파수분석령역으로 설정한다. 진폭스펙트르계산 inX ,( 여기서 n 은 프레임번호, L 은 표본점단위의 프레임길이이며 역의 복소스펙트르이고 ,( inX ,( inX ,( inS Re( Im( | = |) )) = + ) Re( Im( ), ) ⋅ ⋅ 는 각각 실수부와 허수부를 나타낸다. inX ,( 2 )) 0, 2 <≤ Li 는 i 번째 주파수대 ) 스펙트르변화정도평가값계산 ie )( = inS ,( ) − nSr a a ( ⋅ − ,1 i () k i <≤ k l ) , k l h ⋅= fL / f S , L k h ⋅= fL / f S H , )( nE = )( ie 여기서 aS 는 루적평균스펙트르, Sf 는 표본화주파수, 계와 웃한계이다. ar 는 상수로서 스펙트르와 루적평균스펙트르의 기여률결정량이다. 는 주파수분석구간의 아래한 H L f f , )(nE 을 n 번째 프레임의 스펙트르변화정도평가값 간단히 평가값이라고 부른다. 스펙트르변화정도평가값과 함께 그것의 루적평균값을 함께 리용한다. 평가값루적평균(평가값곡선)계산 D nE )( − nE )( ),1 D − = nE ( c =′ E E 1( +− α e ) ⋅ nE ( c − ()1 ≥ )0 , U = TD ⋅ F E , E T F = / fL S h k ∑ ki = l nE )( c = nE )( c + 2 Ua ⋅ ε E + nE )( c Ua ⋅ ε UnE )( + , E c E ⎧ ⎪⎪ ⎨ ⎪ ⎪ ⎩ , , D D >′ E ≤′ E D E > 0 ,0 D E > 0 εα ,0 기타 여기서 )(nEc 은 n 번째 프레임의 평가값루적평균이다. FT 는 프레임의 시간이며 ED 는 현 재 프레임의 평가값과 과거프레임의 평가값루적평균의 차이다. ED 가 정수이면 현재 프 레임에서 스펙트르평가값이 크게 감소하지 않는 경향을 가진다고 판단한다. EU 는 평가 － 20 － 가야금쏘프트웨어음원에서 집기소리효과를 내기 위한 연구 값루적평균의 갱신에 리용되는 값으로서 의 시간에 비례한다. ea 는 0～1사이의 상수로서 갱신률을 결정하는 량이다. ED 와 프레임시간과의 적으로 계산되며 프레임 ea 가 0.1～0.2사이의 값을 가질 때 좋은 결과를 얻을수 있었다.  평가값루적평균은 평가값의 증가정도에 따라 서로 다르게 갱신된다.  이와 같이 스펙트르가 급격히 변하면 적은 비률로 갱신된다. 루적평균스펙트르갱신 R s = , ,( inS ) = a ( nS a − ,1 i 1() −⋅ R ) + RinS ,( ) ⋅ s s , a Na / s N ⎧ ⎨ /1 ⎩ a , D D >′ E ≤′ E 0 0 여기서 aN 는 적응프레임개수로서 설정파라메터이다. 이 값이 클수록 과거의 많은 프레임 들이 루적평균스펙트르에 상대적으로 큰 영향을 주며 이 값이 작으면 루적평균스펙트르는 상대적으로 적은 최근 프레임들의 스펙트르에 의하여 결정된다. sa 는 스펙트르의 변화정도 에 따른 갱신률을 결정하는 량이다. 는 n 번째 프레임의 i 번째 스펙트르성분의 루 ) inSa ,( 적평균값이다. 루적평균스펙트르갱신도 평가값의 변화특성에 따라 다르게 진행된다. 주파수령역에서 스펙트르의 평활화 S s *= WS , iWs )( = s /1 m , − m 2/ <≤ mi 2/ 기타 ⎧ ⎨ ⎩ ,0 여기서 sW 는 직각창문을 나타내며 *은 합성적을 의미한다. m 은 직각창문의 너비이다. 배경음스펙트르의 추정 Na / b N /1 여기서 ba 는 스펙트르의 변화정도에 따른 갱신률을 결정하는 량이다. >′ E ≤′ D E ,( inS ( nS b ⎧ ⎨ ⎩ R n , D ,1 = − = 0 0 ) i b a a , , 1() −⋅ R n ) + RinS n ,( ) ⋅ s 후처리 배경음스펙트르를 리용하여 위너려파기를 구성하고 입력파형의 푸리에변환에 적용한 결과를 거꿀푸리에변환하면 배경소리가 제거된 전경음이 얻어진다. ２．추출한 집기소리파형을 리용한 효과구현 우의 방법으로 집기소리파형자료를 얻어내여 그것을 음원자료기지에 보관한다. 가야금연주때 집기소리가 발생해야 하는 시점에서 해당한 MIDI통보문이 발생되면 음 원자료기지에서 MIDI통보문에서 지적한 집기소리를 출력음에 반영한다. 합성은 출력음파형과 집기소리파형을 합쳐주는 방법으로 진행하며 MIDI통보문에 지 적된 증폭도값을 집기소리파형에 곱하여 합성을 진행한다. 한편 줄을 잡는 순간에 집기연주음의 진폭이 작아지게 된다.  집기를 하지 않은 경우와 집기를 진행한 음의 진폭변화곡선은 그림 1과 같다. 그림 1. 집기를 진행하지 않은 경우(1)와 집기를 진행한 경우(2)의 진폭변화 － 21 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제11호 그림 1에서 보는바와 같이 집기위치에서 소리의 진폭이 급격히 작아진다.  다음의 식은 출력음신호와 집기음을 리용한 합성방법을 보여준다. ⎞ 1( −⋅⎟ ⎠ nnf c d nns c c 1 /2(5 )(( nx )( ny )( k ⎛ ⎜ ⎝ wk , )1 − = − − + = + − + p 1 1 e r ) ) ) ( ( ) − f d ⋅ ⋅ p 여기서 )(nx 은 출력음신호, cs 는 집기소리파형이며 r 는 집기소리세력을 조절하기 위한 파라메터, cn 는 집기위치, w 는 진폭감쇠너비를 결정하는 파라메터, p 는 진폭감쇠정도를 결정하는 파라메터, n 과 k 는 표본점의 첨수이다. df 의 변화는 그림 2와 같다. 그림 2. df 의 변화곡선  참 고 문 헌 [1] G. V. P. Chandra Sekhar Yadav et al.; International Journal of Computer Applications, 96, 10, 15, 2014. [2] Yen-Hsiang Chen et al.; IEEE, 4673, 43, 2012. [3] N. Derakhshan et al.; Speech Communication, 51, 5, 2009. 주체105(2016)년 7월 5일 원고접수 Study on Implementation of Holding Sound Effect in Software Instrument-Kayagum Ri Myong Chol, Pak Chol Gyu We proposed a method for implementation of natural holding noise in music composing using a sample-based software instrument-Kayagum. In music composing using software instrument, it is important to extract various effect sounds to model the intrinsic rendition. We proposed a method to model the holding rendition by extracting the holding noise from recorded playing sound by means of Wiener filter based noise cancellation. Key word: software instrument-Kayagum － 22 －