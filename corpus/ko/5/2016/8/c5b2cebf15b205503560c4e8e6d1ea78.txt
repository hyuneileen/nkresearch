김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제8호 Vol. 62 No. 8  JUCHE105(2016). 열처리금속제품의 경도시험에서 화상처리에 의한 강구흔적의 경계검출과 크기결정 리문룡, 한광룡 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《생산기술공정과 생산방법, 경영활동을 새로운 과학적토대우에 올려세우는것은 생산을 과학적으로 진행하고 현대화된 기술수단이 자기 능력을 다 내게 하는데서 중요한 의의를 가 집니다.》(《선집》 증보판 제11권 138페지) 지금까지 실천에서는 열처리금속제품의 강구흔적의 크기를 시험자가 브레넬경도계의 눈 금을 육안으로 보고 결정하였다.[1] 경도계를 리용할 때 사람마다 눈에 의한 착오로 하여 강구흔적의 직경값이 다르게 측 정되고 또 같은 흔적도 어느 방향으로 눈금축을 일치시켜 보는가에 따라 직경값이 다르게 측정되는것으로 하여 열처리금속제품의 당김세기 및 연신률과 자름면수축률이 실제값과 적 지 않게 차이난다. 콤퓨터에 의한 화상처리에서는 이미 구축된 자료기지로부터 대상을 찾고 무리짓기에 의 한 방법으로 그 형태를 결정[2, 3]하였지만 경도계를 리용할 때는 조명빛의 요인으로 대상 결정과 크기결정이 문제로 제기된다. 론문에서는 이러한 실천적문제를 해결하기 위하여 실시간촬영기에 의하여 강구흔적을 조사하고 잡음제거와 경계보정으로 그 정확도를 종전의 3.16배로 높일수 있는 새로운 경도 측정방법을 제기하였으며 열처리금속제품의 브레넬경도시험에서 화상처리에 의하여 강구 흔적의 크기를 보다 정확히 결정하기 위한 알고리듬을 론의하였다. １．열처리금속제품의 브레넬경도시험법과 실천에서 제기되는 문제 열처리금속제품의 브레넬경도시험법은 금속표면을 강구로 누르고 흔적(눌린 자리)의 크 기와 누른 힘의 크기에 따라 경도를 결정하는 방법이다. 브레넬경도시험에서 브레넬경도 HB = FP / = 2 /[ DDP π ( − 2 D − d 2 )] 는 강구흔적의 구형 표면면적 2mm1 에 해당한 평균압력으로 계산한다. 여기서 P 는 누르는 힘 즉 하중( N ), F 는 눌리운 자리의 자름면면적( 브레넬경도시험에서는 강구로는 직경이 ,0.5,5.2 =HB 2mm ), D 는 강구직경( mm ), d 는 흔적직경( mm )이다. 450 mm0.10 이하의 브레넬경도를 가지는 시험품만을 쓸수 있다.  인것을 쓰는데 재료의 두께에 따라 알맞게 고른다. 경도를 측정할 때 구의 직경은 시편의 두께와 하중에 따라 표 1에서 선택한다. － 12 － 열처리금속제품의 경도시험에서 화상처리에 의한 강구흔적의 경계검출과 크기결정 표 1．경도와 시편의 두께에 따르는 강구직경과 하중(짐)의 크기 재질 브레넬경도한계 시편두께/ mm 하중과 강구직경 과의 관계 하중작용시간 / s 140～450 P = 30D 2 흑색금속 140이하 P = 30D 2 동, 황동, 청동 31.8～130 흑색금속과 합금 8～35 P = 10D 2 P = 25.2 D 6이상 3～6 3이하 6이상 3～6 3이하 6이상 3～6 3이하 6이상 3～6 3이하 강구직경 / mm  10.0 5.0 2.5 10.0 5.0 2.5 10.0 5.0 2.5 10.0 5.0 2.5 하중/ N 3 000.0 750.0 187.5 3 000.0 750.0 187.5 1 000.0 250.0 62.5 250.0 62.5 15.5 10 30 30 60 보통 흔적직경이 커짐에 따라 브레넬경도값의 차이 표 ２．강구직경이 mm5=D 는 점점 줄어든다.(표 2) 경도시험에서 주의할 점은 다음과 같다. ① 흔적의 직경은 서로 수직되는 두 자리에서 잰 다 음 평균값으로 구한다. ② 하중은 충격없이 천천히 걸어야 하며 하중의 방 향과 시험품의 표면은 수직이여야 한다. ③ 1개의 시험품에서 여러번 시험할 때는 눌린 자 리의 중심들사이의 거리가 D2 보다 커야 하며 시험품의 모서리에서 D2 이상 떨어져야 한다. ④ 시험품의 두께는 눌린 자리깊이의 10배이상 되여 야 한다. 즉 경도를 재는 제품이나 시편의 최소두께 t 는 흔적깊이의 10배보다 커야 한다. HBDP 10 π /( ≥ ) ⋅ 시험품의 두께에 따르는 브레넬경도값은 표 3과 같다. d /mm 1.70 1.75 1.80 1.85 1.90 1.95 2.00 2.05 2.10 2.15 2.20 2.25 2.30 2.35 2.40 2.45 일 때의 경도 HB 321.0 302.0 285.0 269.0 255.0 241.0 229.0 217.0 207.0 196.0 187.0 178.0 170.0 162.0 156.0 149.0 1 2.50 2.55 2.60 2.65 2.70 2.75 2.80 2.85 2.90 2.95 3.00 3.05 3.10 3.15 3.20 2 143.0 137.0 131.0 126.0 121.0 116.0 111.0 107.0 103.0 99.1 96.5 92.0 88.7 85.5 82.4 표 ３．시험품의 두께에 따르는 브레넬경도 HB 최소두께/mm 140 3.4 160 3.0 180 2.7 200 2.4 250 1.9 300 1.6 350 1.4 400 1.2 450 1.1 N750 , 강구직경 하중 ⑤ 시험품의 표면정결도는 경도의 값에 큰 영향을 주지 않는다. 실제적으로 경도를 잴 때마다 매번 계산한다는것은 불편하므로 경도의 값은 흔적의 직 일 때 시편의 최소두께는 mm5=D mm42～ 이다. 경을 눈금있는 확대경으로 재고 표에서 해당한 값을 찾는 방법으로 구한다. 실천에서 제기되는 문제는 경도계를 리용할 때 사람마다 눈에 의한 착오로 하여 강구 흔적의 직경값이 다르게 측정되며 또 같은 흔적도 어느 방향으로 눈금축을 일치시켜보는 가에 따라 직경값이 다르게 측정된다는것이다. － 13 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제8호 이러한 현상에 따르는 강구흔적의 크기오차는 작지 않으며 그것에 대응되는 경도값의 차이도 작지 않다. 이로 하여 열처리금속제품의 당김세기 및 연신률과 자름면수축률은 실 제값과 적지 않게 차이나게 된다. 강구흔적의 경계를 명확히 검출하며 그 크기를 정확히 결 정하기 위하여 새롭게 실시간촬영기에 의하여 강구흔적을 조사하고 화상처리하여 그 정확 도를 종전의 3.16배로 높일수 있는 새로운 경도측정방법을 제기한다. 새 방법의 우점의 하나는 종전 확대경에 의한 측정방법에서와 같은 현상을 없애고 어떤 경우에도 그 측정값이 일의적으로 결정된다는것이다. 일반적으로 금속의 인장시험에서 경도값이 커지면 강도(세기한계)는 커지고 연신값은 작 아진다. 그리고 강도가 커지면 연신률(늘임률)과 자름면수축률은 작아진다. 얼마나 커지고 작 아지는가 하는것은 금속의 재질마다 다르며 열처리정도에 따라 다르다. 강도는 시편에 걸어준 최대힘에 해당한 응력으로서 으로 구한다. 여기서 mP 은 인장시험기로 당김시험을 진행할 때 시편이 끊어질 때까지의 최대하중이고 S 는 시편 의 자름면면적( SPm / =λσ 연신률 (%) 은 × 0 점거리, l 은 당김시험을 하여 시편이 끊어진 후의 표점거리, 100 /) l 0 으로 결정한다. 여기서 0l 은 당김시험을 하기 전의 표 l − 은 늘어난 길이이다. 0l 2mm )이다. lδ l ( −= ２．강구흔적을 재기 위한 알고리듬 촬영기의 해상도는 640× 480pixel이고 24배 경도계에서 1 mm 는 대략 76pixel로 나타난 ×mm 6.31 mm 로서 경도계에서 보여주는 6.8mm× 6.8mm 다. 즉 촬영기에 표시되는 령역은 8.42 의 령역을 대부분 포함한다고 볼수 있다. 0.015～ CCD촬영기에 의한 정확도는 밖은 검게 보인다. 0.030mm 정도로 된다. 경도계에서 보여주는 구역 강구흔적이 구형으로 들어간 부분이므로 해빛에 반사되는 부분이 생긴다. 연마흔적의 휘도는 강구흔적에서와 류사하다.(그림 1) 알고리듬은 다음과 같다. ① 촬영기연시구역찾기 및 중간지대제거 촬영기연시구역이 아닌 부분은 대단히 검기때문에 턱 값 0.1(25)정도로 잘라내고 식별하여 경계를 추출한다. 경계로부터 가장 먼 점을 구하고 촬영기연시구역의 반 경을 구한다. 중간지대의 휘도가 강구흔적에서와 류사하므로 촬영기 연시구역경계에서 50pixel(0.65mm정도)을 제외시킨다. 이때 촬영기연시구역의 90%이상이 경도계의 연시구역 이여야 하며 강구흔적은 경도계연시구역의 중심부분 즉 촬 그림 1. 강구흔적 영기연시구역의 중간에 위치하여야 한다. ② 탐색령역에서 강구흔적의 평균휘도를 탐색한다. ③ 화상히스토그람에서 봉우리부분을 탐색한다. 이를 위하여 평균밀림함수(밀림값 6) 를 리용하였다. 푸리에변환을 리용하여 고주파잡음부분을 제거하였다. － 14 － 열처리금속제품의 경도시험에서 화상처리에 의한 강구흔적의 경계검출과 크기결정 그것은 표면을 연마할 때 생기는 연마부분이 고주파잡음으로 나타나면서 앞으로의 강구 흔적추적이 복잡할수 있기때문이다. 휘도는 세가지로 나눌수 있다. 우선 가장 어두운 부분은 강구흔적, 흠, 홈 등이며 중간 부분은 연마부분, 가장 밝은 부분은 강구흔적의 반사구역이다. 연마흔적들과 흠들에 의하여 강구흔적의 휘도와 류사한 수많은 고주파잡음들이 존재 한다. 강구흔적의 경계가 가장 뚜렷하므로 RGB화상의 R 값화상을 주로 리용한다.(그림 2) ④ 강구흔적의 령역탐색 우선 가장 밝은 부분(반사되여 밝게 보이는 부분) 을 추출한다. 여러 구역으로 나타날수 있는데 가장 크 게 되는 부분을 강구흔적의 반사구역으로 본다. 알고리듬의 ②에서 구한 강구흔적의 평균휘도 를 리용하여 일정한 휘도값의 최대령역을 강구흔 적으로 본다. 우에서 구한 두 부분을 합하여 강구흔적의 초기 그림 2. R값화상 령역을 얻는다.(그림 3) 심과 강구흔적얻기 ⑤ 강구흔적의 초기령역에 기초하여 강구흔적의 중 －초기령역으로부터 강구흔적의 중심구하기 우선 중심으로 될 후보점들을 찾는다.(초기령역의 중 심의 근방) 다음 이 후보점들에서 반경을 증가시키면서 얻은 원 령역과 초기령역과의 겹치는 부분과 겹치지 않는 부분의 면적비를 구하며 이때 최대로 되는 점이 중심점, 반경이 강 구흔적의 평균반경으로 된다. 그림 3. 강구흔적의 초기령역 －강구흔적얻기 얻어진 강구흔적의 중심으로부터 반경을 증가시키면서 동심원구역을 구하여 이 령역 에 강구흔적의 초기령역이 얼마만한 비률로 포함되였는가를 계산한 다음 비률에 따라 처 리한다. 즉 75%이상인 경우는 정확한 강구흔적으로, 30%이하인 경우는 강구흔적이 아닌것으로, 그사이의 령 역은 그대로 리용한다.(그림 4) ⑥ 강구흔적의 최대직경 및 그것에 대응되는 최소 직경구하기 웃부분에서 구한 강구흔적의 경계를 추출하여 경 계점들사이의 거리가 최대로 되는 두 점과 이때의 거 리를 재여 최대직경을 구한다. 그것에 수직되는 부분을 최소직경부분으로 한다. － 15 － 그림 4. 강구흔적의 경계추출 종합대학학보(자연과학)   주체105(2016)년  제62권  제8호 ３．실험결과 및 분석 우리는 30개의 실험화상들에 대하여 선행연구[2, 3]에서 제안한 방법(표 4의 방법 1) 과 우리가 제안한 방법(표 4의 방법 2)을 리용하여 경계검출에 대한 실험을 진행하였다. 또한 강구흔적의 크기에 대한 정확도를 수동과 자동으로 비교하였다.  정확도는 다음과 같이 실험하였다.  모든 화상(경계검출에서 성공한 24개)에 대하여 수동으로 경계를 얻고 크기를 결정한 것을 기준값으로 한다. 표 5의 수동적인 방법은 강구흔적의 좌우상하점 4개를 결정하여 크기를 구하는 방법 이고 자동적인 방법은 경계를 검출한 다음 론문에서 제안한 새 방법으로 강구흔적의 크기 를 결정한것이다. 표 4. 경계검출에서 성공한 개수(10개당) 표 5. 강구흔적크기에 대한 정확도(%) 방법 1 방법 2 화상 1 화상 2 화상 3 4 7 6 8 6 9 수동 자동 화상 1 96.0 98.9 화상 2 95.2 98.7 화상 3 94.3 97.3 정확도는 표본오차를 리용하여 계산하였다. 실험화상은 전반적으로 어두운 화상(화상 1), 전반적으로 밝은 화상(화상 2), 밝기가 일 정한 화상(화상 3)으로 구분하고 매 부류당 10개를 리용하였다. 표에서 알수 있는바와 같이 론문에서 제안한 새 방법의 경계검출성공률은 보통 80%(표 4)이며 정확도는 98.3%(표 5)이다. 참 고 문 헌 [1] 권갑선; 강철의 합리적인 선택과 리용, 공업종합출판사, 12～204, 주체90(2001). [2] J. R. Marsilin et al.; Bonfring International Journal of Advances in Image Processing, 2, 1, 1, 2012. [3] V. S. Murthy et al.; International Journal of Engineering Science and Technology, 2, 3, 209, 2010. 주체105(2016)년 4월 5일 원고접수 Boundary Detection and Size Determination of Ball Trace in Hardness Test of Heat-Treated Metal Detail using Image Processing Ri Mun Ryong, Han Kwang Ryong We proposed algorithm to determinate accurately the size of still ball trace using image processing in brinell hardness test of heat-treated metal detail. Using the realtime camera, we look about ball trace and proposed new measurement method by the noise remove and boundary revision. Key word: ball trace － 16 －