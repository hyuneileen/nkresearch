김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제8호 Vol. 62 No. 8  JUCHE105(2016). 단색배경화상에서 한가지 목표점검출방법 최장수, 리명철 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《현시대는 과학과 기술의 시대이며 과학과 기술이 류례없이 빠른 속도로 발전하는것 은 현대과학기술발전의 중요한 특징입니다.》(《선집》 증보판 제15권 485페지) 론문에서는 TV편집물제작에서 출연자와 배경사이의 호상작용에 대하여 연구하였다. 출연자와 배경사이의 호상작용은 보통 출연자의 동영상에서 특정한 표적을 검출하고 그 표적이 일정한 위치로 다가가는것을 알아내는 방법으로 진행한다. 일반적인 동영상화상에서 특정한 표적점을 찾거나 대상의 움직임을 분석하는 연구는 많 이 진행되였다. 선행연구[1]에서는 어떤 특정점을 찾는 문제를 그 점을 중심으로 하는 일정한 원구역 에서 표준화상과 현재 화상과의 차가 최소인 점을 찾는 문제로 바꾸어 해결하였으며 선행 연구[2]에서는 류사성을 비교하여야 할 2개의 화상이 주어졌을 때 매 화상에서 대표점들을 찾고 그 점들사이의 대조도를 구한 다음 그 2개의 대조도를 비교하는 방법으로 평가하였 다. 그러나 선행방법들은 연산량이 많고 일반조건에서의 검출방법이므로 정확도가 높지 못 한 결함이 있다. 우리가 해결하려는 문제는 촬영장환경에서 출연자와 배경사이의 호상작용을 위하여 단 색배경에서 어떤 특정점을 검출하는것이다. 이 문제는 일반적인 검출문제와는 달리 배경색 과 특정물체의 색갈 등을 유리하게 설정할수 있다. 반면에 우리의 방법은 높은 정확도와 빠 른 실행속도를 만족시켜야 한다. 그러므로 일반조건에서의 선행방법들과는 달리 우리의 방 법은 특정한 조건에서 높은 성능을 나타내야 한다. 우리는 목표물체가 몸밖에 드러나는 경우 그 물체를 실시간으로 검출 및 추적하였다. 배경은 단색이며 푸른색이다. 필요에 따라 배경색을 풀색을 비롯하여 다른 색으로 할 １．검출알고리듬 수도 있다. 붉은색구모양으로 된 목표물체의 직경 0D 은 초기에 결정되며 물체는 가는 막대기와 련 결되여있다. 구의 색갈도 필요에 따라 배경색이 아닌 다른 색으로 바꿀수 있다. 알고리듬은 다음과 같다. １단계(입력화상의 재표본화) (SD 720 × 576 pixel ) 나 1(HD 020 × 1 080 pixel ) 의 해상도를 가 지는 촬영기화상을 그대로 리용할 때 연산량이 너무 많은 경우 입력화상을 필요한 크기로 재표본화하여 리용한다. 화상에 대한 재표본화는 여러가지 방법을 리용할수 있겠지만 제안문제의 해결에서는 연 － 17 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제8호 산량이 가장 작은 최근접이웃보간법으로도 충분하였다. ２단계(배경검출) 배경이 단색이고 푸른색이라는데로부터 매 화소점의 (R, G, B)에 대 하여 t+ RB ≥ t ( col 만일 배경색이 풀색이라면 GB ≥ t+ col col , : 턱값)인 점들을 배경으로 본다. RG ≥ BG, 로 주면 된다. +≥ + t t col col ３단계(목표후보점검출) 목표물체의 색갈이 붉은색이여도 촬영한 화상에서는 배경색이 스며들면서 그 색값이 달라진다. 실례로 공이 매우 빨리 움직이는 경우에는 공의 화소값에서 R값이 G, B와 거의 비슷 한 경우도 있다. 이로부터 GR,BR ≥ ≥ 와 같이 조건을 약화시켜 후보점들을 판단하였다. ４단계(후보점들에 대한 판정) －후보점판정에 필요한 거리 r 의 결정 후보점판정에서는 그 점으로부터 r 만큼 떨어져있는 점들의 모임을 리용한다. 여기서 는 R의 값을 정확히 결정하는것이 중요하다. 초기화상에서 가장 리상적인 r 는 목표공의 초기직경 0D 과 같다. 그런데 촬영기의 확대비률이 달라지는 경우 r 를 다시 결정하여야 한다. 우리는 배경에서 사람의 몸이 차지하는 평균너비를 계산하여 공의 직경변화비률을 추 정하였다. 즉 초기화상에서 배경이 아닌 화소의 수를 0P , 배경이 아닌 화소점이 놓이는 행 의 수를 0Q 이라고 할 때 사람몸의 평균너비를 확대비률이 변화된 화상에서 같은 방법으로 L = / QP 0 0 0 를 계산한다. /= QPL 으로 가정한다. / 1 = + 이때 로 준다. LLDr × 0 0 －후보점에 대한 판정 전체 화소점들의 모임을 S라고 하자. 그리고 후보점의 자리표를 u라고 하고 화상의 임 ) ) 는 u 와 v 사이의 유클리드거리, 의의 점의 자리표를 v 라고 하자. 이때 vu , vu , dist( arg( 는 벡토르 vu 와 x 축사이의 각으로 정의하자. 그리고 u 로부터 r 만 한 거리에 있고 균등하게 배치된 u ,(dist iNi , = B 를 전체 배경점들의 모임, 이때 후보점판정조건을 , r ) = i BVW I= 으로 주고 이 조건을 만족시키는 점을 목표점으로 본 arg( u = 로 정의하자. 여기서 40=N ,1 , N L= | NV =| 개의 점들을 보자. }  이다. /2 π v { NW =| ∈ V S v v ) , | | i i 다. 즉 u 의 N 개의 주변점이 다 배경점일 때 u 를 목표점으로 본다. －정확한 목표점선택 후보점모임을 판정하면 서로 떨어진 여러개의 덩어리들이 생긴다. 그 원인은 목표공이 몇개로 갈라져 나타나는 등 여러 외부적요인이 작용할수 있기때문이다. 이가운데서 면적이 가장 큰 덩어리를 목표로 본다. 그것을 위하여 목표로 판정된 점들 을 가지고 적당한 련결정보를 준 다음 BFS(Breadth First Search, 너비우선탐색)를 진행하여 서로 떨어진 여러개의 덩어리로 분할한다. 여기서 련결정보는 필요에 따라 4－린접성 또는 8－린접성 등으로 줄수 있다. 여기서는 4－린접성을 리용하여 진행하였다. 이때 화소수가 가장 큰 덩어리를 목표로 보 고 그 덩어리의 무게중심점을 목표의 중심점으로 본다. － 18 － 단색배경화상에서 한가지 목표점검출방법 ２．제안알고리듬의 성능에 대한 평가 우리는 여러가지 조명조건과 촬영기확대비률설정상태에서 출연자가 지시봉을 흔들거 나 일정한 방향을 가리키는 동작을 취하는 장면을 촬영한 30min정도의 동영상자료에서 우 연적으로 4 000여개의 정지화상을 얻고 그 정지화상자료기지에서 제안알고리듬의 목표점 검출성능을 평가하였다. 매 정지화상에서 공의 중심을 수동으로 지적하고 이것을 정확한 목표점의 중심으로 가 정하고 성능평가를 진행하였다. 알고리듬의 3단계에서 진행하는 후보점주변에서 배경점의 발생비률제한값을 변화시키 면서 얻은 검출성능결과는 표와 같다. 표에서 검출오차는 수동으로 지적한 공의 중 심과 알고리듬에 의하여 얻은 목표점의 편차를 공 의 직경으로 나눈 값이다. 여기서 검출 못한 개 수는 화상에 목표가 있을 때 검출하지 못한 개 수이고 잘못 검출한 개수는 목표가 없는 경우에 도 있다고 하거나 틀린 목표를 검출한 개수이다. 표에서 보는바와 같이 판정비률을 1로 설정 하였을 때에 가장 좋은 성능을 보여주고있다. 그 러나 이것은 조명조건이나 지시봉의 굵기, 지시 봉의 색갈에 따라 달라질수 있다. 표. | VW |/| | 의 변화에 따르는 검출성능결과 | VW |/| | 검출오차 검출 못한 개수/% 2.25 2.50 2.50 2.75 2.75 2.75 3.25 5.00 5.25 잘못 검출한 개수/% 56.25 55.50 54.75 50.50 35.25 9.50 2.75 0.05 0.025 4.850 5 4.229 9 4.087 9 3.830 9 3.157 6 0.926 5 0.232 6 0.131 3 0.120 3 0.800 0.825 0.850 0.875 0.900 0.925 0.950 0.975 1.000 [1] E. Tola et al.; IEEE Transactions on Pattern Analysis and Machine Intelligence, 32, 5, 2010. [2] H. Bay et al.; Computer Vision and Image Understanding, 110, 3, 346, 2008. 참 고 문 헌 주체105(2016)년 4월 5일 원고접수 A Method for Tracking a Target Point in a Single Colored Background Image Choe Jang Su, Ri Myong Chol We studied a new method for automatically detecting the position of a ball attached to the end of a bar in a video with single colored background that can be used to specify the relationship between the actor and the background in creating a real-time 3D TV virtual stage. Key words: single colored background image, target point － 19 －