김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체105(2016)년 제62권 제6호 Vol. 62 No. 6  JUCHE105(2016). 평균차분경계추출법을 리용한 차번호판검출의 한가지 방법 승찬길, 최철 차번호인식체계에서 초미의 문제의 하나인 차번호검출은 대상검출의 한 분야이며 지 난 수십년간 많은 방법들이 제안되였다.[2－4] 론문에서는 평균차분경계추출법과 련결성분 해석에 기초한 차번호판검출의 한가지 방법을 제안하고 각이한 해상도와 각도, 밝기조건에 서 입력화상들에 대한 검사를 진행하여 제안한 방법의 유효성을 검증하였다. １．평균차분경계추출법을 리용한 차번호판검출방법 차번호는 2진화상의 견지에서 볼 때 흰 배경에 검은 문 자 혹은 검은 배경에 흰 문자의 두가지 경우로 볼수 있다. 우리는 평균차분경계추출법(MDE: Mean Difference Edge Extraction Method)을 다음과 같이 제안한다. 먼저 그림 1과 같은 77 × 크기의 MDE추출마스크를 정 의한다. 과 같이 계산된다. 이때 MDE추출마스크를 리용한 MDE경계화상은 다음 그림 1. MDE추출마스크 iE ,( m j ) = iD ,( m j ) ≥ T m , iD ,( m j 0) < (1) iD ,( m j ) < T m ⎧ ,100 ⎪⎪ ,0 ⎨ ⎪ ⎪ ⎩ ,255 iD ,( m j ) ≥ T m , iD ,( m j 0) > 여기서 ,( iD m j ) = 1 44 ′ ,( ∑ iF ∈′ S ) 1 j ′ i ,( j −′ ) 1 5 ′ ,( ∑ iF ∈′ S ) j 2 ′ i ,( j ′ ) (2) 이고 1S 과 2S 는 각각 MDE마스크에서 곁수가 1/44, －1/5인 화소들의 모임이며 턱값 mT 은 3～5사이의 값으로 정한다. 이 MDE경계화상을 다음과 같은 정경계화상과 부경계화상의 2개의 2값화상으로 분해 하여 리용한다. iB p ,( j ) = iBn ,( j ) = ,1 ⎧ ⎨ ,0 ⎩ ,1 ⎧ ⎨ ,0 ⎩ iE ,( ,( iE j ) ) j = ≠ 255 255 iE ,( ,( iE j 0) = j ) 0 ≠ － 21 － (3) (4) 종합대학학보(자연과학)   주체105(2016)년  제62권  제6호 편리상 우리는 흰색배경에 검은색번호글자들을 가진 차번호 즉 부경계2값화상 ,( iBn j ) 에 대해서만 처리를 진행하는것으로 가정한다. １）MDE화상의 고속계산 77 × 크기의 마스크로 전체 화상을 주사하는것은 많은 계산시간을 소비한다. 이로부터 우리는 적분화상[1]을 리용한 MDE화상의 고속계산법을 적용한다. ,( iI j ) = ∑ ′ ,( iF ' j ≤ i ' i ≤ , j j ′ ) (5) 를 리용하면 식 (2)는 다음과 같이 쓸수 있다. ,( iD m j ) = [( I C + I − I B A − I D ) − S C ] − S C (6) 1 44 1 5 적분화상 여기서 S C = ′ ,( ∑ iF ∈′ S ) j ′ ) ′ i ,( i 를 중심으로 하는 ,( ) j j 2 이며 , DCBA , , 는 화소위치 77 × 크기의 창문 ijW 의 왼쪽 웃모서 리점 A 로부터 시작하여 시계바늘반대방향으로 조사되는 모서리점의 자리표이다. ２）차번호판후보들의 거친 검출 먼저 부경계2값화상 ) j iBn ,( 에 대하여 Run에 기초한 고속련결성분추출법을 리용하여 련결성분을 추출한다. 다음 번호판의 최소, 최대높이, 번호글자의 최대너비, 너비－높이비 등 번호글자의 기하학적특성에 부합되지 않는 비문자련결성분들을 제거한다. 그리고 번호글자들이 수평으로 린접되여있는 특성에 기초하여 고립적으로 떨어져있거 나 린접한 글자개수가 작은 련결성분들을 제거한다. 마지막으로 남은 련결성분들에 대하여 수평으로 린접한 련결성분들을 련결하여 번호 판후보들을 결정한다. ３）번호령역의 세밀결정 번호글자분리 및 인식단계에 들어가기 전에 번호판경사보정 및 번호글자령역의 세밀 결정이 필요하다. 매 번호판후보에 대하여 선행한 방법[4]과 류사하게 투영법에 기초한 방 법으로 번호글자령역을 세밀결정한다. ４）번호판의 경사각도추출  번호판령역에 테두리가 존재하는 경우 웃테두리선이나 아래테두리선의 경사각도는 번 호판의 경사각도와 일치한다. 또한 번호판령역에 테두리가 존재하지 않는 경우 번호글자들 의 웃화소점들과 아래화소점들이 번호판의 경사각도방향으로 일직선상에 놓이는 특성이 강 하다. 이 방법은 적은 수의 검은색화소를 리용하는것으로 하여 투영법의 속도개선에 기여한다. 가 아니라 다음과 같은 2값수평경계화상 를 리용한다. 이로부터 2값원화상 ib ,( ) ) j j ib ,(( j ) > ib ( − ,1 j ,) i < j ) < ib ( − ,1 i ≥ h )2/ ibh ,( j ,) (7) ibh ,( j ) = ⎧ ⎨ ⎩ ,1 ,0 h ib ,((,)2/ 기타 － 22 － 평균차분경계추출법을 리용한 차번호판검출의 한가지 방법 여기서 ib ,( j ) 의 너비, 높이를 각각 hw, 라고 한다. 수자화상의 분해능은 1화소단위이므로 투영각도의 간격은 =θ step arctan( /1 w ) , 투영각도 의 범위는 { θθ −= , start θ end } , θ start =θ end = arctan( wh ) / 이다. 이때 번호판의 경사각도는 다음과 같이 계산 된다. 여기서 각도 =θ (max i = off arg hih <<− arctan( wi / ) =θ plate / ) w i arctan( off Sum i ))( 이며 이때 Sum 는 )(i 로 투영한 수직투영히스토그람 빈중에서 값이 큰 순서로 선택한 4개의 빈들의 합 이다. 그림 2는 번호판령역의 경사각도를 결정하는 과 정을 보여준다. ５）번호판의 웃，아래경계결정 먼저 2값수직경계화상 j ibv ,( ,1 ⎧ ⎨ ,0 ⎩ = ) j ibv ,( ) 를 다음과 같이 얻는다. ib ,( j ) j + )1 ib ,( ≠ 기타 다음 화상 ibv ,( j ) 를 각도 plateθ 로 투영하여 얻은 수직히스토그람에서 너비가 가장 큰 봉우리의 웃, 아래점을 번호판의 웃, 아래경계로 결정한다.(그림 3) 그림 2. 번호판령역의 경사각도결정 ㄱ) 번호판화상, ㄴ) 수평경계화상, ㄷ) 경사투영 (8) ６）번호판의 좌, 우경계선결정 농담번호판화상을 앞에서 얻어진 각도로 회전시키고 웃, 아래경계선으 로 자른다. 이렇게 얻어진 화상에 대하여 선 행한 방법[4]인 적응턱값화법으로 2값 화하고 련결성분을 해석하여 번호글자 가 아닌 련결성분들을 제거한다. 남은 련결성분들의 통합령역의 좌, 우점을 번호판의 좌, 우경계로 결 정한다. 그림 3. 번호판의 웃, 아래경계결정 ㄱ) 번호판화상, ㄴ) 수직경계화상,ㄷ) 각도 plateθ 로 투영 ７）번호판후보들의 순서화 번호글자의 련결성분들이 끊어지거나 붙어있는 경우가 있기때문에 먼저 련결성분들의 우, 아래통합을 진행하고 다음 너비가 큰 련결성분들에 대하여 분리를 진행한다. 련결성분 들의 높이, 웃점과 아래점위치들의 분산합을 리용하여 번호판후보의 점수를 계산하고 점수 가 작은 순서로 번호판후보들을 순서화한다. － 23 － 종합대학학보(자연과학)   주체105(2016)년  제62권  제6호 ２．실험 및 결과분석 제안한 방법의 정확도와 속도를 검사하기 위하여 크기가 Set1: 800 × 480, Set2: 2 048 ×  1 536인 두가지 차번호화상모임이 실험에 리용되였다. 이 화상들은 여러가지 거리와 각도, 장소에서 입력한것이다. 리용한 콤퓨터는 Pentium 4(3.0GHz, 1GB RAM)이다. 표 1에 제안한 방법과 선행한 방법들인 SCW[3], OCS[2], MMDE+CCA와의 성능비교결과를 보여주었다. 표 １．번호판검출률과 검출시간의 비교 화상 제1위후보 제4위후보 검출실패 개수 검출개수 검출개수 개수 검출시간/ms 검출률/% 방법 SCW[3] OCS[2] MMDE+CCA 제안방법 (MDE+CCA) 화상 크기 Set1 Set2 Set1 Set2 Set1 Set2 Set1 Set2 230 182 230 182 230 182 230 182 210 153 210 153 212 160 218 165 17 24 17 24 16 18 11 15 3 5 3 5 2 4 1 2 40 380 30 280 45 420 32 220 98.7 97.2 98.7 97.2 99.1 97.8 99.5 98.9 한매의 화상에 2개까지의 차번호가 있다고 가정하고 번호판후보를 최대로 4개까지 찾으며 4번째 번호판후보에서도 정확한 번호판령역을 찾지 못하면 검출에서 실패한것으로 하였다. 표 1에서 보는바와 같이 제안한 방법이 선행한 방법들에 비하여 검출률과 검출시간에서 우월하다는것을 알수 있다. 대다수의 번호판들이 1위후보에서 검출되며 4위후보까지 조사하면 검출률은 99%에 이른다. 검출오유는 번호판안의 글자들의 대조도가 너무 낮아 2값화때에 번호글자들이 추출되지 않는 경우에 나타난다. 표 2에 MMDE방식과 MDE방식에서의 같은 화소성분개수와 련결성분개수의 비교를 보여주었다. MDE방식은 MMDE방식에 비하여 련결성분개수가 절반이하이며 결국 잡음이 작아져 전체적인 번호판추출시간이 짧아진다. 표 ２．MMDE와 MDE에서 Run과 련결성분개수의 비교 화상모임 Run개수 련결성분개수 MMDE MDE Set1 Set2 Set1 Set2 37 895 441 251 20 031 223 775 4 679 52 713 1 910 20 846 － 24 － 평균차분경계추출법을 리용한 차번호판검출의 한가지 방법 맺 는 말 내측경계추출방법과 련결성분해석에 기초한 번호판의 거친검출과 경사보정, 번호판글 자령역의 정확한 결정으로 이루어진 한가지 효률적인 번호판검출방법을 제안하였다. 제안한 방법은 대상검출에서 내측경계를 리용하는것이 효과적이며 크기가 큰 마스크 를 리용하는 경우 적분화상을 리용하여 경계추출시간을 단축할수 있다는것을 보여주었다. 또한 1화소단위로 투영각도의 간격을 정함으로써 번호판경사각도를 보다 정확히 계산 할수 있으며 번호판화상의 특성에 따라 SCW수법과 MDE+CCA수법을 결합하여 리용함으 로써 번호판추출정확도를 더 높일수 있다. 참 고 문 헌 [1] P. Viola et al.; Int. J. Comput. Vis., 57, 2, 137, 2004. [2] I. Giannoukos et al.; Pattern Recognition, 43, 3866, 2010. [3] C. Anagnostopoulos et al.; IEEE Transactions on Intelligent Transportation Systems, 7, 377, 2006. [4] J. Sauvola et al.; Pattern Recognition, 33, 225, 2000. 주체105(2016)년 2월 5일 원고접수 A Method for Extraction of Car License Plate using the Mean Difference Edge Extraction Sung Chan Gil, Choe Chol We propose a method for extracting car license plate(LP) using the mean difference edge extraction. Using the integrated images we can extract the car license plate rapidly. And our method can further improve the accuracy of LP location extraction in combination with SWA and MDE+CCA methods according to quality of LP images. Key words: license plate, recognition, edge extraction － 25 －