김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체104(2015)년 제61권 제11호 Vol. 61 No. 11  JUCHE104(2015). 수자식화상으로부터 주요색결정방법 김주혁, 장영국 위대한 수령 김일성동지께서는 다음과 같이 교시하시였다. 《오늘 우리앞에 나선 중요한 문제의 하나는 과학과 기술을 발전시키는것입니다.》 (《김일성전집》 제27권 270페지) 우리는 MATLAB프로그람을 리용하여 수자식배경화상으로부터 포함량이 가장 많은 색 들을 선택함으로써 여러가지 목적에 리용하기 위한 색들을 정량적으로 결정하는 한가지 방 법을 연구하였다. 배경화상으로부터 주요색결정원리와 방법 우리는 수자식천연색배경화상에서 매 화소들에 대한 화소값들을 분석하고 그 색들의 빈 도수를 구하여 포함량을 결정한 다음 그로부터 가장 많이 들어있는 색(대체로 3개이상)들 을 결정하였다. 이때 결정되는 색들의 값을 (R, G, B)값으로 결정하며 포함량도 정량적으로 결정한다. 실험에서는 일반적으로 널리 쓰는 RGB색모형을 리용하였다. 이 모형은 세가지 원색 즉 붉은색, 풀색, 푸른색들의 여러가지 조합으로 다른 색들을 표현한다.[1－3] RGB색모형은 그림 1과 같다. 그림 1에서 보는바와 같이 RGB색모형은 R, G, B축에서 정의되는 단위바른6면체로 표현할수 있다. 원점은 검은색을 표현하며 자리표가 (1, 1, 1)인 정 점은 흰색이다. 바른6면체안의 매개 색점은 , bgr , ) 로 표현 bgr ,( , 의 값은 0～1사이 범위 성분들로 다음과 같 , bgr , 할수 있다. 여기서 에 있으므로 색 λC 는 이 표시할수 있다. r =λ C + BGR + g b (1) 여기서 R, BG, 는 각각 그림 1에서 보여준 방향 그림 1. RGB색모형 의 단위벡토르들이다. 수자식천연색화상에서는 색화상을 이루는 매 화소값에 대한 정보가 일반적으로 , bgr , 의 기본색변수로 되여있다. 천연색화상을 표현하는 화상에는 조색판화상도 있다. 조색판화상은 조색판에 의하여 표 시되는 화상형식이다. 이 화상에서는 최대로 표현할수 있는 색의 수가 256개이다. － 62 － 수자식화상으로부터 주요색결정방법 조색판화상에서 매 화소의 색은 색변수의 수값으로 직접 결정되는것이 아니라 매 화 소값이 조색판의 표항목의 입력주소로 된다. 이 경우 매 화소의 값은 색정보가 보관되여있 는 조색판의 번호를 가리킨다.[2] 콤퓨터에 입력되는 수자식천연색화상들은 매개 화소점에서의 색정보가 3개의 값 즉 값에 의하여 규정된다. 매개 성분에 대하여 8bit를 리용하면 224개의 색을 표현할수 있 , bgr , 다. 여기서 실지로는 같은 색(실례로 풀색의 나무잎)이지만 해비침각도와 거리 등에 따라 수 자식화상에서는 약간 차이나는 색(풀색과 약간 밝은 풀색)으로 될수 있다. 우리는 사람이 구분할수 없을 정도로 비슷한 색은 같은 색으로 처리하여 주어진 화상 을 보다 적은 개수의 색을 가진 화상으로 만들었다. 물론 새로 얻어지는 화상은 본래의 화 상보다 화상질은 떨어질수 있지만 구분할수 있는 색의 개수를 규정하여 본래의 화상과 큰 차이가 생기지 않도록 할수 있다. 이를 위하여 우리는 입력된 RGB화상을 보다 적은 개수의 색으로 표현되는 조색판화 상(Matlab에서는 indexed image)으로 만들고 여기서 가장 큰 빈도를 가지는 몇가지 주요색 을 검출하였다. 이때 색공간의 최소분산량자화방법을 리용하였다. 주어진 배경화상의 화소값들은 RGB색공간의 점들에 의하여 표현되며 조색판화상으로 변화된 배경화상의 화소점들의 색정보는 RGB공간의 몇개의 부분공간들의 점들에 의하여 표 현된다. 이때 RGB색공간을 필요한 개수의 부분공간들로 나누는 방법의 하나가 바로 최소 분산량자화방법이다. 나누이는 부분공간의 개수는 주어진 화상에서 우리가 구분하려는 색 들의 최대개수와 같다. 최소분산량자화는 화소값들사이의 거리의 개념에 기초하여 진행한다. 실례로 실지 화 상에서 색갈이 약간씩 차이나는 어떤 부분의 푸른색화소부분은 그 화소들이 그 부분의 중 심화소의 색과 작은 거리를 가지는 색들을 가지기때문에 같은 색화소들로 되도록 한다. 여기서 거리라는것은 RGB색공간에서 정의되는 개념이다. + 만일 색공간에서 서로 다른 2개의 색이 각각 , G G R R B C C B = + g g = + + 2 r 2 2 b 2 1 b 1 r 1 로 표시될 때 두 색사이의 거리는 다음과 같다. r 2 최소분산량자화는 다음과 같은 방법으로 실현할수 있다.  규정한 색갈의 최대수가 n 개로 주어졌다고 하면 RGB색공간은 n 개의 부분공간으로 나 (2) b ( 2 g 1 b 1 r 1 + − = + − − g d ( ) ) ( ) 2 2 2 1 2 누어지게 된다. 이때 j 번째 부분공간에서 색 jC 의 분산은 다음과 같다. ( CVar ) = j [( r ji − r j 2 ) + ( g ji − g 2 ) j + ( b − b j ji 2 ]) = 2 d ji (3) 1 m j m j ∑ i 1 = 1 m j m j ∑ i 1 = r j = r ji , g j = g , ji b j = (4) 1 m j m j ∑ i 1 = 1 m j m j ∑ i 1 = 1 m j m j ∑ i 1 = b ji 여기서 j 는 1, 2, …, n 으로서 나누어진 부분공간들의 번호를 표시하며 의 화소점들가운데서 색공간의 j 번째 부분공간에 들어가는 화소의 개수, ( jm 는 본래 화상 는 j b g r ) , , j j j － 63 － 종합대학학보(자연과학)   주체104(2015)년  제61권  제11호 번째 부분공간에서 평균값을 가지는 색의 값, 번째 색의 , bgr , 이때 모든 ji 값, jid 는 j 번째 부분공간에서 i 번째 색과 평균색사이의 거리이다. jCVar ( 에 대하여 다음의 조건을 만족시키는 g b r ) ( ) ji ji , , j j j 들이 우리가 결정 ( r , g , b ) 는 j 번째 부분공간에 들어가는 i 하려고 하는 색의 , bgr , 값이다. min , g j r j , b j ( CVar ) = j min , g j r j , b j [( r ji − r j 2 ) + ( g ji − g 2 ) j + ( b − b j ji 2 ]) = (5) 1 m j 1 m j m j ∑ i 1 = m j ∑ i 1 = = min , g j r j , b j 2 d ji 우리는 응용프로그람 Matlab로 배경화상을 처리하는 프로그람을 작성하여 배경으로부 터 주요색들을 , bgr , 값으로 정량적으로 결정하였다. 실지 화상을 처리한 실례는 그림 2와 같다. 그림 2. 배경화상(ㄱ))과, 조색판화상(ㄴ)), 결정된 3가지색(ㄷ)) 론문에서는 우선 RGB색공간을 최소분산량자화를 리용하여 원래의 배경화상을 큰 이 지러짐이 없이 조색판화상으로 넘기고 이 화상을 리용하여 배경에 들어있는 주요색들의 포 함량과 값을 정량적으로 평가하였다. [1] 김수금 등; 화상처리기초, 종합대학출판사, 23～69, 주체92(2003). [2] B. M. Thomas; Introduction to Video and Image Processing, Springer, 27～34, 2012. [3] K. P. William; Digital Image Processing, Wiley, 127～142, 2007. 주체104(2015)년 7월 5일 원고접수 맺 는 말 참 고 문 헌 － 64 － 수자식화상으로부터 주요색결정방법 A Method for the Determination of Dominant Colors from a Digital Image Kim Ju Hyok, Jang Yong Guk We estimated the dominant colors quantificationally for the camouflage of visual light from a digital image of background using Matlab program, which can be applied to establish a method for determination of colors in many fields. Key words: digital image, Matlab program － 65 －