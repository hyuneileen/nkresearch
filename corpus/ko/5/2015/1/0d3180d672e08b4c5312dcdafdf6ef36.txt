김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체104(2015)년 제61권 제1호 Vol. 61 No. 1  JUCHE104(2015). 배후조명등을 리용한 차검출의 한가지 방법 정일식, 리성철 선행한 차검출알고리듬들은 각이한 조명과 날씨조건, 차그림자의 변동과 같은 환경의 영향을 받는다. 론문에서는 차의 붉은색배후조명등을 리용하여 이러한 외적요인에 대하여 비교적 안정한 새로운 차검출알고리듬을 제안하였다. 실험을 통하여 제안한 차검출방법이 여러가지 날씨와 조명조건 등에서 정확성이 높고 매우 효과적이라는것을 검증하였다. １．선행연구정형 및 문제설정 차검출은 자동차감시체계, 운전지원체계와 같은 많은 응용들에서 차의 대수와 형태, 속도와 통과량과 같은 여러가지 교통파라메터의 측정을 위하여 제기되는 중요한 문제 의 하나이다.[1, 2] 일반적인 차검출을 위한 방법들로서 배경모델구축에 의한 방법이 보편적으로 리용 되고있는데 여기서는 배경덜기법이나 가우스모델을 리용한 방법[3], W4방법[4]이 많이 리용되고있다. 배경모델을 리용한 이 방법들은 이미 구축한 배경자료를 리용하여 전경부분과 배경 부분을 분리하고 그에 기초하여 움직이는 차령역의 검출을 쉽게 할수 있다는 우점이 있 지만 차가 주행하는 환경에 작용하는 여러가지 조명변화와 그림자효과, 혼잡, 날씨조건 등과 같은 외적요인들에 대하여 차검출의 정확성과 안정성이 심히 떨어지는 결함이 있다. 이와 같은 결함들을 극복하기 위하여 조명변화를 감소시키고 그림자제거와 같은 많 은 개선방법들이 연구도입되고있지만 실내와 실외조명에 대한 적용이 서로 다르고 특히 실내에서 조명배치에 따르는 그림자효과가 다양하게 나타나기때문에 이러한 방법으로는 일반적인 조명변화나 그림자에 대하여 정확하고 안정한 차검출을 기대할수 없다. 특히 조 명이 없는 야간에 차를 검출하는것은 거의 불가능한것으로 되고있다. 론문에서는 차의 색들은 매우 각이하고 그 크기와 모양도 서로 다르지만 차의 배후 조명등은 각이한 조건하에서 지어는 안개가 끼거나 밤에도 여전히 붉은색이고 서로 대칭 적으로 놓여있다는 사전지식에 기초하여 서로 대칭인 붉은색배후조명등검출을 리용하여 차검출을 진행하는 새로운 방법을 제안한다. ２．붉은색배후조명등검출을 리용한 차검출방법 제안된 방법은 색특징추출과 대칭성분석, 형태학적재구성, 경계상자생성의 4단계로 이루어진다. 우선 한쌍의 배후조명등을 찾기 위해 R, G, B색공간에서 붉은색특징을 추 － 30 － 배후조명등을 리용한 차검출의 한가지 방법 출하고 대칭성평가함수를 리용하여 그것들의 대칭성을 분석함으로써 대칭축의 정확한 위 치를 밝힌다. 또한 대칭축을 리용하여 한쌍의 경계들을 찾으며 찾아진 쌍경계들을 리용하 여 완전한 차경계들을 재구성한다. 그다음 검출된 차령역에 맞추어 경계상자를 생성하고 최종적으로 차의 위치와 크기를 입력된 동화상으로부터 정확히 검출한다. 방법의 구체적 인 단계는 아래와 같다. １）색특징추출 색특징추출은 알고리듬의 기본단계로서 배후조명등의 붉은색령역을 찾는 단계이다. R, G, B색공간에서 한쌍의 배후조명등을 고속으로 찾기 위하여 다음의 붉은색수준을 정의한다. 의 색벡토르를 라고 할 때 붉은색수준을 R, G, B색공간에서 화소 yxi ,( ) ) ( , BGR i i , i 아래와 같이 정의한다. 여기서 xr ,( y ) 는 화소 yxi ,( ) i BG + i 0> 이다. 이 정의를 리용하여 차화상에서 붉은색수준을 계산한 다음 계산결과를 ]1,0[ 로 표준 ) yxr ,( R 2 i BG + i i 의 붉은색수준이며 = (1) 화하고 평균려파기로 처리한다. 다음 처리된 결과를 x 평면으로 사영한다. 즉 ,( z ) xz )( = max yxr ,(( Hy 1 −≤≤ 0 )) . 여기서 H 는 화상의 높이이고 z 는 화상의 붉은색수준 의 투영된 값을 표시하는데 그 값은 2개의 봉우리값들 을 가지며 두 봉우리사이에 대칭축이 있다는것을 알수 그림. 사영된 붉은색수준값 있다.(그림) ２）대칭성분석 할수 있다. 즉 에 따라 변화된다. 붉은색특징을 추출한 다음 붉은색수준의 대칭성을 분석하기 위하여 대칭성평가함수 를 리용하여 대칭축의 정확한 위치를 계산한다. 일반적으로 임의의 함수 )(xf 는 짝함수 )(xfe 와 홀함수 fo 의 선형결합으로 표시 )(x xf )( f ( − x ) xf )( f ( − x ) xf )( = + .           (2) + 2 − 2 한편 원점에 관한 함수의 대칭성정도는 그것의 홀함수에 비한 짝함수의 상대적인 비 이제 사영된 붉은색수준값 )(xz 를 표시하기 위하여 고 편리상 대칭간격 w 를 가지는 대칭축을 표시하는 파라메터 )(xg 라는 함수를 도입하자. 그리 를 wWx s ( wx s )2/ 2/ − ≤ ≤ 생각하자. 여기서 W 는 화상의 폭이다. 이때 u x −= sx 를 리용하면 다. 그러면 sx 와 주어진 폭 w 에 대해서 다음과 같이 정의할수 있다. － 31 － )(ug 의 원점을 함수우의 임의의 위치 sx 로 밀기할수 있 를 리용하여 짝함수와 홀함수를 )( xg ( xg u = ) s + 종합대학학보(자연과학)   주체104(2015)년  제61권  제1호 ⎧ xuO ,( ⎪⎪ ⎨ ⎪ ⎪ ⎩ xuE ,( s ) = s ) = xg ( s + u ) xg ( s − u ) xg ( s + u ) xg ( s − u ) − 2 + 2 , − w 2/ ≤≤ wu 2/ (3) 홀함수의 평균값은 항상 령인 반면에 짝함수는 어떤 정의 평균값을 가진다. 따라서 령의 평균값을 가지는 표준화된 짝함수를 다음과 같이 유도할수 있다. xuE ,( n s ) = uE ,( x s ) − uE ,( x s ) du (4) 1 w + w 2/ ∫ − w 2/ 이러한 nE 과 O 로부터 대칭성정도에 대한 다음과 같은 측정값을 얻을수 있다. w 2/ 2/ w + + ( xS s ) = ∫ w 2/ − w 2/ + ∫ − 2/ w ,( xuE n s ) 2 du − ,( xuO s 2 ) du ,( xuE n s 2 ) du + ,( xuO s 2 ) du w 2/ 1=S 이고 반대칭의 경우에 2/ 2/ ∫ w − w + ∫ − 리상적인 대칭에 대해서 역에서 S의 최대값으로 대칭축을 찾을수 있다. , 1 ≤− ( sxS 1) ≤ (5) 1−=S 이다. 따라서 주목하는 령 ３）형태학적재구성 앞에서 찾은 한쌍의 배후조명등의 정확한 대칭축을 가능한 차경계를 재구성하는데 리용한다. 다음 쏘벨(Sobel)연산자를 리용하여 계조화상에서 이 탐색령역의 경계들을 검 출한다. R 를 탐색령역의 경계들의 모임이라고 할 때 한쌍의 경계들은 다음과 같이 탐 색된다. A = ,{( x y ) ∀ ,( x y ) ∈ R , ′∃ ( , x y ) ∈ ( xR =′+ x })2 sx (6) 탐색한 한쌍의 경계들을 가지고 탐색령역안에 있는 련결된 경계들을 재구성한다. 차 들에 있어서 대칭성이 가장 일반적인 특성이기때문에 한쌍의 경계들에 의해 재구성되는 련결된 경계들은 가능한 차들을 서술하는데 좋은 특징들로 된다. ４）경계상자들의 생성 ,( xG y ) 를 차의 경계지도라고 하자. 이때 탐색령역안에서 차경계지도의 수평, 수직 투영벡토르 iv 와 jh 는 다음과 같이 계산된다. ⎧ v ⎪ i ⎪ ⎨ ⎪ ⎪ ⎩ h m ∑ j 1 = n ∑ i 1 = = ( xG i , y ) j = j ( xG i , y ) j (7) 여기서 m 은 탐색령역의 높이, n 은 폭이다. 식 (7)에서 iv 와 jh 의 값이 큰 값을 가질 때 뚜렷한 수직경계와 수평경계를 나타낸 다. 그러므로 턱값을 매 방향에서 가장 큰 투영값의 절반으로 한다. 여기로부터 수직투영벡토르는 왼쪽과 오른쪽으로부터 시작하여 벡토르입력점이 두 경우에 다 턱값이상우에 놓이게 될 때까지 탐색하는데 이러한 입력점들의 위치는 해당한 차의 좌우경계들의 위치를 결정한다. 류사하게 차의 우와 아래경계들도 수평투영벡토르를 탐색하면 결정할수 있으며 결과 차를 포함하는 경계상자를 얻을수 있다. － 32 － 배후조명등을 리용한 차검출의 한가지 방법 ３．결 과 분 석 제안된 방법의 효과성을 검증하기 위하여 각이한 조명 및 날씨조건(개인날, 흐린날, 밤)하에서 실험을 진행하였다. 차검출의 정확도를 평가하기 위하여 동일한 화상에서 사람 이 그린 차의 륜곽에서 검출된 차의 중심을 계산하고 검출된 차의 중심이 사용자가 선택 한 범위안에 떨어지면 성공적인 검출로 기록하였다. 실험결과를 아래의 표에 주었다. 표. 각이한 조명하에서 차검출결과 날씨조건 차수/대 검출된 차수/대 놓친 차수/대 틀린 검출 검출률/% 개인날 흐린날 밤 100 120 110 90 107 93 8 9 14 2 4 3 90 89.2 84.5 실험결과로부터 제안한 방법이 밤에도 거의 85%정도의 정확도로 차검출을 진행할수 있다는것을 알수 있다. 또한 이 방법은 붉은색차들에 대해서 붉은색분포는 동일한 대칭성의 특징들을 가진다는것으로부터 그러한 종류의 차들을 검출하는데도 리용할수 있다. 참 고 문 헌 [1] V. Kastrinaki; Image and Vision Computing, 21, 4, 359, 2003. [2] Z. Sun et al.; IEEE Trans. Pattern Analysis and Machine Intelligence, 28, 5, 694, 2006. [3] T. Zhao et al.; IEEE Trans. Pattern Analysis and Machine Intelligence, 26, 9, 1208, 2004. [4] S. Haritaoglu, et al.; IEEE Trans. Pattern Analysis and Machine Intelligence, 22, 8, 809, 2000. A Method for Vehicle Detection using the Rear-Lights 주체103(2014)년 9월 5일 원고접수 Jong Il Sik, Ri Song Chol The existing vehicle detection methods are subject to many influences of environment, such as different lighting and weather conditions, moving vehicle shadows, etc. To solve these problems, this paper proposed a vehicle detection algorithm using red color rear-lights region in vehicle image. Key words: RGB color space, vehicle, symmetry detection, morphological reconstruction － 33 －