김일성종합대학학보 (자연과학) JOURNAL OF KIM IL SUNG UNIVERSITY (NATURAL SCIENCE) 주체104(2015)년 제61권 제6호 Vol. 61 No. 6  JUCHE104(2015). LabVIEW를 리용한 ２차원스펙트르분석기의 RS232직렬자료통신 강호, 송용혁 LabVIEW는 원자력, 자동화, 통신, 반도체회로설계와 생산 및 조종, 생물, 의학 등 여 러 분야에서 광범하게 리용되고있다. LabVIEW는 기능이 풍부하고 리용하기가 편리하며 기 술갱신이 쉽고 믿음성이 매우 높다.[3－5] 최근 비약적으로 발전하고있는 한소편IC의 응용분야는 계속 넓어지고있다. 특히 PIC 계렬 한소편소자들은 원가가 낮고 조종하기 쉬우며 측정계통의 정밀성, 속도, 안정성을 충 분히 보장한다.[1, 2] 우리는 LabVIEW도형화프로그람작성언어와 PIC계렬 한소편소자 PIC16F877A를 리용하 여 2차원스펙트르분석기의 RS232직렬자료통신을 실현하였다. PIC16F877A와 MAX232를 리용하여 2차원분석기와 콤퓨터사이의 자료송수신을 실현하 １．장 치 설 계 기 위하여 구성한 회로는 그림 1과 같다. 그림 1. PIC16F877A와 MAX232를 리용한 자료송수신회로도 － 51 － 종합대학학보(자연과학)   주체104(2015)년  제61권  제6호 PIC16F877A의 RA0－RA3(RA0 진폭자료읽기, RA1 시간자료읽기, RA2 분석기에로의 쓰 기, RA3 새치기)단자들을 조종신호로 리용하였다. 스펙트르분석기의 16bit 자료중에서 아래8bit는 RB0－RB7로, 웃8bit는 RD0－RD7로 PIC16F877A가 접수한다. RC6, RC7단자들은 MAX232를 거쳐 콤퓨터와 자료송수신을 진 행한다. PIC16F877A와 MAX232의 ＋5V 전원은 분석기의 ＋5V 안정전원으로 보장하였다. 측정체계프로그람알고리듬은 그림 2와 같다. ２．펌웨어설계 측정체계는 먼저 장치초기화를 진행하고 분석기 에로의 측정시작 및 쓰기신호에 따라 측정을 시작한 다. 분석기에서 A/D변환이 끝난 후 새치기신호가 발 생하는데 PIC16F877A가 이 신호를 접수하면 진폭자 료, 시간자료를 읽고 순서대로 콤퓨터에 전송한다. 새 치기신호가 발생하지 않으면(분석기입구에 신호가 들 어오지 않았거나 A/D변환이 끝나지 않은 경우) 발생 할 때까지 대기한다. 다음 측정정지신호가 발생하지 않 으면 측정을 반복하며 측정정지신호가 발생하면 체 계의 전체 동작을 완료한다. 보드속도는 고속(BRGH=1)일 때 보드속도=FOSC/(16(X+1)) 에 의하여 규정된다. 여기서 FOSC는 주파수, X는 보 드속도발생등록기 SPBRG의 값으로서 0～255이다.  우리의 경우 보드속도 57.6(FOSC 20MHz)에 대하 여 오유는 3.34%, SPBRG값은 20이다. PIC소자의 통합개발환경인 MPLAB IDE를 리용 하여 프로그람을 작성, 수정, 기계번역하고 완성된 코 드를 PIC소자에 써넣는다. 그림 2. 측정체계프로그람알고리듬 ３．대면부프로그람설계 LabVIEW측정체계프로그람환경은 그림 3과 같다. 프로그람은 입출력대면부, 연시부, 자료보관 및 적재부, 분석부로 되여있다.  입출력대면부에서는 진폭과 시간통로설정, 측정시간설정, 측정시간계수를 할수 있고 연 시부에서는 기록수－진폭, 기록수－시간, 기록수－진폭－시간에 대한 1차원, 2차원자료와 총 기록수, 현재의 진폭과 시간자료들을 연시하며 필요에 따라 연시를 림시 중지시켜 볼수 있 다. 자료보관 및 적재부에서는 기록수－진폭, 기록수－시간, 기록수－진폭－시간자료를 차 례로 하드디스크에 보관 또는 화면에 적재한다. － 52 － LabVIEW를 리용한 2차원스펙트르분석기의 RS232직렬자료통신 그림 3. 측정체계프로그람환경 분석부에서는 스펙트르의 통로별 더하기와 덜기, 스펙트르의 원활화, 봉우리탐색, 스펙 트르면적계산, 통로눈금새김(에네르기, 시간) 등을 진행한다. 섬광검출기 NaI(Tl)를 리용하여 표준원천60Co의 γ선에네르기스펙트르를 측정하였다. 측 정한 γ선스펙트르는 그림 3에서 보는바와 같이 선행연구결과[5]와 일치하였다. 맺 는 말 한소편소자 PIC16F877A와 MAX232를 리용하여 스펙트르분석기의 직렬자료송수신회로 를 설계제작하였다. 통합개발환경 MPLAB IDE를 리용하여 펌웨어를 작성하고 PIC소자에 써 넣었다. LabVIEW 8.0을 리용하여 스펙트르분석기의 핵스펙트르측정프로그람을 개발하고 섬광 검출기 NaI(Tl)를 리용하여 표준원천60Co의 γ선에네르기스펙트르를 측정한 결과 실제자료 와 일치하였다. 참 고 문 헌 [1] Nan Guangqun et al.; Journal of HuangShi Institute of Technology, 21, 6, 31, 2005. [2] Zhang Hongjuan et al.; Mechanical and Electrical Engineering Magazine, 22, 2, 10, 2005. [3] Luo Wen et al.; Nuclear Electronics and Detection Technology, 31, 7, 722, 2011. [4] Daniele Marocco et al.; IEEE Transactions on Nucl. Sci., 56, 3, 1168, 2009. [5] Cheng Xiaolei et al.; IEEE Transactions on Nucl. Sci., 57, 2, 539, 2010. 주체104(2015)년 2월 5일 원고접수 － 53 － 종합대학학보(자연과학)   주체104(2015)년  제61권  제6호 RS232 Serial Data Communication of Two-Dimensional Multichannel Spectrometer based on LabVIEW Kang Ho, Song Yong Hyok The data acquisition system of A-T two-dimensional multichannel spectrometer based on the technology of PIC16F877A and LabVIEW was designed. The hardware of data acquisition system between spectrometer and computer was developed with PIC16F877A and MAX232. According to the requirements of the system, the software of system involves the design of firmware and the design of the application program. The result measuring γ-ray(60Co radioactive resource) with NaI(Tl) detector using the data process program developed by the graphical programming language LabVIEW was coincided with the real data. Key words: PIC, LabVIEW, RS232, spectrometer － 54 －