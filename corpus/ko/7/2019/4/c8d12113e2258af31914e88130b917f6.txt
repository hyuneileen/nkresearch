김일성종합대학학보 수 학 주체108(2019)년 제65권 제4호 개선된 표본렬을 리용하여 ３차원영상생성에서 화질을 높이기 위한 한가지 방법 한성, 리정로 렌더링에서는 ( xL V =→ ) ( xL e V +→ ) ,( Lx → () xLV ← L ) cos( dLN ω) L , 을 풀어야 하 f r ∫ Ω x 는데 이것의 해석적계산은 불가능하므로 몽떼－까를로적분을 써서 계산한다. 1 n V =→ V +→ ← ) ,( Lx ( xL e ∑ , LN cos( () xLV ( p ω i ( xL → L ) ) ) ) f r ) ( V i xLe → 는 면의 x 점에서 V 방향으로 방출되는 빛흐름을 나타내고 ) 여기서 면의 x 점에서 V 방향으로 반사되는 빛흐름을 나타낸다. 총적으로 로 향하는 빛흐름을 나타낸다. xdL ( dE x ( xLr → 는 V xL → 는 V 방향으 → 는 쌍방향반사률함수(BRDF)라고 부르며 f r Lx ,( xdL V ( ) → L dLN ) cos( , xE ← 은 x 점에서 와 같이 정의된다. V =→ → ← Lx ,( V L xL ( ← ) ) V V L = ( ) ( ) ( ) ) f r ω) L L 방향에서 입사하는 빛에 대한 비침도이다. BRDF는 재질마다 고유한 척도로서 얻어낸 영상이 현실과 류사하도록 조절통제하는 수단이다. 이 함수를 실제한 재질과 가깝게 정할수록 질이 높아지게 된다. 3차원렌더링방정식의 수치풀이를 구하는데서 표본렬을 잘 선택하는것이 중요한 문제 로 나선다. 표본렬을 특징짓는 중요한 척도로서 불일치량[1]이 있다. 불일치량은 n 차원공 간의 표본렬의 질을 평가하는데 리용된다. 불일치량은 한마디로 말하여 n 차원공간의 모 에 표본렬이 분포되여있을 때 그것의 임의의 구역에 들어있는 표본의 수를 표 임 n]1,0[ 본전부의 개수로 나눈 값과 그 구역의 측도와의 차이의 상한을 말한다. B = 1 ] v ,0[ 점모임의 불일치량을 계산하기 위하여 그것의 부분모임으로서 모임 B를 실례로 ,0{[ ] × × 표본점들의 렬 ≤ iv 과 같이 선택할수 있다. 0 Nx 와 같다. 여기서 이 주어졌을 때 모임 B 에 대한 P 의 불일치량은 xi ∈ 는 b 에 들어있는 점들의 수이 xP = 1 bVNb /} − , ]} (cid:34) , |)( {|# n , ,0[ (cid:34) {# b } x i ∈ × < = 1 v v x ) 2 2 , PBD ( , N sup Bb ∈ 고 )(bV 는 b 의 체적이다. 모임 B 가 하나의 정점이 원점에 있는 통들의 모임일 때의 불 일치량을 특별히 별불일치량이라고 부르고 (* PDN 로 표시한다. ) 특별한 점모임에 대하여 불일치량은 해석적으로 계산할수 있다.  실례로 일 때 불일치량은 /1) = 은 그 모임을 약간 변경시키면 개선될수 있다. 다시말하여 xi * xD ( 1 N Ni /= (cid:34) xi N x x 2 n , , , 이다. 이 렬의 별불일치량 로 놓으면 별불 i ( −= /)2/1 N 일치량은 * xD ( N 1 , x 2 , (cid:34) , x n N )2/(1) = 로 된다. 1차원에서 표본렬의 불일치량은 과 같은 성질을 가진다. 1 N 2 은 1차원에서 불일치량이 가장 작은 렬로 된다. * xD ( N i max 1 Ni ≤≤ i 2 2 − N x i − + = 1 ) 이로부터 xi i ( −= /)2/1 N － 22 － 종합대학학보 수학 주체108(2019)년 제65권 제4호 일반적으로 1차원에서 표본렬의 불일치량을 계산하고 경계를 구하는것은 2차원에서 보다 훨씬 쉽다. 보다 복잡하게 구성된 렬과 고차원에서의 표본렬의 불일치량 그리고 통 이 아닌 보다 불규칙적인 모임에 대한 불일치량은 모임을 많이 구성하여 수치적으로 추 정하고 불일치량을 계산하여 얻어진 값들가운데서 최대값으로 선택한다. 불일치량만으로서는 표본렬의 좋고 나쁜 정도를 정확히 규정할수 없다. 어떤 LDS렬 (불일치량이 작은 렬)에서는 표본들이 너무 가까이 배치되여있게 된다. 표본들이 가까우 면 가까울수록 표본화하려고 하는 함수에 대한 새로운 정보를 얻지 못하게 된다. 표본들 사이의 거리가 크면 클수록 표본렬의 질이 높아지게 된다. 그러므로 표본점들사이의 최소 거리도 표본렬의 질을 특징짓는 쓸모있는 계량으로 된다. 현재 불일치량이 작으면서도 최소거리가 큰 표본렬을 생성하기 위한 연구가 활기있 게 진행되고있으며 대표적인 표본렬로서는 쏘볼렬[1]을 들수 있다. 선행연구[1, 2]에서는 3차원영상생성에서 리용되는 쏘볼렬을 얻어내기 위한 방법과 표 본렬을 얻어내는데서 효과성을 높이기 위하여 특별히 잘 설계된 생성행렬을 만들고 그것 에 기초하여 표본렬을 얻어내기 위한 방법을 제안하였다. 쏘볼렬을 생성하는 알고리듬은 다음과 같다. ① 렌더링하려고 하는 화소에서 리용하려는 첨수번호를 구한다. ② 얻어내려고 하는 표본값의 차원을 선택한다. ③ 표본값을 얻어낸다. Float SobolSampleFloat(int64_t a, int dimension)   {     uint32_t v = 0;     for (int i = dimension * SobolMatrixSize; a!= 0; a >>= 1, i++)     if (a & 1) v ^= SobolMatrices32[i];     return v * 2.3283064365386963e-10f /* 1/2^32 */   } 선행연구[2]에서 제기한 방법으로 얻어낸 표본렬은 표본의 개수가 작을 때에 규칙적인 구 조가 나타나게 되는 결함을 가지고있다. 그림에서는 22 × pixel화상의 매 화소당 16 개의 쏘볼렬로 얻어낸 표본렬을 보여준다. 이러한 표본렬로는 대상을 원만히 표본화할 수 없으며 이것은 장면에서 바둑판무늬를 산생 시키는 요인으로 되고있다. 바둑판무늬는 화상 의 질을 떨구는 요인의 하나로 되고있다. 그림. 쏘볼렬로 얻어낸 표본렬 22 × pixel화상의 매 화소당 16개의 론문에서는 이 문제를 해결하기 위하여 얻 어낸 표본렬에 우연적인 치환을 적용함으로써 구 조적위험성을 극복하고 렌더링을 효과적으로 진행할수 있는 한가지 방법을 제기하기로 한다.  화상에서 바둑판무늬를 산생시키는 요인이 표본의 수가 적을 때 쏘볼렬이 규칙적인 배치에 있으므로 우리는 바둑판무늬를 제거하기 위하여 이 배치상태를 헝클어뜨리면서도 본래렬의 특성을 될수록 살리기 위한 방법을 제안하려고 한다. 그러기 위하여 행렬 개선된 표본렬을 리용하여 3차원영상생성에서 화질을 높이기 위한 한가지 방법 － 23 － 의 원소의 2진표시에 우연적으로 생성해낸 치환을 적용하여 리용하려고 한다. float SobolSampleFloat(int64_t a, int dimension)  {    uint32_t v = 0;    static RNG rng;int perm[2];    for (int i = dimension * SobolMatrixSize; a!= 0; a >>= 1, i++)     {      float randomnumber = rng.UniformFloat();      if (randomnumber >= threshold) {perm[0]=1; perm[0]=0;}       else {perm[0]=0; perm[1]=1;}      if (a & 1)       {        int b, c = Matrices32[i];        for( int j = 0 ; c! = 0 ; c>>=1, j++)        b += perm[ c-(c>>1)*2 ] << j;        v^=b;       }     }    return v * 2.3283064365386963e-10f; /* 1/2^32 */  } 이 렬은 쏘볼렬과 불일치량이 얼마 차이나지 않으면서 도 쏘볼렬의 규칙적인 배치를 헝클어뜨림으로써 바둑판무늬 를 제거하게 한다. 제안한 표본렬을 가지고 sportscar장면에 대한 렌더링을 진행한 결과와 쏘볼렬과 비교해본 결과는 표와 같다. 실험은 Core(TM) i5-4590 CPU @3.30GHz(4CPUs)에서 진행하였으며 화상의 크 기는 1 280 × 720pixel이고 매 화소당 16개의 표본을 선택하였다. 표．계산결과  제안한 표본렬 쏘볼렬 54.5 12.709 0 56.2 13.821 5 시간/s 오차 10번의 실험을 진행하여 시간과 오차의 평균값을 계산하였다. 표에서 보는바와 같이 시간은 거의 비슷하나 오차는 91.9%로 감소되였다. 참 고 문 헌 [1] I. Sobol; Zh. Vychisl. Mat. mat. Fiz., 7, 4, 784, 1967. [2] J. Kuo; SIAM J. Sci. Comput., 30, 2635, 2008. 주체108(2019)년 6월 10일 원고접수 A Method for Better Quality with Improved Sample Sequence in 3D Rendering Han Song, Ri Jong Ro We propose one better Sobol sequence for conquering checkerboard texture when the number of samples is small in Sobol sequence. Key words: checkerboard texture, Sobol sequence