김일성종합대학학보 (수 학) 주체107(2018)년 제64권 제1호 척도변화와 회전을 고려한 워터마크삽입을 위한 특징점추출방법 김영민, 박성일 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《첨단과학기술분야에서 세계적경쟁력을 가진 기술들을 개발하기 위한 투쟁을 힘있게 벌 려야 합니다.》(《조선로동당 제7차대회에서 한 중앙위원회사업총화보고》 단행본 39페지) 론문에서는 확대축소와 회전 등 기하학적공격에 견고한 표식화상워터마킹실현을 위한 한가지 특징점추출방법을 연구하였다. １．워터마킹기술과 관련한 선행연구 표식화상워터마킹기술은 주어진 화상안에 워터마크로서 하나의 작은 표식화상(정보를 담은 화상)을 삽입시키는 방법이다. 이것은 본문정보를 삽입시키는 방법보다 우월한 측면 을 가지고있다. 화상의 회전이나 확대축소, 이동 등 각이한 기하학적공격으로 하여 본문정보는 다른 정보로 바뀌울수 있다. 그러나 표식화상정보는 이러한 기하학적공격후에도 그대로 보존 되게 된다. 기하학적공격후 표식화상도 피복화상과 같이 회전, 확대축소, 이동 등 기하학적이지러 짐을 가지게 되는데 이것은 표식화상안에 담겨진 내용을 변화시킬수 없다. 각이한 기하학적공격에 견고한 워터마크삽입 및 검출방법을 결정하는것은 중요한 문 제로 나선다. 워터마킹기술은 불변령역에 기초한 방법, 형타에 기초한 방법, 모멘트에 기초한 방법, 특 징에 기초한 방법으로 구분할수 있는데 여기서 기하학적공격에 견고한 방법은 특징에 기 초한 방법이다. 선행연구[1]에서는 화상의 다중웨블레트령역에 하나의 2진표식화상을 삽입하고 표식화 상과 워터마크화상사이의 관계특성을 리용하여 해당 표식화상을 검출하였다. 선행연구[2]에서는 리산웨블레트변환과 리산코시누스변환을 리용하여 표식화상을 삽입 하는 한가지 방법을 제기하였다. 선행연구[3]에서는 자료융합원리를 리용하여 피복화상과 농도준위표식화상의 웨블레트 에 기초한 다중해상도부분화상들을 결합하였다. 선행연구[4]에서는 피복화상의 웨블레트령역에 하나의 2진표식화상을 삽입시키고 독립 성분분석을 적용하여 해당 표식화상을 검출하였다. 선행연구[5]에서는 회색준위표식화상의 비트평면을 원래 비데오의 웨블레트령역에 삽 입하는 방법으로 워터마킹을 실현하였다. 선행연구[6]에서는 SIFT를 리용하여 특징점들을 추출하고 비데오워터마킹을 실현하는 한 － 110 － 종합대학학보(수학)   주체107(2018)년  제64권  제1호 가지 방법을 제기하였다. 그러나 이러한 방법들은 여러가지 화상처리공격에는 견고한 특성을 가지지만 확대축 소와 회전과 같은 기하학적공격에는 견고하지 못한 결함을 가지고있다. 웨블레트변환에 기초한 워터마킹실현에서 확대축소와 회전에 견고한 특징을 추출하는 것은 워터마킹연구에서 중요한 문제로 된다. ２．SURF를 리용한 한가지 특징점추출방법 특징에 기초한 워터마킹기술은 크게 특징점추출, 워터마크삽입, 워터마크검출로 이루 어져있다. 론문에서는 확대축소, 회전에 견고한 특징점을 추출하는 한가지 방법을 제기한다. 특징점추출에서는 각이한 기하학적공격에 견고한 특징점을 추출하는것이 중요하다. 화상의 확대축소, 이동에 견고한 특징으로서 SURF(Speed up Robust Feature)를 들수 있 다. SURF는 고속으로 확대축소, 이동에 견고한 특징을 추출할수 있도록 한다. SURF추출에 의하여 확대축소, 이동에 견고한 특징벡토르와 척도인자(확대축소인자), 방향이 결정된다.  비록 SURF가 확대축소, 회전에 불변이라고 하지만 원리적으로 보면 확대축소와 회전 이 적용될 때 일련의 결함이 나타난다. 이것은 실험을 통해서도 쉽게 론증할수 있다. SURF에서는 제한된 개수의 옥타브(octave)를 리용하므로 화상을 확대하거나 축소하면 일 부 특징점들이 없어진다. 다시말하여 화상을 확대하면 척도가 큰 특징점들이 없어지며 축 소하면 척도가 작은 특징점들이 없어진다. 이로부터 특징점추출에 SURF를 사용하자면 확대축소한계값을 결정해야 한다. 확대축 소비률 R∈k 에 대하여 화상을 k 배확대 또는 SURF에 의하여 가능한 최소 및 최대척도를 각각 k/1 로 축소한다고 하자. min , σσ max 라고 하면 확대축소비률 을 고려한 새로운 한계는 다음과 같다. 여기서 ′ σ min = k σ min ≤ σ max ′= k / σ max 를 만족시켜야 하므로 k 의 값범위는 다음과 같다. ′ σ min = k σ min , ′ σ max = σ max / k ≤k σ σ max min 주어진 화상으로부터 SURF들을 추출하고 척도인자가 ′ σ min ′≤≤ σσ max 인 특징들만을 남 겨두고 나머지 특징점들은 버린다. 이러한 특징점들은 비률 k 에 의한 확대축소에 의해서도 여전히 검출될수 있는 점들 이다. 하나의 화상으로부터 많은 SURF특징점들이 얻어진다. 이로부터 워터마크를 삽입시키기 위한 중요한 몇개의 특징점들만 선택해야 한다. 척도인자가 너무 작은것은 의의가 없고 너무 크면 일반적으로 내부에 색변화가 거의 없 는 평탄한 령역이므로 워터마크삽입에 적합하지 않다.  이러한것을 고려하여 실험적으로 척도인자가 min L , L [ max 추출한다. 여기서 L min , L max 는 각각 최소, 최대척도인자값이다. 결국 척도인자의 선택범위는 다음의 부등식으로 표현할수 있다. ] 사이에 놓이는 특징점들만을 척도변화와 회전을 고려한 워터마크삽입을 위한 특징점추출방법 － 111 － max{ ′ σ min , L min min{ ′ σ max , L max } σ ≤≤ } 또한 헤씨안행렬을 리용하여 관심점들을 추출하기때문에 관심점추출의 성능은 헤씨안 하나의 화상 I 안에서 점 yx=x ,( ) 가 주어졌을 때 점 x , 척도 σ에서의 헤씨안행렬 행렬의 특징에 의존한다. 은 다음과 같다. H x ,( ) σ = L L ⎡ ⎢ ⎣ xx xy x ,( x ,( ) σ ) σ L L xy yy x ,( x ,( ) σ ) σ ⎤ ⎥ ⎦ 여기서 ,( σxxxL ) 는 점 x 위치에서의 화상 I 와 가우스2계미분 ( ∂ y () x ∂ ) σg ( ) 의 중첩이 2 2 며 나머지도 류사하게 정의되는 량들이다. SURF에서는 이러한 헤씨안행렬대신 고속계산을 위하여 고속헤쓰려파기를 리용한다.  고속헤쓰려파기는 적분화상을 리용하여 상수시간내에 계산할수 있다. 그러나 헤씨안행렬은 4/π 회전에 약한 견고성을 가지며 기타 각들에 대해서는 견고성 이로부터 론문에서는 다음과 같은 알고리듬을 적용하여 확대축소와 회전에 견고한 SURF 이 더욱 약해진다. 들을 추출한다. 알고리듬(확대축소, 회전에 견고한 SURF특징추출) ① ② 피복화상 nI 으로부터 SURF특징들을 추출하고 척도를 고려하여 특징모임 nF 을 구 로 설정한다. ,0α = n = ,0 = n I I ③ ④ 성한다. n 1+= n Nn < 을 만족시키는 동안 다음의 과정을 반복한다. ㉠ , 피복화상 I 을 α만큼 회전시킨다. ㉡ 회전된 화상 nI 에 대하여 추출된 특징모임 2/πα= n N 에 의하여 위치와 방향이 보존된 특징들로 이루어진 특징모임 nF 을 추출한다.  n 1−nF 안의 매 특징중에서 SURF추출 ㉢ 1+= n 1−nF 을 귀환한다. ⑤ 여기서 N 은 2/π 만 한 각도에서의 총회전수이다. 이 값이 클수록 회전각도는 세밀하다. 한편 추출된 령역안에 워터마크를 삽입시키면 화소값들이 변하며 이것으로부터 워터 마크검출에 영향을 주게 된다. 따라서 론문에서는 이러한 현상을 극복하기 위하여 SURF를 추출하기 전에 농도량자 화를 진행한다. 즉 보다 낮은 농도준위를 가진 화상으로 변환한 다음 변환된 화상우에서 SURF 특징점들을 추출하며 그 특징점을 중심으로 하는 원화상의 국부창문안에 워터마크를 삽입 시킨다. 같은 방법을 워터마크검출에도 적용한다. 이렇게 하여 특징점추출이 워터마크에 의한 화 상농도의 일정한 변화에 견고하도록 한다. 또한 령역들사이의 겹침을 방지하기 위하여 일정한 창문크기를 리용하여 비극대제거 알고리듬[7]을 적용한다. － 112 － 종합대학학보(수학)   주체107(2018)년  제64권  제1호 ３．실 험 피복화상은 1 296 × 의 크기를 가진 색화상 100개를 리용하였다. 회전개수 972 6=N 으 o15 간격으로 화상을 회전시키면서 실험을 진행하였다. 척도변화 로 설정하였다. 다시말하여 3=k 으로 설정하였다. 는 피복화상으로부터 추출한 특징점들은 초기에 500~1 000개이다. 가능한 회전 및 척도변 화를 진행하여 최종적으로 얻어지는 특징점의 개수는 3~10개정도이다. 결국 이러한 특징점들 에서는 회전 및 척도변화에 견고하므로 표식화상워터마킹을 위한 특징점으로 리용할수 있다. 참 고 문 헌 [1] Z. N. Wang et al.; Proc. of the 14th IEEE; Int. Conf. on Tools with Artificial Intelligence, 477, 2002. [2] E. First et al.; ICIP 111, 2007. [3] D. K. D. Hatzinakos; IEEE Trans. on Multimedia, 1, 6, 185, 2004. [4] T. D. Hien et al.; Proc. of SPIE on Security, 4, 162, 2004. [5] X. N. Sun et al.; IEEE Trans. on Consumer Electronics, 46, 3, 375. 2000. [6] P. S. Tien et al.; Vis. Commun. Image R, 1, 42, 161, 2017. [7] L. V. Gool et al.; In ICPR, 6, 2006. 주체106(2017)년 8월 10일 원고접수 A Method of Extracting Feature Points for Embedding Image Watermarks  Considering Scale Variation and Rotation Kim Yong Min, Pak Song Il In this paper we propose a method of extracting feature points robust under geometrical attacks such as scale variation and rotation using speed-up robust feature(SURF). The experimental results show that the feature points extracted by our method can be excellent one for watermarking. Key words: watermarking, geometrical attack, extracting feature points