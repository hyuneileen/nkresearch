김일성종합대학학보 수 학 주체107(2018)년 제64권 제4호 안정한 움직임벡토르추정에 의한 움직임보상순차화법 리철균, 전일광 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《우리는 과학기술을 발전시키는데서 남들이 걸은 길을 따라만 갈것이 아니라 단계를 뛰여 넘어 비약적인 발전을 이룩하여야 합니다.》 우리는 등기우성(Same-parity)마당사이 움직임추정과 반대기우성(Opposite-parity)마당사 이 움직임추정을 결합한 4－마당움직임추정으로 움직임벡토르추정의 성능과 안정성을 높 이고 보간방법을 개선하여 순차화의 질을 높이는 움직임보상순차화법을 연구하였다. 간차식동영상은 한번에 절반화면 즉 짝수번째 주사선 혹은 홀수번째 주사선들만 갱 신되는 동영상으로서 순차식화면현시장치에서 현시되거나 린접점들의 정보를 리용하는 화상처리과제들에서 리용되자면 순차식동영상으로 만드는 순차화과정이 필수적이다. 순차화방법은 1개 마당만을 리용하는가 아니면 둘이상의 마당을 리용하는가에 따라 마당내보간, 마당간보간으로 가를수 있다. 여기서 마당이란 어떤 순간에 갱신된 반화면 다시말하여 짝수번째 혹은 홀수번째 주사선들로만 이루어진 화면이다. 마당내보간은 한 마당만을 리용하므로 원천정보의 부족으로 인하여 해상도를 높이는 데는 한계가 있다.[6] 순차화의 질을 높이는데서 기본으로 되고있는것은 움직임적응방법과 움직임보상방법 이며 이 방법들을 정황에 따라 결합하면 그 질을 더 높이게 된다.[5] 움직임적응방법(Motion Adaptive)은 먼저 움직임이 있는가 없는가 하는것을 검출하고 움직임이 있는 부분에서는 마당내보간, 움직임이 없는 부분에서는 마당간보간을 리용하는 방법으로서 마당내보간만을 쓸 때보다는 화질이 높아지게 된다.[1, 4, 5] 움직임보상방법(Motion Compensation)은 먼저 움직임벡토르마당을 추정하고 이에 따라 린접마당들에서의 정보를 보간하는 방법으로서 움직임보상을 하지 않는 순차화방법들에 비하여 질이 훨씬 높아지게 된다.[1, 2, 4, 5] 이 방법에서는 움직임추정(Motion Estimation) 의 성능과 안정성이 얼마나 높은가 하는것이 관건적이다.[3] 움직임추정은 어떤 화상블로크의 움직임벡토르를 린접마당들을 리용하여 추정하고 그것의 믿음성을 평가하는것이다. 움직임추정이 되였다고 하여도 이를 어떻게 리용하는가 하는 보간방법 역시 순차화의 질을 높이는데서 중요한 문제로 나선다.[5] 론문에서는 보다 높은 성능과 안정성을 가진 움직임벡토르추정과 믿음성검증방법을 리용하여 움직임보상순차화의 질을 높이는 보간방법에 대하여 론의하였다. 먼저 움직임벡토르를 추정하자. 간차식동영상은 린접마당들이 서로 다른 주사선들인것으로 하여 움직임벡토르추정문 제를 복잡하게 만든다. 이로부터 선행연구들에서는 쌍방향움직임추정방법을 제기하였다.  이 방법은 움직임벡토르를 찾기 위하여 현재마당의 어떤 블로크에 대하여 이전마당 과 다음마당의 대응되는 후보블로크들사이 거리를 평가한다. － 20 － 종합대학학보 수학 주체107(2018)년 제64권 제4호 거리는 절대값차합(SAD, Sum of Absolute Differences)를 리용한다. SAD d )( = dxf − ( , x dy − ; y n )1 −− dxf + ( , x dy + ; y n + |)1 ∑ | ) Λ∈ y ,( x 이 방법은 간차식동영상에서 같은 주사선들을 가진 등기우성마당에 대하여 비교하므 로 움직임벡토르추정에서 마당의 초기보간방법의 영향을 받지 않는다. 그러나 이 방법의 부족점은 움직임궤도가 복잡한 경우에 대한 판정을 할수 없다는것이다.[5] 쌍방향움직임추정방법을 개선하기 위하여 선행연구[2]에서는 4－마당움직임추정방법 을 제기하였다. 4－마당움직임추정은 현재마당과 2−n 번째 마당에 대한 SAD, 1+n 번째 마당에 대한 SAD를 결합하여 움직임벡토르추정을 하게 된다. 1−n 번째 마당과 c = ( c x c , y SAD 1 )( c = 를 움직임벡토르후보라고 하면 ) ∑ ;( nxf nc ;2 ⋅− ( xf ,|) )2 − − | SAD SAD 과 SAD 를 1 2 ∑ ( xf )( c − = 2 | x Λ∈ x Λ∈ 과 같이 계산한다. 여기서 표기를 간단히 하기 위하여 x = x d , 움직임벡토르 SAD(min 1 는 d = arg c )( = + d d ) ( y SAD yx ,( ) ( c )) 2 c ; nc )1 −− ( xf + ; nc + |)1 로 표시한다.  와 같이 얻는다. 4－마당움직임벡토르추정은 쌍방향움직임벡토르추정에 비하여 성능과 안정성이 높지 만 주기적인 무늬를 가진 부분에서 움직임추정이 불안한 부족점을 가지고있다. 우리는 4－마당움직임벡토르추정의 이러한 부족점을 극복하기 위하여 등기우성마당 SAD와 반대기우성마당SAD를 결합한 움직임벡토르추정법을 제안하였다. SAD )( d = p ndxf − ( ; )1 −− ;( nxf ,|) SAD )( d = n ;( nxf ) − ndxf + ( ; + |)1 ∑ | | ∑ x Λ∈ 여기서 SAD 는 현재마당과 이전마당사이의 평가이며 p x Λ∈ SAD 은 현재마당과 다음마당사이 n 의 평가이다. 반대기우성마당들은 주사선이 서로 다른것으로 하여 먼저 마당내보간을 하여 흐레임 을 얻고 이것들사이 평가를 진행하게 된다. 여기서 마당내보간방식은 선평균방법으로 한 다. 사실 기타 경계기반마당내보간은 반대기우성마당사이평가를 불안하게 해준다. 반대기우성마당SAD는 일반적으로 등기우성마당SAD에 비하여 그 값이 크므로 다음 과 같이 결합하였다. SAD same )( d = SAD 1 )( d + SAD )( d = SAD )( d + p SAD 2 SAD n )( d )( d SAD )( d 16 ⋅ SAD same )( d + SAD )( d oppo oppo = (*) 우와 같은 결합은 4－마당움직임벡토르추정에 의한 움직임보상순차화에서 보편적인 주기적인 무늬에서의 오유는 막았으나 다른 형태의 오유를 가져왔다. 실례로 한 화소크기의 너비를 가진 대각선줄무늬형의 화면부분이 있다고 하자.  이때 옳은 움직임벡토르추정의 반대기우성마당SAD는 아주 크며 반대로 한 화소 세 로방향으로 치우친 움직임벡토르의 반대기우성마당SAD는 아주 작아지게 된다. 그러므로 식 (*)과 같은 움직임벡토르추정은 반드시 틀린 결과를 낳게 된다. 이 오유 의 원인은 등기우성마당SAD와 반대기우성마당SAD의 결합곁수에 있다. 안정한 움직임벡토르추정에 의한 움직임보상순차화법 － 21 － 블로크의 특성을 반영하는 특징량을 새롭게 얻어내고 이 특징량에 기초하여 등기우 성마당SAD와 반대기우성마당SAD의 결합곁수를 결정하도록 하여 높은 성능과 안정성을 가진 움직임벡토르마당추정방법을 제안하였다. ( g ) )) ⋅Λ= ⋅Λ−+ SAD SAD SAD SAD arg c )( c )( c )( 1( ), = d g c ( ( same oppo min c 여기서 Λ 는 현재블로크, (Λg 은 블로크의 특징량으로서 0부터 1사이의 수이다. ) 다음으로 움직임벡토르의 믿음성을 평가하자. 우의 과정을 통하여 얻어진 움직임벡토르 d 에 대하여 그것이 옳게 추정된것인가 아 닌가 하는것을 판정해야 한다. 선행연구에서 리용되는 보편적이며 단순한 방법은 SAD d 를 평가하는 기준값을 다음과 같이 설정하였다. )( SAD d 의 값을 평가하는것이다. )( MV _ THR |6 Λ= | MV _ THR = |24 Λ | MV _ THR ⋅= ([2 g ) ⋅Λ MV _ THR same 1( −+ g )) ( λ ⋅ MV _ THR ] oppo same oppo same 여기서 MV _ THR oppo | Λ 는 블로크 Λ 의 면적, | MV _ THR 은 등기우성마당사이 평가에 대한 기준값, 는 반대기우성마당사이 평가에 대한 기준값이다. 이 기준값과 비교하여 구해진 움직임벡토르 d 가 믿음직한것인가 아닌가를 구분한다. )( dR = ,1 ⎧ ⎨ ,0 ⎩ SAD SAD )( d d )( < ≥ MV MV _ _ THR THR 여기서 )(dR 가 1이면 믿음직한 움직임벡토르이고 0이면 틀린 움직임벡토르이다. 또한 공간적벡토르마당해석을 통하여 움직임벡토르의 믿음성을 검증하였다. 움직임벡토르추정 및 움직임보상순차화에 리용하는 블로크의 기본크기는 공간적벡토르마당해석을 위하여 다음과 같이 하였다. 먼저 16 × 크기의 블로크들에 대한 움직임벡토르추정에서 안정한 움직임벡토르가 88 × 블로크들에 대하여서는 우선 탐색범위를 제한 88 × 이다. 16 얻어지면 이 블로크에 포함되는 4개의 하고 믿음성기준값을 높이 설정하였다. 만일 16 × 크기의 추정에서 믿음성검증이 실패하는 경우에는 이 블로크에 포함되는 16 4개의 88 × 블로크들에 대하여 전 탐색범위에 대한 탐색을 하고 SAD 가 2 3 44 × 크기의 부분블로크들에 대한 보다 MV _ THR 크고 MV _ THR 보다 작은 블로크들에 대하여서는 다시 움직임벡토르추정 및 검증을 하여 이 결과를 종합하고 최종믿음성을 평가하였다. 이 추정방법은 전반적인 계산비용을 크게 하지 않으면서 안정하고도 보다 성능이 높 은 움직임벡토르마당을 얻어내게 한다. 다음 보간방법에 대하여 론의하자. 움직임벡토르의 추정이 옳게 평가되였다고 하여도 보간에 어떤 화소들을 리용하는가 하는것은 순차화의 질을 높이는데서 중요한 요구로 나선다.[5] 우에서 얻어진 움직임벡토르 d 에 대하여 믿음성 )(dR 가 0인 경우에 이 블로크는 마 당내보간결과를 리용한다. 여기서 마당내보간결과는 움직임벡토르추정에 리용한 선평균마 － 22 － 종합대학학보 수학 주체107(2018)년 제64권 제4호 당내보간의 결과가 아니라 안정한 블로크기반경계방향추정에 의한 방향성선평균마당내보 간의 결과를 리용한다. 우리는 추정된 믿음직한 움직임벡토르 md ( ) = ( mdmd ), ( ( )) −=m ,2 − 1,1 에 대하여 x y 보간에 리용할 화소를 평가하는 기준을 새로 제안하여 움직임보상순차화의 질을 더욱 높 이였다. 여기서 m 은 참조마당을 표시한다. 실례로 2−=m 는 전전마당 즉 등기우성마당을 의미하며 1=m 은 다음마당 즉 반대기 우성마당을 나타낸다. ) m 과 (md y 의 기우성이 반대인 경우에는 후보블로크의 화소를 보간에 리용한 후 유 효주사선과 무효주사선의 보간된 화소들에 대하여 다음번 보간에 리용할수 있다는 1표식 을 해준다. 기우성이 같은 경우에는 후보블로크의 대응되는 화소들의 표식이 1인 경우 보 간에 리용한 후 0표식을 한다. 후보블로크의 유효하지 않은 주사선들의 화소들은 보간에 리용하지 않으며 이에 대 응되는 현재블로크의 화소들에 대하여 마당내보간을 하고 0표식을 해준다. 표식에 리용되는 기억구역의 크기는 크지 않다. 이 방법은 우선 유효주사선들로 보간을 하며 또한 오유를 막으므로 성능과 안정성측 면에서 좋은 결과를 낳게 한다. [1] E. B. Haan et al.; Proc. IEEE, 86, 9, 1839, 1998. 참 고 문 헌 [2] Y. L. Chang et al.; IEEE Trans. Circuits Syst. Video Technol., 15, 12, 1569, 2005. [3] Y. C. Fan et al.; IEEE Trans. Circuits Syst. Video Technol., 19, 7, 932, 2009. [4] M. Mohammadi et al.; IET Image Process., 5, 7, 611, 2011. [5] M. Mohammadi et al.; IET Image Process., 6, 8, 1041, 2012. [6] J. Qiang et al.; Video Engineering, 36, 15, 32, 2012. 주체107(2018)년 6월 5일 원고접수 Motion Compensation Deinterlacing Method Using  the Robust Motion Vector Estimation Ri Chol Gyun, Jon Il Gwang This paper presents advanced motion compensation deinterlacing method which estimates motion information by the same-parity SADs combining with the opposite-parity SADs. This method not only increases the performance and robustness for the motion estimation but also proposes the interpolation which means how to use blocks for neighboring fields. Key words: motion estimation, motion compensation