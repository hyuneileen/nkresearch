김일성종합대학학보 수 학 주체107(2018)년 제64권 제2호 불균일한 농도분산을 가진 쌍방려파기실현의 한가지 방법 김영민, 정금일 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《우리는 과학기술강국건설에 박차를 가하여 짧은 기간에 나라의 과학기술발전에서 새로운 비약을 이룩하며 과학으로 흥하는 시대를 열고 사회주의건설에서 혁명적전환을 가져와야 합니다.》(《조선로동당 제7차대회에서 한 중앙위원회사업총화보고》 단행본 38페지) 우리는 화상잡음제거 등에 효과적으로 쓰이는 불균일한 농도분산을 가지는 쌍방려파 기를 실현하는 한가지 방법을 연구하였다. １．쌍방려파기에 대한 선행연구 쌍방려파기술은 선행연구[1]에서 처음으로 제기되였으며 이것은 경계보존능력이 강한 특 성을 가지고있는것으로 하여 콤퓨터시각화와 도형처리분야에서 많이 리용되고있다. 쌍방려파기의 결함은 계산시간이 긴것으로 하여 실시간응용에 리용할수 없는것이다. 선행연구[2]에서는 상수시간쌍방려파기를 제기하였으나 세가지 공간려파기와 농도려파 기쌍에 대하여서만 실현하였다. 선행연구[3]에서는 작은 분산을 가진 가우스려파기를 리용하는 경우 우의 방법이 성능 이 높지 못한 결함을 극복하고 임의의 공간려파기와 농도려파기쌍에 대하여 실시간 쌍방 려파를 진행할수 있는 한가지 방법을 제기하였다. 그러나 이 방법은 균일한 농도분산을 가 지는 경우에 론의하였으며 실행속도가 농도분산의 크기에 의존하는 결함을 가지고있다. 일 반적으로 농도분산이 작아지면 실행속도가 떠진다. 선행연구[4]에서는 이러한 결함을 극복하고 농도분산의 크기에 의존하지 않고 보다 속 도가 개선된 학습에 기초한 쌍방려파기를 실현하였다. 사람의 얼굴에서 눈과 입과 같이 섬 세한 부분을 그대로 보존하면서 잔주름과 같은 불필요한 잡음을 제거할수 있는 불균일한 농 도분산을 가진 쌍방려파기를 실현하였다. 그러나 이 방법은 농도분산의 개수만 한 회귀함 수를 학습하여야 하며 려파의 질이 학습의 성능에 의존하는 결함을 가지고있다. 보다 자연스러운 려파된 화상을 얻자면 쌍방려파기에서의 농도분산을 주어진 화상에 적 응시켜 서로 다르게 설정할수 있어야 한다. ２．불균일한 농도분산을 가진 쌍방려파알고리듬 론문에서는 선행연구[3]에서 제기한 방법을 확장하여 농도분산의 크기에 의존하지 않 는 불균일한 농도분산을 가진 쌍방려파기를 실현하는 한가지 방법을 제기하려고 한다. 불균일한 농도분산을 가지면 균일한 농도분산으로 려파를 진행하는것보다 더 자연스 러운 화상을 얻을수 있다. 어두운 화상안에서 사람이 주목하는것은 어두운 배경안에 나 － 84 － 종합대학학보 수학 주체107(2018)년 제64권 제2호 타난 경계이다. 어두운 배경과 밝은 배경을 서로 다르게 처리함으로써 보다 좋은 시각적효 과를 얻을수 있다. 쌍방려파는 다음의 식을 리용하여 진행한다. B I x )( = ∑ f )( xNy ∈ S ∑ f )( xNy ∈ S yx ,( ) ⋅ f xI (( ), yI ( )) ⋅ yI )( R yx ,( ) ⋅ f xI (( ), yI ( )) R (1) 여기서 I 는 주어진 화상이고 , 는 각각 공간려파기, 농도려파기이다. BI 는 쌍방려파 f f S R 실천에서는 화상 )(xI 에 대하여 화소농도값이 기서 N 은 농도값의 전체 개수이다. xI =)( p xI ,1,0{)( ∈ 로서 리산인데 여 N 라고 놓으면 식 (1)은 다음과 같이 표현할 (cid:34) }1 − , 된 출력화상이다. 수 있다. B I x )( = ∑ f xNy )( ∈ S ∑ f )( xNy ∈ S yx ,( ) ⋅ f yIp ,( ( )) ⋅ yI )( R yx ,( ) ⋅ f yIp ,( ( )) R (2) 선행연구[3]에서 리용한 쌍방려파방법은 다음과 같다. 매 화소 y 와 매 농도값 p ∈ ,1,0{ (cid:34) }1 N − , 에 대하여 다음과 같이 정의한다. yW )( p = f R yIp ,( ( )) (3) J p yWy )( )( = ⋅ yI )( (4) p 이때 쌍방려파는 를 만족시키도록 다음과 같은 N 개의 선형려파기응답으로 분해될수 있다. B I x )( = J B )( xI x )( J B p x )( = ∑ f )( xNy ∈ f )( xNy ∈ ∑ yx ,( ) ⋅ J y )( p S yWyx ,( ) )( ⋅ p S (5) 여기서 B pJ 를 쌍방려파된 화상주성분(Principle Bilateral Filtered Image Component, PBFIC) 이라고 부른다. 실천에서는 N 개의 PBFIC중에서 오직 Nˆ 개만이 리용되고 x 의 농도는 kL + 로부 xI )( 이라고 가정할 때 쌍방려파값 I B 는 다음과 같이 )(1 x 와 J B )(x )(x L k L , k ∈ 1+ ) ( J B Lk 터 선형으로 보간된다. B I x )( = ( L k + 1 − JxI )) ( x )( + xI )(( − B L k JL ) k B L k 1 + x )( (6) 이것은 임의의 공간려파기와 농도려파기를 가진 쌍방려파기를 2개의 공간려파기로 분 해하는 과정으로서 려파기의 크기에 의존하지 않는 우점을 가지고있다. 론문에서는 이에 기초하여 상자공간려파기와 가우스농도려파기를 가진 쌍방려파기에 대 하여 불균일한 농도분산을 가지는 경우의 효률적인 처리방법에 대하여 보기로 한다. 상자려파기는 가장 단순한 려파기중의 하나로서 주어진 점의 근방에 있는 화소의 농 불균일한 농도분산을 가진 쌍방려파기실현의 한가지 방법 － 85 － 도값들의 평균으로 표시할수 있다. 가우스려파기는 다음과 같다. f r ( I , 1 I 2 ) = ⎛ ⎜ exp ⎜ ⎝ ( I 1 − − I 2 σ r 2 ) 2 ⎞ ⎟ ⎟ ⎠ 여기서 I 1, I 2 는 2개의 농도값이며 rσ 는 농도분산을 의미한다. 우선 불균일한 농도분산을 리용하기 위하여 M 개의 서로 다른 농도분산값 θ (cid:34) ,{ 1 , Mθ } 을 설정한다. 다음 매 θ , mm = ,1 M 에 대하여 농도려파값행렬 R m = ( r i m , j ) N i , j 1 = 을 구성한다. 이 행렬들은 미리 계산하여 표로 보관한다. 다음 선행연구[4]에서와 같이 주어진 화상 I 로부터 가우스려파된 화상 )(IG 를 얻고 표 준화한 다음 이것을 농도분산넘기기로 리용한다. 즉 주어진 화상안에서의 x 위치에 있는 화 소에 M 개의 농도값으로 리산화된 의 값에 따라 계산된 농도분산값을 대응시킨다. (( xIG )) 주어진 화상의 매 화소에 대하여 아래한계농도값번호와 농도분산값, 화상안에서의 위 ,( θk 의 증가순으로 된 목록구조로 보관한다. 여기서 아래한계농도값번호 k θ 를 ,( x ) ) , 치 란 x 위치에서의 농도값이 )( xI ∈ ( , L k L k , θ M ) 일 때의 k 를 의미한다. 1+ 에 대하여 다음의 처리를 반복한다. },1ˆ N − , k } ∈ (cid:34) (cid:34) ,0{ ,{ ∈ θθ 1 매 주어진 화상과 mR 으로부터 식 (3)과 (4)를 리용하여 행렬 W 와 J 를 얻는다. 이 행렬 들은 주어진 화상과 같은 크기를 가진다. 다음 식 (5)를 리용하여 행렬 BJ 를 얻는다. 이것 도 주어진 화상과 같은 크기를 가진다. 상자공간려파는 적분화상을 리용하여 상수시간안에 공간려파기의 크기에 무관계하게 진행할수 있다. 보관된 목록구조를 가진 자료로부터 화소 의 위치 x 를 얻어 출력화상의 해당 화소위치에 려파된 값을 넣는다. 이러한 처리는 미리 계산된 표의 자료로부터 비교없이 복사하는 방법으로 진행되므로 빠른 속도를 보장할수 있다. 구체적인 알고리듬은 다음과 같다. ① 입력화상 I 로부터 가우스려파된 화상 G 를 얻는다. ② 목록을 작성한다. 화상전체를 주사하면서 화소의 매 위치 x 에 대하여 G 로부터 농 도분산값 θ를 얻고 목록에 k θ 를 추가한다. ,( x ) , ③ 목록을 주사하면서 식 (3)－(6)을 리용하여 쌍방려파된 농도값을 얻어 출력화상의 해 당 위치에 추가한다. 할수 있다. ④ 리용된 기억들을 해제하고 쌍방려파된 화상을 출력한다. 걸음 ③은 미리 계산된 표를 리용하여 값복사의 방법으로 처리하므로 고속으로 진행 선행연구[3]에서는 매 농도값 k 에 대하여 계산을 진행한 다음 화상안의 화소들과 비 교를 진행하여 값을 대입하므로 화상행렬을 Nˆ 번 검사해야 하는 결함을 가지고있다. 또한 리산화된 농도값 k 에 따라 계산을 진행하고 화상안에서 그러한 농도값을 가진 화소들을 탐 색하는것으로 하여 리용되지 않은 농도값에 대해서도 불필요한 계산을 진행해야 하는 결 함을 가지고있다. 그러나 론문에서 제기한 방법은 실지 리용된 농도값에 따라 목록구조를 가 지고있으므로 이러한 결함들을 극복할수 있다. － 86 － 종합대학학보 수학 주체107(2018)년 제64권 제2호 참 고 문 헌 [1] C. Tomasi et al.; ICCV, 839, 1998. [2] F. Porikli et al.; CVPR, 1, 2008. [3] Qingxiong Yang et al.; CVPR, 1, 2009. [4] Qingxiong Yang et al.; CVPR, 1, 2010. A Method of Implementing Bilateral Filter with Non-uniform Range Variation 주체106(2017)년 12월 5일 원고접수 Kim Yong Min, Jong Kum Il We suggested a method of implementing bilateral filter with non-uniform range variation. By precomputing range filtered values with non-uniform range variation, keeping them in a table and processing according to the gray values of the input image and the corresponding range variations, we can increase the filtering speed. Key words: bilateral filter, non-uniform range variation, range filter