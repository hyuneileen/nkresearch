김일성종합대학학보 물리학 주체110(2021)년 제67권  제1호 STM32F103RE로 구성한 다통로진폭분석기의  미분비선형성개선 김정심, 한정혁 위대한 수령 동지께서는 다음과 같이 교시하시였다. 《원자력에 대한 연구사업도 잘하여야 하겠습니다.》(《전집》 제60권 351페지) 한소편처리소자 STM32F103RE로 구성한 다통로진폭분석기에서는 신호변환을 소자에 내장된 상사－수자변환기로 진행한다. 그러므로 다통로진폭분석기의 미분비선형성은 기 본적으로 STM32F103RE에 내장된 상사－수자변환기의 미분비선형성이다. STM32F103RE에 내장된 상사－수자변환기는 2LSB정도의 큰 미분비선형성을 가지기 때문에 핵스펙트르측정용상사－수자변환기로 리용하기 위해서는 눈금이동법을 적용하여 야 한다.[1] 론문에서는 눈금이동법을 적용하여 STM32F103RE를 리용한 다통로진폭분석기의 미 분비선형성을 개선하기 위한 실험적인 연구를 진행하였다. １．눈금이동용수자－상사변환기를 보정한 경우의 미분비선형성개선 눈금이동법의 기본원리는 N통로 상사－수자변환기의 매 통로를 그 통로와 이웃한 M 개 의 통로들의 통로너비를 평균한 새로운 통로너비를 가지는 통로로 대응시키는것이다.[1] 눈금이동법을 적용하기 위하여 장치적으로 외부에서 수자－상사변환기로 보충적인 상사신호를 발생시켜 입구신호에 더해주고 합쳐진 상사신호를 상사－수자변환기로 변환 한 다음 변환결과로부터 수자－상사변 환기에 적용한 수자부호를 덜어내여 최 종적인 변환결과를 얻는다. 이때 수자－ 상사변환기의 변환비트수가 상사－수자 변환기의 변환비트수와 동일하고 수자－ 상사변환기의 매 통로에서의 미분비선 형성이 극히 작아야 0～M의 눈금이동 즉 린접한 통로들에 대한 통로너비의 평균화가 정확히 진행된다. 미분비선형 성이 큰 수자－상사변환기는 보정하고  눈금이동용수자－상사변환기로 리용할 수 있다.[2] 수자－상사변환기를 보정한 경우 눈금이동회로도는 그림 1과 같다. 그림 그림 1. 수자－상사변환기를 보정한 경우  눈금이동회로도 － 104 － 종합대학학보 물리학 주체110(2021)년 제67권 제1호  1에서 수자－상사변환기의 매 비트들에 해당한 오차들을 보상하기 위한 정전류원의 투입 및 차단은 CD4066을 리용하여 실현하였다. 미분비선형성검사를 위하여 함수발생기 FG-273을 리용하여 주기가 1s인 삼각파를 발 생시켜 STM32F103RE의 상사－수자변환기에 입구시키고 상사－수자변환주파수를 1MHz 로 설정하였다. 그림 2에 수자－상사변환기를 보정한 경우 미분비선형성측정곡선을, 표 1 에 미분비선형성측정결과를 주었다. 통로당 기록수가 100개인 경우 눈금이동회수가 32일 때 평균화효과가 최대로 되며 따라서 미분비선형성이 최소, 눈금이동회수가 64이상으로 커지면 오히려 통로너비오차가 증가하여 평균화효과가 떨어지며 미분비선형성이 커진다. 이것은 통로당 기록수가 작으면 아무리 눈금이동회수를 늘여도 실지로 눈금이동수만큼 평균화가 진행될수 없기때문이다. 그림 2. 수자－상사변환기를 보정한 경우 미분비선형성측정곡선 통로당 기록수가 1 000일 때에는 눈금이동회수가 많을수록 통로너비의 평균화효과가 대단히 뚜렷하게 나타나며 눈금이동회수가 256일 때 미분비선형성은 1.5%정도이다. STM32F103RE로 구성한 다통로진폭분석기의 미분비선형성개선 － 105 － 따라서 통로당 기록수가 1 000이상인 경우에는 STM32F103RE에 내장된 상사－수자변환기에 눈 금이동법을 적용하여 핵스펙트르측정용상사－ 수자변환기로 리용할수 있다는것을 알수 있다. 표 １．수자－상사변환기를 보정한 경우  미분비선형성측정결과 눈금이 동회수 미분비선형성 (100/통로)/% 미분비선형성 (1 000/통로)/% ２．눈금이동용수자－상사변환기를 보정하지 않은 경우의 미분비선형성개선 통로너비평균화체계의 구성을 보다 간단 16 32 64 128 256 15 10 14 23 31 9.4 6.5 3.2 2.1 1.5 히 하기 위하여 STM32F103RE내부의 수자－상사변환기에 대하여 미분비선형성을 보정하 지 않고 그대로 눈금이동을 위한 보충적인 상사전압발생에 리용하여 내부상사－수자변환 기의 미분비선형성을 개선할수 있는 가 능성과 그 실현에서 제기되는 문제점들 을 밝히기 위한 실험을 진행하였다. 그림 3. 수자－상사변환기를 보정하지 않은  경우 눈금이동회로도 그림 3에 수자－상사변환기를 보정 하지 않은 경우 눈금이동회로도를, 그 림 4에 수자－상사변환기를 보정하지 않은 경우 미분비선형성측정곡선을 보 여주었다. 그림 4. 수자－상사변환기를 보정하지 않은 경우 미분비선형성측정곡선 또한 표 2에 수자－상사변환기를 보정하지 않은 경우 미분비선형성측정결과를 보여 주었다. － 106 － 종합대학학보 물리학 주체110(2021)년 제67권 제1호 표 ２．수자－상사변환기를 보정하지 않은 경우 미분비선형성측정결과 눈금이동회수 미분비선형성 (100/통로)/% 미분비선형성 (1 000/통로)/% 16 32 64 128 256 16 12 17 27 33 11.5 7.2 5.4 3.2 2.3 실험곡선들과 측정결과를 통하여 알수 있는바와 같이 눈금이동을 위한 보충적인 상 사전압발생용수자－상사변환기의 미분비선형성이 비교적 크게 존재하는 경우에도 통로너 비평균화의 효과는 뚜렷이 나타난다. 수자－상사변환기를 보정한 경우와 비교해보면 통 로당 기록수가 작은 경우에 눈금이동회수를 늘일 때 통로너비평균화효과가 떨어진다. 표 2에서 보는바와 같이 통로당 기록수가 1 000이고 눈금이동회수가 256인 경우 미분비선형 성은 2.3%인데 상사전처리단에서의 비선형성이 첨부된다고 볼 때 이것은 핵스펙트르 측정용상사－수자변환기로 리용하는데서 미분비선형성이 큰것으로 된다. 섬광γ 검출기 혹은 반도체α검출기와 같이 분해능이 비교적 낮은 검출기를 사용하는 경우 상사－수자변환기의 변환비트수를 10bit로 낮추어 1 024통로로 하면 미분비선형성을 1%이하로 보장할수 있다. 또한 스펙트르를 측정할 때 미분비선형성을 보장하기 위하여 눈금이동수를 256으로 하면 기록수가 작은 통로들에서는 비선형성이 크게 나타날수 있으므로 측정시간을 늘여 야 작은 봉우리들을 정확히 측정할수 있다. 맺 는 말 1) 수자－상사변환기를 보정한 경우 통로당 기록수가 1 000이상일 때 눈금이동회수 를 256으로 하면 상사－수자변환기의 미분비선형성을 1.5%로 보장할수 있다. 2) 수자－상사변환기를 보정하지 않은 경우에도 눈금이동의 효과는 뚜렷하게 나타나 며 상사－수자변환기의 변환비트수를 10bit로 낮추어 1 024통로로 하고 측정시간을 늘이 면 미분비선형성을 1%아래로 보장할수 있다. 참 고 문 헌 [1] V. V. Sushkov et al.; Nucl. Instru. and Meth. in Physics Research, A 450, 119, 2000. [2] P. P. Vaidya et al.; Nucl. Instru. and Meth. in Physics Research, A 265, 598, 1988. 주체109(2020)년 9월 5일 원고접수 STM32F103RE로 구성한 다통로진폭분석기의 미분비선형성개선 － 107 － On the Improvement of Differential Non-Linearity in MCA Configured with STM32F103RE Kim Jong Sim, Han Jong Hyok We considered the differential non-linearity in the cases of compensating and uncompensating the ADC embeded in STM32F103RE. In the case of compensating the ADC, if the counts per channel are greater than 1, 000 and the sliding scale number is 256, the differential non-linearity of ADC is 1.5%.  Keywords: analyzer, differential non-linearity, sliding scale