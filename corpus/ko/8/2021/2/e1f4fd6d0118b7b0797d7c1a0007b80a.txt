김일성종합대학학보 물리학  주체110(2021)년 제67권  제2호 한소편처리기를 리용한 고압안정전원의 수자표시 김강철, 정광식 경애하는 《우리는 가까운 앞날에 전반적인 과학기술분야에서 세계를 디디고 올라설수 있다는 다음과 같이 말씀하시였다. 배심을 가지고 첨단돌파의 기적들을 련이어 창조하여야 합니다.》 스펙트르측정용고압안정전원은 실험에서 많이 리용되는 전원으로서 성능이 높고 조 종이 편리하며 표시정확도가 높아야 한다. 지금까지 연구된 고압안정전원들에서는 전 류계나 상사수자변환기(ICL7106이나 ICL7107)로 고압을 해당한 수자로 변환하여 LCD 혹 은 7쪼각표시소자를 리용하여 표시하고있다.[1－3] 계기식을 리용한 고압표시에서는 표시 오차가 ±10V로 되며 AD변환기의 주변회로가 복잡하고 독립적인 전원이 따로 있는것으 로 하여 고압표시부를 간단하면서도 정확도가 높게 구성할수 없다. 론문에서는 한소편처리기와 LCD를 리용하여 간단하면서도 정확도가 높은 한가지 고 압표시부를 설계하고 실현하였다. １. 고압표시부의 설계 핵물리측정실험에서 스펙트르측정을 위하여 쓰이는 고압안정전원은 매우 안정해야 하며 그러자면 출구전압의 표시를 정확히 하는것이 중요하다. LCD를 리용하면 정확한 눈 금값을 읽을수 있으며 전압의 안정성을 직관적으로 알수 있다. 한소편처리기를 리용하여 고압을 표시하기 위한 구성도는 그림 1과 같다. 고압안정전원은 TL494를 리용한 절환안정 전원으로서 ±2 500V까지의 전압을 출구하며 오차검출기와 반복기는 연산증폭기 LM324를 리용하였다. 한소편조종단은 PIC16F877A와 20MHz수정발진기로 구성하였으며 표시부는 LM016(LCD1602)을 리용하였다. PIC16F877A는 5V이하의 신호전압을 AD변환하므로 고압출구에서 나온 전압을 감쇠기(오차검출기)를 거쳐 AD변환할수 있 는 전압까지 낮춘다. 이때 낮추어진 전압은 반복기를 거쳐 TL494의 비교기와 한소편처 리기의 AD변환기로 입구된다. 한소편처리 기는 들어온 신호를 실제전압으로 계산하여 그림 1. 고압을 표시하기 위한 구성도 LCD에 표시한다. 표시전압은 10bit AD변환되여 다음식으로 계산된다. 여기서 한소편처리기를 리용한 고압안정전원의 수자표시  는 표시부에 나타나는 고압이고 은 오차검출기를 거쳐 한소편처리기의 － 73 － AD변환입구에 들어가는 상사입구전압이다. 은 오차검출기에서 감쇠된 감쇠비 의 거꿀수이다. , LCD1602는 2행 16문자를 표시하는 소자로서 +5V를 전원전압으로 리용하며 한소편 처리기가 변환한 전압을 현시한다. 고압표시회로의 원리도는 그림 2와 같다. 그림 2. 고압표시회로의 원리도 그림 2에서 +HV, －HV는 고압전원의 출구 즉 정의 고압과 부의 고압이며 오차검출 기와 반복기를 거쳐 한소편처리기의 AD변환입구에 들어간다. 또한 한소편처리기의 B포 구의 RB4, RB5, RB6단자는 LCD1602의 RS, R/W, E단자와 련결되였으며 D포구는 LCD1602 의 RD0～RD7단자와 결합되였다. ２. 프로그람설계 고압표시를 위한 프로그람을 MikroC개발환경에서 작성 하였다. 고압표시를 정확히 하도록 하기 위한 AD변환 및 중 단알고리듬은 그림 3과 같다. 한소편처리기에서는 ADCON1등록기를 리용하였다.(표 1) 프로그람에서는 한소편처리기의 초기화를 진행하고 AD 변환 및 중단을 리용하여 AD변환주기를 최소로 함으로써 고 압변동을 정확히 표시할수 있도록 하였다. 프로그람의 초기화함수부분에서는 우선 회로구성으로부터 포구 A의 0번핀을 상사입력핀으로 설계하였으므로 TRISA등 록기에 대한 설정을 통하여 포구 A를 입구로 설정하였다. 또한 ADCON1등록기의 ADFM비트를 1로, PCFG3～PCFG0 으로 하여 포구 A를 상사입력포구로 리용할수 있게 하고 결 과를 ADRESL등록기와 ADRESH의 아래자리 2비트에 보관하 도록 하였다. 그림 3. AD변환 및 중단알고리듬 － 74 － 물리학 주체110(2021)년 제67권 제2호 ADFM － － PCFG1 PCFG0 표 １. ADCON1등록기의 구성 － PCFG3 PCFG2 또한 LCD표시와 조종을 위한 자료 및 조종비트들을 설정하기 위하여 TRISB등록기 와 TRISD등록기를 출구로 설정하였다. Void Init() { Lcd_Init();       TRISA = 0xFF;       ADCON0 = 0x90; // Fosc/32, channel 0, Go 0,       ADCON1 = 0x80; // AD res shift Right, ad channel setting       TRISB = 0;       TRISD = 0; } AD변환을 MikroC에 있는 기정의 AD변환함수를 리용하면 소편내부의 RC박자발진기 를 리용하므로 AD변환속도가 떨어지게 된다. 이로부터 AD변환등록기들을 직접 설정하 여 AD변환시간을 최소로 되도록 하였다. ADCON0등록기의 구성은 표 2와 같다. AD변환을 위하여 우선 ADCON0등록기의 ADCS1, ADCS0비트에 1, 0을 써넣어 20MHz에서 AD변환박자주파수가 ( )로 되도록 하였다. ADCS1 ADCS0 CHS2 CHS1 CHS0 GO/DONE － ADON 표 ２. ADCON0등록기의 구성 고압표시의 AD변환표본간격을 최소로 하기 위하여 AD변환중단을 리용하였다.  AD변환중단처리부분에서는 AD변환값을 읽어들이는 즉시 결과를 보관하고 다시 다 음번 AD변환을 시작하도록 하였다. 여기서는 AD변환기발이 설정되면 AD변환결과를 보 관하고 즉시 다음번 AD변환을 시작하도록 하였다. AD변환최소간격은 이다. if(ADIF_bit)   {       AD_res[AD_cnt] = ((ADRESH<<8)+(ADRESL));       ADIF_bit = 0;       AD_cnt++; … 였다. } 다음 프로그람의 주순환부분에서는 AD변환결과를 LCD에 련속적으로 표시하도록 하 프로그람을 이와 같이 구성하여 AD변환간격을 최소한 줄이면서도 AD표본화속도를 최대로 높여 고압변동을 정확히 표시할수 있게 하였다. 표시부에는 프로그람적으로 첫번째 행에 고압이, 두번째 행에 맥동값이 현시되도록 하였는데 이 값들은 10개의 표본을 평균하여 출구하도록 한것이다. 무부하상태에서 고압 을 설정하였을 때 표시부에 나타나는 고압과 맥동값은 표 3과 같다. 한소편처리기를 리용한 고압안정전원의 수자표시 － 75 － 표 ３. 고압을 설정하였을 때 표시부에 나타나는 고압과 맥동값 기준전압/V 설정된 고압/V 표시된 고압/V 맥동값/mV 1 500 499.1 60 2 1 000 999.7 43 3 1 500 1 500.2 41 4 2 000 2 000.5 44 5 2 500 2 500.8 45 무부하상태에서 고압을 0부터 2 500V까지 변화시키면서 측정하였을 때 고압의 표시 정확도는 ±1V이며 500V이하에서 60mV, 1 000V이상에서 45mV였다. 한소편처리기를 리용하여 고압안정전원의 전압을 표시하는 회로를 구성하고 AD변환 속도를 최대로 빠르게 하면서 전압값과 맥동값을 표시하는 한가지 방법을 연구하였다. 고압의 표시정확도는 ±1V이다. 맺 는 말 참 고 문 헌 [1] 강호 등; 원자력, 2, 8, 주체86(1997). [2] 주경식 등; 원자력, 1, 31, 주체95(2006). [3] 陈峰; X射线管直流高压电源的研制及其远程控制的实现, 原子能出版社, 48～53, 2007. 주체109(2020)년 12월 5일 원고접수 The Digital Display of Stabilized High Voltage  Power Supply Using Microprocessor Kim Kang Chol, Jong Kwang Sik We configured the circuit for presenting voltage of high voltage power supply using microprocessor PIC16F877A and liquid crystal display LCD1602. We also researched display method of high voltage and ripple while making AD conversion rate fastest. Then the display accuracy is below ±1V. Keywords: display of high voltage, microprocessor