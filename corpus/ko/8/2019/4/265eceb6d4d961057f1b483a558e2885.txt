김일성종합대학학보 물리학 주체108(2019)년 제65권  제4호 무늬투영광학계에서 고차다항식근사에 의한 시차와 회전교정의 한가지 방법 백강룡, 김철수 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《첨단과학기술분야에서 세계적경쟁력을 가진 기술들을 개발하기 위한 투쟁을 힘있게 벌려야 합니다.》 각종 정밀기계가공품들과 광학요소들의 3차원형태측정에서 가장 많이 리용되는것은 무 늬투영법이다. 무늬투영광학계에서 투영광학계와 수감광학계의 광축은 물체면과 임의의 각 을 이룬다. 따라서 영상에는 시차와 회전이 반드시 포함되며 이것들을 교정하지 않으면 정 확한 측정을 할수 없다.[1] 영상의 시차와 회전변환에서 널리 리용하고있는 방법은 행렬변 환법이다.[2－4] 론문에서는 화상상관법과 고차다항식근사를 리용하여 시차와 회전을 교정하여 바로 선 화상을 얻는 한가지 방법을 제기하였다. １. 화상상관법에 의한 교정점확정 화상회전은 물체면과 CCD수감면이 평행으로 마주한 경우 두 면에 놓인 자리표축들 이 일정한 각을 이루면서 일치하지 않기때문에 생기며 시차는 두 면에 세운 법선들이 각 을 이루기때문에 생긴다. 회전결과 모든 영상점들은 영상자리표면의 한곳에 수직으로 세 운 특정한 축주위로 일정한 각만큼 회전한것처럼 보인다. 영상광학계의 시차로 하여 수감 면에서 영상점들사이의 간격은 선형적으로 변한다. 영상교정에서 나서는 선차적인 문제는 물체면의 실제적인 자리표와 변환된 화상의 자리표사이의 대응관계를 확정하는것이다. 이를 위하여 가장 많이 리용하는 기준물체면은 서양장기판모양의 무늬이다. 그것은 제작이 간단하고 교정을 위한 모서리점들을 쉽게 검 출할수 있기때문이다. 론문에서는 기준물체면의 모서리부분화상(그림 1의 ㄱ))과 변형된 기준물체의 영상 (그림 1의 ㄴ))사이의 상관연산을 통하여 모서리 교정점들의 위치를 확정하였다. 그림 1의 ㄴ)에서 보는것처럼 기준물체의 변형영상은 시차와 회전 을 동시에 나타낸다. ㄱ)                  ㄴ) 그림 1. 모서리부분화상(ㄱ))과 기준물체의 변형된 영상(ㄴ)) qpT ,( 20× vuS ,( 그림 1의 ㄱ)에서 부분화상 의 크기는 화소이며 교정점을 탐색하려는 변형 화소이다. 의 크기는 220 에서 부분화상 를 행 혹은 렬별로 주사하면서 부분화상과 =×QP 화상 교정점탐색은 변형물체화상 qpT ,( ) 220× ) =×VU 20 ) vuS ,( ) 무늬투영광학계에서 고차다항식근사에 의한 시차와 회전교정의 한가지 방법 － 13 － ( nm 에서 변형화상부분(크기 ) , QP × 화소)사이의 표준화된 교차상관곁 그것이 놓인 위치 수 nmR ) , ( 을 계산하는 방식으로 진행하였다. ∑∑ uS ,( MmuT () +− v ( nmR , ( ) = u v uS ,([ 2 )] v ⎡ ⎢ ⎢ ⎣ ∑∑ u v 2/1 ⎤ ⎥ ⎥ ⎦ ⎡ ⎢ ⎢ ⎣ ∑∑ u v + ,2/)1 v +− Nn ( + )2/)1 [ MmuT +− ( ( + ,2/)1 v +− Nn ( + )2/)1 (1) 2/1 ] 2 ⎤ ⎥ ⎥ ⎦ 그림 2에 그림 1의 변형화상과 부분화상사이의 표준화된 교차상관연산결과를 보여주었 다. 물체의 변형화상에서 교정점근방의 화상은 시차와 회전효과로 하여 부분화상과 정확하 게 일치하지 않으므로 상관곁수의 값도 약간씩 차이난다. 하지만 그림 2에서 보는것처럼 교정점근방에서 상관값들은 다른 점들에 비하여 뚜렷한 대조를 이루고있으며 따라서 일정 한 화상처리공정을 거치면 그 점들을 비교적 정확하게 확정할수 있다. 론문에서는 턱값처 리방식을 적용하여 교정점근방의 구역들을 정하고 무게중심법을 적용하여 교정점들을 확정 하였다. 다음으로 매 교정점들에 물체의 정확한 표준자리표들을 대응시켰다. 그림 2에는 상 관연산과 무게중심법을 리용하여 그림 1의 실례화상에서 확정한 교정점 iu v 들과 그에 ( 들을 보여주었다.( 대응하는 표준자리표 는 교정점의 개수) ,1 (cid:34)= , , kk ) ( ) i , i x i y , i ㄱ) ㄴ) 그림 2. 주사식상관연산결과(ㄱ))와 무게중심법을 리용하여 확정한 교정점들에 대응하는 표준자리표(ㄴ)) 종합대학학보 물리학 주체108(2019)년 제65권 제4호 ２. 고차다항식근사에 영상의 시차와 회전교정 － 14 － 사실 화상 vuS ,( ) 는 초기화상(원화상) yxC ,( ) 가 광학계의 설치조건으로 인한 시차와 회전으로 하여 변형된것이다. 시차와 회전에 대한 해석적인 식의 파라메터들을 조종하면 를 얻을수 있다. 이것은 광학계를 yxC ,( 사이의 관계 통하여 일단 변형된 화상을 바로잡으려면 두 화상사이의 자리표 ,(), 를 임의로 변화시켜 각이한 류형의 화상 vuS ,( u v ,( yx ) ) ) 를 밝혀야 한다는것을 의미한다. x = uf ,( x v ), y = uf ,( y v ) (2) 변형화상에 시차와 회전이 동시에 포함되여있는 경우 두 자리표사이의 관계는 2차까 지의 다항식으로 표시할수 있다.[1] ub v 4 론문에서는 주사식상관연산으로 확정한 교정점 bub + 2 1 by = 0 ub 3 + + + v ax = 0 + aua + 1 2 v + ua 3 + ua v 4 + a 5 v 2 2 2 ⎫ ⎪ ⎬ ⎪⎭ 2 + b 5 v ) 사이의 2차다항식의 곁수들을 최소2제곱법으로 결정하고 x ( i y , i yx 에서의 색값으로 넘기는 방법으로 교정된 화상 ,( ) ) i , ) iu v 와 그에 대응시킨 표준자리표 ( vu 에서의 색값을 ,( 를 얻었다. 실례로 다음의 값 yxC ,( ) (3) 들은 그림 2의 자료로부터 결정한 2차다항식의 곁수들이다. a0=0.042 6, a1=0.043 9, a2=0.002 89, a3=−6.48×10−5, a4=−5.65×10−6, a5=4.79×10−6 b0=0.189, b1=0.002 19, b2=0.037 9, b3=−3.7×10−6, b5=−5.24×10−5, b5=−1.78×10−6 그림 3에 우에서 보여준 곁수들과 식 (3)에 기초하여 결정한 자 리표계에서 교정한 화상을 보여주었다. 그림 3에서 보는것처럼 상관연산으로 교정점의 자리표들을 결정 하고 고차다항식근사법으로 변형화상과 교정점들사이의 관계를 확정 하면 시차와 회전으로 외곡된 화상을 정확하게 교정할수 있다. 실지 환경에서는 광학계의 수차와 물체의 놓임방식에 따라 화상이 보다 심하게 외곡될수 있지만 이 방법을 리용하면 그것을 간단하게 교정 할수 있다. 그림 3. 교정된 화상 맺 는 말 화상상관법과 고차다항식근사를 리용하여 시차와 회전으로 하여 변형된 화상을 교정 하는 한가지 방법을 제기하였다. 장기판모양의 기준물체면의 모서리부분화상과 변형된 물체영상사이의 상관연산을 통하여 모서리교정점들의 위치를 확정하였다. 교정점들과 그에 대응시킨 표준자리표 사이의 2원2차다항식의 곁수들을 최소2제곱법으로 결정하는 방법으로 바로 선 화상을 얻었다. 무늬투영광학계에서 고차다항식근사에 의한 시차와 회전교정의 한가지 방법 － 15 － 참 고 문 헌 [1] W. K. Pratt; Digital Image Processing, John Wiley & Sons, 613～637, 2001. [2] J. S. Geng; Advances in Optics and Photonics, 3, 128, 2011. [3] J. H. Huang et al.; Optical Engineering, 52, 4, 043602, 2013. [4] T. Eckhard et al.; Applied Optics, 53, 17, 3764, 2014. 주체108(2019)년 6월 5일 원고접수 A Method for Correction of Image Rotation and Parallax by Polynomial Fitting in Fringe Projection System Paek Kang Ryong, Kim Chol Su We presented a method for correction of images deformed from rotation and parallax by using image correlation and polynomial fitting. The correction points can be decided by correlation between corner images of a chessboard-shaped reference and its deformed image. The upright image can be obtained by determining the coefficients of 2 dimensional polynomials between the correction points the reference coordinates corresponding to them with least square. Key words: digital image processing, correction of aberration, image correlation