김일성종합대학학보 지구환경과학 및 지질학 주체109(2020)년 제66권 제1호 휴대용수자식현미경에 의한 새로운 자동광물감정방법 김명선, 황광철 위대한 령도자 동지께서는 다음과 같이 교시하시였다. 《우리는 발전된 나라들에서 이룩한 과학기술의 성과를 널리 받아들이고 그것을 더욱 발전시킴으로써 최신과학기술의 높은 봉우리를 빨리 점령하여야 합니다.》(《선집》 증보판 제11권 142페지) 지난 시기의 연구[2, 3]에 의하면 화상클라스터화에 가장 많이 리용되는 색공간은 주 로 HSV색공간과 HSI색공간들이였다. 그러나 이러한 색공간들은 박편화상에서의 광물구 분에서는 비교적 합리적이였지만 질이 좋지 못한 마편화상에서는 광물구분이 잘 되지 않 는 결함이 있다. 론문에서는 휴대용수자식현미경으로 얻은 마편화상정보를 MATLAB를 리용하여 여 러가지 색공간에서 클라스터화하고 금속광물을 정확히 구분할수 있는 합리적인 색공간을 선택하였으며 BP신경망을 리용한 새로운 자동광물감정방법을 제기하고 그 효과성을 검 증하였다. １．자동광물감정을 위한 합리적인 색공간선택 우리는 휴대용수자식현미경(5M고화질영상수감부, 20～500배 확대)을 리용하여 감정 한 마편화상에서의 광물구분이 어떤 색공간에서 잘 되는가를 실험적으로 확정하였다. 먼저 3개 광물로 이루어진 표본화상을 선택하고 단일한 광물들을 반영하는 화상으로 가공하였다.(그림 1) 화상의 크기를 150×200pixel 로 구성하면 전체 화상의 화소점 수는 3만개이며 구분된 광물들에 해당한 화소점수들의 총합도 3만 개이다.[2, 3] 다음 가공된 화상에서 구분된 3개 광물들이 차지하는 면적을 100%로 하고 HSV, HSI, YCbCr, CIElab, CMYK색공간으로 변환하 였다. 다음 5개의 색공간에서 K－평 균클라스터화로 광물들을 구분하였 그림 1. 색공간선택을 위한 표본화상과 가공된 화상 ㄱ) 표본화상, ㄴ) 가공된 화상 다.(그림 2) K－평균클라스터화알고리듬은 2개의 부분으로 구성되여있다.[4] 첫 부분은 매 클라스터에 무게중심들을 하나씩 정의하는것이고 두번째 부분은 주어 진 자료모임에 속하는 매 점들을 가장 가까운 무게중심과 련관시키는것이다. 휴대용수자식현미경에 의한 새로운 자동광물감정방법 － 119 － 그림 2. 5개의 색공간에서 K－평균클라스터화에 의하여 구분된 광물화상 ㄱ) 가공화상, ㄴ) HSV, ㄷ) HSI, ㄹ) YCbCr, ㅁ) CIElab, ㅂ) CMYK 5개의 색공간에서 구분된 매 광물들에 해당한 화소점수를 계산하고 가공된 화상에서 의 화소점수와의 표준편차를 구하여 합리적인 색공간을 선택하였다.(표 1) 표 1. 여러가지 색공간에서 구분된 광물들의 화소점수(개)와 표준편차 광물종류 흰색광물 검은색광물 회색광물 표준편차 가공화상 9 346 3 795 16 859 0 HSV CMYK 1 0914 9 540 7 262 7 564 12 896 11 824 5 472.51 6 311.096 HSI 10 326 11 860 7 814 12 157.99 YCbCr 7 598 6 573 15 829 13 440.013 CIElab 7 345 15 908 6 747 15 905.39 그림 2와 표 1에서 보는바와 같이 CMYK색공간에서의 광물구분정확도가 가장 높다. 따라서 우리가 리용하려는 마편과 기구의 특성으로부터 합리적인 색공간이 CMYK색공간 이라는것을 알수 있다. ２．새로운 자동광물감정방법 새로운 자동광물감정방법은 크게 세 부분으로 구성되여있다. 첫 부분은 화상입력 및 전처리단계이며 다음 부분은 K－평균클라스터화에 의한 광물구분단계, 세번째 부분은 인 공신경망에 의한 광물감정단계이다. ① 화상입력 및 전처리단계 화상입력은 휴대용수자식현미경으로 진행하였다. 식별하려는 화상의 크기는 선행연 구정형[2, 3]에 기초하여 150×200pixel크기의 화상으로 재구성하였다. － 120 － 종합대학학보 지구환경과학 및 지질학 주체109(2020)년 제66권 제1호 다음 입력된 화상강조를 위하여 히스토그람균등화를 진행하고 초기화상에 어떤 장애 가 많은가를 감정하였으며 3×3pixel크기의 려파창구를 리용한 중간값려파처리를 진행하 였다. ② K－평균클라스터화에 의한 광물구분단계 이 단계에서는 전처리된 마편 화상자료들을 K－평균클라스터화 방법으로 처리하여 광물들을 구분 한다. 초기화상은 류비철광과 방연 광, 미지광물로 구성된다. CMYK색공간에서 K－평균클라 스터화방법에 의하여 얻어진 화상 과 초기화상을 비교하여보면 류비 철광은 검은색(클라스터값 2)으로, 방연광은 회색(클라스터값 1)으로, 미지광물은 흰색(클라스터값 0)으로 비교적 정확히 구분된다.(그림 3) 그림 3. 초기화상과 K－평균클라스터화방법에 의하여 얻어진 광물화상 ㄱ) 초기화상, ㄴ) K－평균클라스터화방법으로 얻은 광물화상 ③ 인공신경망에 의한 새로운 광물감정단계 현재 광범히 응용되는 대부분의 인공신경망은 BP신경망과 그것의 변종들이다. BP신경망은 비선형미분가능한 함수를 리용하여 무게곁수와 턱값을 조절하는 계층형 신경망이다.[1] BP신경망에서 입출구사이관계를 확정하기 위한 학습은 오차평가함수가 최소로 되도 록 신경망세포들사이의 무게곁수와 턱값을 탐색하는데 귀착된다. BP신경망에서 학습은 정보의 정방향전달과 오차의 역방향전달의 반복과정으로 구성되여있다. 우리는 새로운 자동광물감정을 위한 자료기지구축을 위하여 류비철광, 황철광, 방연 광, 섬아연광, 황동광의 R, G, B색지수값을 얻고 자료기지화하였다. 류비철광의 17개 마 편화상의 100개 화소값들, 황철광의 12개 마편화상의 100개 화소값들, 방연광의 7개 마편 화상의 56개 화소값들, 섬아연광의 10개 마편화상의 100개 화소값들, 황동광의 6개 마편 화상의 40개 화소값들의 R, G, B색지수값들을 CMYK색공간변환공식으로 변환하여 얻어 진 값들로 인공신경망학습을 위한 학습자료기지를 구축하였다.(표 2) 표 2．인공신경망학습을 위한 주요 금속광물들의 학습자료기지 광물 류비철광 황철광 방연광 섬아연광 황동광 R 158 109 251 239 69 130 24 4 131 81 G 166 101 255 243 89 138 16 12 122 87 B 146 117 255 239 125 174 12 8 85 66 C 50 82 2 9 162 107 141 169 44 90 M 23 90 0 5 112 82 151 137 51 60 Y 73 36 2 13 23 9 157 160 133 134 K 70 112 0 5 91 42 223 230 116 153 휴대용수자식현미경에 의한 새로운 자동광물감정방법 － 121 － 광물구분을 위한 BP신경망의 입구층에는 광물들의 R, G, B, C, M, Y, K색지수값들 을 입력하고 출구층에서는 류비철광, 황철광, 방연광, 섬아연광, 황동광을 색상별로 구분 하도록 하였다. 학습이 끝나고 신경망이 구성된 다음 임의의 마편화상을 입력하면 화상의 매 화소점 의 R, G, B, C, M, Y, K색지수값이 자동적으로 추출되고 이 값들을 입력값으로 하여   5개의 광물들을 감정한다. 새로운 자동광물감정방법에 의한 화상의 식별률은 전문가가 광물들을 구분(여러가지 흠집 등을 무시)하고 150×200pixel크기의 화상으로 구성하였을 때 매 광물들이 차지하는 화소점수와 새로운 광물감정방법으로 식별한 광물의 화소점수와의 차이에 대한 퍼센트함 량을 계산하는 방법[3]으로 구하였다.(표 3) 표 3．광물화상에 대한 새로운 자동광물감정방법의 식별률(%) 화상 식별률 류비철광 황철광 방연광 섬아연광 황동광 평균식별률 1번 검사화상 2번 검사화상 3번 검사화상 11 850 6 147 13 773 7 535 2 381 1 240 식별률 86.04 81.58 52.08 1 256 18 423 3 773 12 955 5 230 5 820 식별률 33.29 70.32 89.86 256 773 21 423 3 230 18 955 4 820 ㄱ ㄴ ㄱ ㄴ ㄱ ㄴ 8 522 7 329 86.00 4 423 7 329 60.35 4 423 3 329 75.27 1 100 123 11.19 668 123 18.41 1 668 2 123 78.57 76.52 63.46 65.97 식별률 33.12 88.48 67.01 ㄱ－전문가가 고찰한 광물화상의 화소점수 ㄴ－새로운 자동광물감정방법에서 계산된 광물화상의 화소점수 표 3에서 보는바와 같이 새로운 자동광물감정방법의 식별률은 66～76.5%정도이다. 새로운 자동광물감정방법을 리용하여 광석마편에서 광물을 식별할 때 그 정확도는 66～76.5%이지만 광석마편의 질을 개선하면 식별정확도를 90%까지 높일수 있다. 맺 는 말 참 고 문 헌 [1] 리명일 등; MATLAB에 의한 화상처리기술, 공업출판사, 1～288, 주체104(2015). [2] N. A. Baykan et al.; Computers & Geosciences, 36, 91, 2010. [3] H. Izadi et al.; Computers & Geosciences, 99, 37, 2017. [4] 丁蕾 等; 图形图像, 26, 7, 8, 2007. 주체108(2019)년 10월 5일 원고접수 － 122 － 종합대학학보 지구환경과학 및 지질학 주체109(2020)년 제66권 제1호 New Automatic Mineral Identification Method by Portable Digital Microscope Kim Myong Son, Hwang Kwang Chol In this paper, we selected the rational color space which could divide the metal minerals accurately, and then suggested a new automatic mineral identification method used BP neural network and verified its effectiveness. Keywords: portable digital microscope, automatic mineral identification