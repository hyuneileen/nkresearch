김일성종합대학학보 지구환경과학 및 지질학 주체107(2018)년 제64권 제3호 공간짜임새분석에 의한 위성화상분할방법 진흥일, 전성훈 경애하는 최고령도자 동지께서는 다음과 같이 말씀하시였다. 《국토의 거의 80%를 차지하는 산림은 나라의 가장 귀중한 자원이고 후대들에게 물 려주어야 할 재부이며 국토를 보호하기 위한 중요한 수단입니다.》 지표면에 존재하는 많은 지리적대상들은 위성화상에서 공간짜임새를 가지고 표현된 다. 실례로 산림이나 주민지구역, 구름 등을 들수 있다. 대상의 공간짜임새는 위성화상의 공간분해능과 일정한 관계가 있는데 실례로 산림대상의 경우 고분해능위성화상에서는 나 무들의 형태와 배치상 특성으로 하여 나무들사이에 음영이 존재하며 이것은 산림대상의 공간짜임새를 명백하게 하는 기본요인으로 된다. 하지만 분해능이 낮은 경우에는 스펙트 르혼합효과에 의하여 산림대상의 공간짜임새가 달라지게 된다. 공간짜임새를 고려하는것은 고분해능위성화상들에서 특별히 중요하다. 고분해능위성 화상들에서는 대상의 공간짜임새를 명확히 식별할수 있지만 스펙트르대역들의 개수가 많 지 않으므로 Landsat계렬의 위성화상들에 적용하던 화상분류방법들을 그대로 적용하는데 서 제한이 있다. 우리는 공간짜임새구조를 분석하기 위한 정량적인 측정량을 설정하고 그에 기초하여 고분해능위성화상의 공간분할을 실현하기 위한 방법에 대하여 연구하였다. １．공간짜임새분석 일반적으로 화상의 짜임새를 표현하는 지표를 짜임새서술자라고 한다. 이러한 짜임새 서술자들에는 동시생기행렬, 자동상관함수를 비롯하여 여러가지 지표들이 있다.[1, 4] 짜임새분석을 위하여 화상의 통계적특성을 분석하는데 널리 리용되는 히스토그람을 짜임새서술자로 설정하였다. 화상에서 전체 화소들중 주어진 색준위값을 가지는 화소들의 개수를 도표로 나타낸 것을 그 화상의 히스토그람이라고 부르는데 그것은 화상을 이루는 전체 화소들중 주어진 준위값을 가지는 화소들이 차지하는 비률 즉 화상에서 해당 값의 분포특성을 나타낸다. h i = n i N , i (cid:34)=  2 ,1 K (1) 여기서 in 는 준위가 i 인 화소들의 개수, N 은 전체 화소의 개수이다. 히스토그람곡선의 형태를 구역의 짜임새속성을 비교분석하는데 사용할수 있다. 만일 화상에 2개의 짜임새를 가진 구역 R , R′ 가 있고 그것에 대응하는 히스토그람이 서로 비 슷하다면 2개 구역은 색준위값의 분포특성에서 서로 동질구역이라고 볼수 있다. 히스토그람을 가지고 구역의 짜임새들사이의 동질성을 평가하기 위하여 다음의 식을 리용한다. 공간짜임새분석에 의한 위성화상분할방법 － 61 － K 1 − ∑ i = 0 H = (min ′ , h i h i ) (2) ih 와 여기서 ih′ 는 각각 구역 R 와 R′ 에 해당한 히스토그람이다. 동질성측정량 H 의 리 론적최소값과 최대값은 각각 0, 1이다. H 가 1에 가까울수록 2개 구역의 짜임새는 서로 류사한것으로 된다. 짜임새분석을 위한 서술자특징(짜임새서술자를 계산하는데 리용되는 지표)으로서 색 화상의 밝음도세기와 색도를 설정하였다. 세기와 색도의 특징은 색화상을 RGB색공간으로 부터 HSV색공간에로 변환하는 방법에 의하여 계산할수 있다.[2] HSV공간에서 V성분은 밝음도세기에 대응되며 그것의 값범위는 0～255사이에 있다. 한편 H성분은 색도에 대응 되는데 그것의 값범위는 0～360°사이에 있다. 이제 2개 짜임새구역 R 와 R′ 에 대하여 세기와 색도특징에 의한 동질성측정량을 각 각 Hi , Hc 라고 하면 2개 구역의 전체적인 동질성측정량은 다음과 같이 쓸수 있다. 여기서 iw 와 cw 는 각각 무게곁수들이며 그것들사이에는 조건 i ww + c 1= 이 성립한다. HcwHiwH + = (3) i c 론문에서는 이 값들을 각각 0.7=iw , 0.3=cw 으로 설정하였다. ２．위성화상분할 화상분할은 주어진 류사성 혹은 동질성기준에 의하여 화상을 서로 이웃하면서 겹치 지 않는 여러개의 구역들로 나누는 화상처리방법의 하나이다.[4] 지금까지 여러가지 화상 분할방법들이 제기되였는데 그것들은 화소에 기초한 분할, 구역에 기초한 분할 등으로 갈 라볼수 있다. 화소에 기초한 분할방법의 대표적인 실례로 구역성장법을 들수 있는데 이 방법에서는 화소의 밝음도를 구역들사이의 동질성을 규정하는 지표로 하고있으므로 짜임 새를 가지는 대상들을 정확히 구분하지 못한다. 이로부터 우리는 대상의 공간짜임새를 고 려하기 위하여 구역에 기초한 화상분할방법을 사용하였다. 이 방법은 크게 3개의 단계 즉 계층적분할, 통합, 화소조정단계로 이루어져있다. １) 계층적분할 이 단계에서는 화상령역을 4개의 부분블로크들로 재귀적으로 분할한다.  블로크를 크기가 동일한 4개의 부분블로크로 분할하겠는가 안하겠는가 하는것은 블 로크내부의 짜임새동질성에 대한 검사를 통하여 결정한다. 이를 위하여 4개의 부분블로크들중 가능한 모든 블로크쌍들을 생각하고 매 블로크쌍 에서 식 (3)에 의하여 블로크들사이의 동질성을 계산한다. 있는데 6개의 블로크쌍에 대하여 우의 계산을 모두 진행한다. 이때 가장 큰 값을 장 작은 값을 4개의 부분블로크중 임의로 2개의 부분블로크를 선택하는 가능한 경우에는 6가지가 , 가 minH 이라고 한다. 이 2개의 값들사이의 비는 블로크구역내부의 짜임새불균 일성을 표현한다. 만일 이 값이 어떤 턱값 X 보다 크다면 블로크는 동질성을 만족시키지 않는다고 판단하고 분할을 진행한다. maxH R = > X (4) H H max min － 62 － 종합대학학보 지구환경과학 및 지질학 주체107(2018)년 제64권 제3호 턱값 X 가 작다면 분할이 세부적인 준위까지 진행되지만 큰 경우에는 분할과정이 세 분화되지 않는다. X 의 값을 선택하는데서는 큰 값보다 작은 값을 선택하는것이 보다 유 리한데 그것은 다음단계의 통합처리과정에 계층적분할에 의하여 생기는 오차를 보정할수 있기때문이다. 만일 분할이 지나치게 세분화된다면 블로크의 크기가 작아져 히스토그람분 포가 대상의 공간짜임새를 정확히 반영하지 못하게 된다. 그러므로 공간짜임새를 표현하 는데서 히스토그람의 믿음성을 담보하기 위하여 블로크의 최소크기 minS 을 설정하고 분 할과정에 블로크의 크기가 minS 보다 작게 되면 처리를 끝낸다. 또한 분할의 초기단계에서 블로크의 크기가 지내 크다면 그안에 여러개의 짜임새들 이 포함되여 블로크들사이의 히스토그람분포가 서로 류사한것으로 해석될수 있는 경우가 있게 된다. 이것을 방지하기 위하여 처음에 화상전체를 하나의 블로크로 보고 분할을 시 작하는것이 아니라 화상을 크기가 maxS 인 블로크들로 미리 분할하고 그것들에 대하여 분 할처리를 진행한다. 이것은 계층적인 블로크분할의 처리속도를 높이는데서도 우월하다. ２) 구역통합 구역통합에서는 일정한 조건이 만족될 때까지 서로 류사하면서 린접하는 구역들을 통합한다. 통합의 매 단계에서 통합되는 구역들을 결정하기 위하여 다음의 식을 가지고 린접한 구역들사이의 중요성을 계산한다. MI = × H (5) 1 P 여기서 P 는 2개의 구역가운데서 작은 구역에 있는 화소들의 개수, H 는 식 (3)으로 계산 되는 한쌍의 린접한 구역들사이의 류사성이다. 가장 큰 MI 값을 가지는 한쌍의 린접구역들을 결정한 다음 그것들을 서로 통합한다. 그리고 통합된 새로운 구역의 히스토그람을 갱신한다. 이러한 처리는 구역의 개수가 미리 정한 값에 이를 때까지 반복한다. ３) 화소조정 구역통합처리를 끝낸 시점에서 구역들사이의 경계는 대상의 경계와 일치하지 않으며 또한 미끈하지 못하고 꺾인선형태로 된다. 그러므로 화소조정처리를 통하여 구역경계를 화상에 나타난 대상들사이의 경계에 맞추어 원활하게 조정하여야 한다. 만일 어떤 화소 P 가 적어도 2개의 짜임새를 가진 구역들의 경계상에 있다면 그것은 경계점으로 고려된다. 점 P 가 경계화소일 때 그것의 4근방은 m 개의 서로 다른 구역표 식들을 가질수 있는데 m의 가장 작은 값과 가장 큰 값은 각각 2, 4이다. 화소조정의 첫 단계에서는 이러한 점이 재표식되는가 안되는가를 검사하기 위하여 주목하는 화소점 P를 중심으로 반경이 r 인 원형휠타를 중첩시키고 원형휠타에 놓이는 화상구역의 히스토그람 분포를 계산한다. 다음단계에서 다음의 식에 의하여 원형휠타구역과 i번째 구역 ( i )사이의 류사성을 계산한다. ,2,1 (cid:34) m = , 여기서 iv 는 i번째 구역으로 표식화된 점 P의 4근방들의 개수이다. 원형휠타구역과 w 번 째 구역사이의 류사성이 가장 큰 값을 가진다면 점 P 의 표식을 w 로 재표식하고 P 의 낡고 새로운 구역들의 히스토그람을 갱신한다. score i = Hv × i i (6) 공간짜임새분석에 의한 위성화상분할방법 － 63 － ３．응용결과 및 분석 공간분해능이 1m인 고분해능위성화상을 선택하여 위성화상분할방법의 정확성을 검증 하였다. 리용된 위성화상의 크기는 1 024pixel × 1 024pixel이다. 위성화상에는 산림, 하천, 도로, 주민지와 농경지를 비롯하여 여러개의 지리적대상들이 포함되여있다. 위성화상에 분할방법을 적용하기 위하여 파라메터값들을 다음과 같이 설정하였다.  우선 계층적분할단계에서 분할한계를 규정하는 턱값은 1.3으로 하였고 계층적분할이 시작되는 최대블로크크기 maxS 와 최소블로크크기 minS 의 값은 각각 64, 16으로 설정하였 다. 구역통합단계에서 최종적인 구역의 개수는 화상에 포함된 지리적대상들의 분포특성에 따라 가변적으로 설정하는데 실험화상의 경우 최종적인 구역의 개수를 11개로 하였다. 다음 화소조정단계에서 사용하는 원형휠타의 반경 r 값은 11로 주었다.  그리고 설정된 파라메터에 기초하여 위성화상분할을 진행하였다.(그림) ㄱ) ㄴ) ㄷ) ㄹ) 그림. 원화상과 분할결과 ㄱ) 시험화상, ㄴ) 통합처리후 분할결과, ㄷ) 최종분할결과, ㄹ) 원화상과 분할결과의 중첩 그림에서 보는바와 같이 명백한 공간짜임새를 가진 산림이나 하천대상들은 개별적인 구역들로 정확히 분류되였다. 특히 산림대상은 다른 대상들과 명백히 구별되는 고유한 공 간짜임새를 이루고있는것으로 하여 경계가 명백해졌다. － 64 － 종합대학학보 지구환경과학 및 지질학 주체107(2018)년 제64권 제3호 한편 고분해능위성화상에서 논대상은 여러개의 구역들로 세분화되였는데 개별적인 구역들은 실지 육안판독에 의해서 차이를 판별하기 어렵다. 논대상구역이 여러개의 부분 구역들로 분할된것은 그것의 짜임새특성과 관련된다. 일반적으로 대상의 표면구조를 표현 하는 짜임새는 서로 구별되는 도형요소(짜임새요소)들의 규칙적이거나 불규칙적인 배렬에 의하여 이루어지는데[3] 논대상을 표현하는 짜임새요소들의 크기와 대조도가 작은것으로 하여 구역별히스토그람들이 모두 뾰족한 봉우리형태를 가진다. 이것은 통계적으로 볼 때 히스토그람분포의 2제곱편차가 작다는것을 의미하는데 이 경우 식 (2)의 값은 작은 값을 가지게 된다. 결국 통합처리과정에 논대상을 이루는 구역들사이의 비동질성이 큰것으로 해석되여 서로 통합되지 않게 된다. 다음으로 위성화상분할결과 건물구역의 경계안에 일부 논대상이 포함된것을 볼수 있 다. 이러한 오차는 위성화상의 분해능이 높은것으로 하여 건물구역을 하나의 짜임새를 가 진 구역으로 볼수 없기때문에 생긴다. 만일 통합단계에서 분할구역의 개수를 크게 설정하 면 도로나 건물과 같은 개별적인 대상들이 서로 다르게 분류되여 분할결과가 보다 정확 해질것이다. 즉 통합구역의 개수가 증가할수록 지표면대상이 상세하게 분류되게 된다. 화상분할방법을 고분해능화상에 적용할수 있으며 산림을 비롯한 지표면대상들을 조 사하는데 응용할수 있다. 맺 는 말 참 고 문 헌 [1] 최동륜 등; 원격조사원리, 종합대학출판사, 208～215, 주체105(2016). [2] A. Koschan; Digital Color Image Processing, Wiley, 60～62, 2008. [3] S. Mark Nixon et al.; Feature Extraction and Image Processing, Newnes, 60～62, 2002. [4] T. Ojala et al.; Pattern Recognition 32, 477, 1999. Segmentation of the Satellite Image by the Spatial Texture Analysis 주체107(2018)년 4월 5일 원고접수 Jin Hung Il, Jon Song Hun We suggested the histogram descriptor that represented the texture characteristics of the image region and presented the method that evaluated the texture homogeneity among the image regions with the histogram descriptor, quantitatively. And, based on this, we studied the segmentation of the satellite image that classified the satellite image according to the texture property. Key words: segmentation of the image, texture