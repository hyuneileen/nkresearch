김일성종합대학학보 (지구환경과학 및 지질학) 주체107(2018)년 제64권 제1호 OSGEarth에 의한 지형모형화방법에 대한 연구 길류성, 리금수 OSGEarth는 OSG(Open Scene Graph)에 기초하여 지형묘사를 진행하는 도구로서 대규 모지형을 효과적으로 묘사할수 있다. OSGEarth는 자체로 지형모형화를 진행할수 있으며 망 상에서 실시간적으로 지형자료를 내리적재하여 묘사한다.[2] OSGEarth가 지원하는 지도화일형식(WCS, TMS, WMS 등)은 다양하며 직결지형자료봉 사기로부터 자료를 내리적재할수 있다. 실례로 Google map, Yahoo map, ArcGIS Online 등 의 봉사기와 련결하여 지형묘사를 진행할수 있다. 론문에서는 OSGEarth를 리용하여 수자지구를 묘사하는 방법에 대하여 고찰하였다. １．OSGEarth에서 높이자료 불러들이기 일반적으로 Aster GDEM자료를 불러들이는 코드는 다음과 같다. osg::HeightField* createHeightField(const TileKey&key, ProgressCallback*progress) {   if (key.getLevelOfDetail()>_maxDataLevel){return NULL;}   GDAL_SCOPED_LOCK;   int tileSize=_options.tileSize().value();   osg::ref_ptr<osg::HeightField>hf=new osg::HeightField;   hf－>allocate(tileSize, tileSize); if (intersects(key)){     double xmin, ymin, xmax, ymax;     key.getExtent().getBounds(xmin, ymin, xmax, ymax);     GDALRasterBand*band=findBandByDataType(_warpedDS, GDT_Float32);     if (band==NULL){band=_warpedDS－>GetRasterBand(1);}     double dx=(xmax－xmin)/(tileSize－1);     double dy=(ymax－ymin)/(tileSize－1); for (int c=0; c<tileSize; ++c){       double geoX=xmin + (dx*(double)c);       for(int r = 0; r<tileSize; ++r){         double geoY=ymin+(dy*(double)r);         float h=getInterpolatedValue(band, geoX, geoY);         hf－>setHeight(c, r, h); }     } OSGEarth에 의한 지형모형화방법에 대한 연구 － 43 － }   else{    for (unsigned int i = 0; i < hf－>getHeightList().size(); ++i)        hf－>getHeightList()[i]=NO_DATA_VALUE; }  return hf.release(); } 이밖에도 타일방식으로 자체정의된 높이자료를 불러들이는 부분을 삽입할수 있다. ２．피라미드에 기초한 지형그리기방법 일반적으로 현재 리용하고있는 지형높이자료는 위성으로부터 촬영한것이며 위성화상 의 분해능이 높아지는데 따라 자료기지도 점점 커진다. 이때 대용량지형자료의 실시간장면 생성이 어려운 문제로 제기되는데 피라미드구조에 기초한 지형의 실시간묘사방법을 받아 들이면 이 문제를 해결할수 있다.[1] 피라미드는 다분해능계층모형이다. 피라미드를 만들 때 분해능의 련속적인 변화를 실 현하기 힘들므로 배증가법을 리용하여 만든다. 매 층의 분해능은 다음과 같다. 지형의 시작분해능이 r0, 배률을 m으로 하면 l층의 분해능은 ri=r0×m(1) 이다. 여기서 배률 m은 1보다 큰 정수이며 일반적으로 2로 취한다. 즉 2×2개의 점은 하나 의 상층점에 모인다. 이 경우 시작지형분해능이 1이면 1층의 분해능은 2이다. 분해능에 따 라 층을 선택하면 연산량이 대폭 줄어든다. 피라미드구조에 기초한 LOD지형간화알고리듬은 계층구조로 피라미드구조에 기초한 지 형계층을 구성하는 방법이다. 마디점을 정의하는 자료구조는 (x, y, z, zi)이다. 여기서 x, y는 마디점의 위치, z는 마디 점의 높이, zi는 마디점이 이웃한 한등급 낮은 분해능층의 마디점높이자료이다. 매 블로크 의 크기 n은 임의로 취할수 있으나 체계의 기억용량을 고려하여 설정한다. 속도를 높이기 위 하여 내부기억페지의 자료읽기차수를 줄이며 하드읽기효률을 고려하여 블로크크기를 4kB 로, n의 값은 32로 정하였다. 피라미드의 지형블로크로부터 알수 있는바와 같이 시점중심의 블로크는 원래의 DEM 자료를 유지하며 시점중심주위의 첫번째 정방형구역(즉 LOD의 제1층)은 원래 DEM에서      2개 점을 한점으로 취하여 묘사한다. LOD의 두번째 층에서는 4개 점을 한점으로 취하여 표 현한다. 이로부터 임의의 n층의 표본간격은 2n(n=1, 2, …)이다. 이렇게 분층처리방법을 리용하여 지형자료의 분해능을 효과적으로 낮추며 지형의 특 징을 유지한다. 이 방법은 지형묘사속도를 높이며 동시에 묘사의 질을 떨구지 않는다. OSGEarth는 측지자리표계와 피라미드자료원천에 기초한 모형생성과 타일중첩을 제공 한다. Earth화일에서 image태그에 화상의 원천위치를 지적하고 height field태그에 높이자료 의 위치를 지적하면 OSGEarth는 자동적으로 지령을 완성한다. － 44 － 종합대학학보(지구환경과학 및 지질학)  주체107(2018)년 제64권 제1호 맺 는 말 이 방법은 전지구적인 대규모지형의 묘사를 쉽게 진행할수 있으며 Earth가 지원하는 지 도화일형식들을 리용하여 3차원지구공간정보체계들에 대한 개발속도를 높이고 확장하는데 유리하다. 참 고 문 헌 [1] 김일성종합대학학보(자연과학) 56, 4, 56, 주체99(2010). [2] OSGEarth Documentation, 1～87, 2016. On the Study of Terrain Modeling Method by OSGEarth 주체106(2017)년 11월 5일 원고접수 Kil Ryu Song, Ri Kum Su In this paper we considered about problem that improved description speed and correctness by using block topography hierarchical structure simplification algorithm based on pyramid structure in scene modeling. Key words: OSG, digital earth